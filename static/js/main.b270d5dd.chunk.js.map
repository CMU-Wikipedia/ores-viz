{"version":3,"sources":["data/data_not-balanced.csv","data/data_balanced_1.csv","data/performance.csv","partials/slider.jsx","partials/thresholdInput.jsx","components/threshold_explorer/threshold_performance.jsx","partials/shape.jsx","partials/typeToggle.jsx","partials/diff.js","components/threshold_explorer/threshold_explorer.jsx","components/threshold_explorer/threshold_explorer_section.js","components/group_compare/compare_visualizer.jsx","components/group_compare/section.jsx","partials/metric.jsx","components/recommender.jsx","components/injection.jsx","components/about.jsx","components/content.jsx","partials/drawerList.jsx","App.js","serviceWorker.js","index.js"],"names":["module","exports","ThresholdeSlider","props","getText","value","state","bind","style","position","marginTop","width","top","display","justifyContent","Typography","textAlign","fontWeight","variant","color","this","middleText","OrangeSlider","valueLabelDisplay","valueLabelFormat","aria-label","defaultValue","onChange","onChangeCommitted","BlackSlider","Component","withStyles","root","height","padding","thumb","backgroundColor","border","marginLeft","boxShadow","active","valueLabel","left","track","borderRadius","rail","opacity","Slider","ThresholdInput","component","className","Input","multiplier","toFixed","endAdornment","InputAdornment","inputProps","step","min","max","type","fontSize","ThresholdPerformance","chartPerformanceRef","React","createRef","getBoxHeight","getWidthHeightRatio","getMargin","getWidth","drawChart","redrawChart","threshold","current","parentElement","offsetWidth","right","bottom","inBetween","resizedFn","setState","window","addEventListener","clearTimeout","setTimeout","d3","remove","performance_data","currentDamaging","damaging","dataCollection","map","d","Math","round","damaging_accuracy","faith_accuracy","damaging_fpr","faith_fpr","damaging_fnr","faith_fnr","margin","eachHeight","svg","append","attr","getPerformanceColor","perform","getStrokeColor","preValue","currentValue","forEach","data","index","currentThreshold","x","domain","nice","range","y","getY","xAxis","g","call","tickSize","getXAxis","line","defined","isNaN","area","x1","x2","number","y0","y1","datum","filter","getAreaColor","text","ticks","message","opposite","verticalAlign","ref","flexDirection","marginBottom","Circle","size","cx","cy","r","fill","Cross","y2","stroke","strokeWidth","TypeToggle","Grid","item","xs","gridSize","Box","ToggleButtonGroup","exclusive","ToggleButton","getDiff","id","ValidateIPaddress","a","ipaddress","test","cors","api","articleInfo","diffInfo","axios","get","then","res","page","query","pages","Object","keys","rev","revisions","time","Date","timestamp","title","user","toLocaleTimeString","toLocaleDateString","undefined","weekday","year","month","day","comment","err","compare","loadDiff","parent","group","div","boolean","correct","predType","predict","col","grey","description","icon","ReactDOMServer","renderToString","console","log","html","on","trueStatement","falseStatement","tempContent","head","rev_id","newcomer","anonymous","topOffset","tooltipHeight","Number","parseInt","ThresholdExplorer","onSliderChange","event","onTextChange","target","onTypeChange","chartRef","widthHeightRatio","graph1Scale","dotWidth","sliderRange","sliderRight","diameter","dd","circles","xvalue","parseFloat","confidence_damage","confidence_faith","ceil","damaging_label","faith_label","label","sort","b","ca","prev","cnt","abs","category","dodge","customCross","draw","context","s","sqrt","w","moveTo","lineTo","closePath","thresholdText","selectAll","join","diff","Fragment","container","spacing","key","paddingTop","getClickTip","href","rel","Chart","change","data_balanced","goodfaith","edit_years","slice","nextProps","nextState","performanceData","getPerformance","TP","TN","FP","FN","GroupCompareVisualizer","acc","fpr","fnr","defaultPerformance","getWholePerformance","drawPerformanceChart","compareChartRef","comparePerformanceRef","wholePerformanceRef","getPerformanceWidth","getPerformanceForThreshold","performanceWidth","group1Color","group2Color","wholePerformance","groupOnePerformance","groupTwoPerformance","performanceHeight","blockHeight","chartHeight","offsetHeight","groupOneData","groupTwoData","groupOneFP","length","groupOneTP","groupOneFN","groupOneTN","groupTwoFP","groupTwoTP","groupTwoFN","groupTwoTN","groupOne","groupTwo","all","getPerformanceHeight","performance","groupOnePerf","groupTwoPerf","allPerf","vizHeight","drawPerformance","currentPerformance","larger","groupNumber","largerPerformance","actualx","tooltipx","tooltipy","tooltipHalfWidth","groupOneHeight","groupTwoHeight","groupOneCurrentPerformance","groupTwoCurrentPerformance","largerPercentage","groupSize","getSymbolColor","fp","tp","fn","tn","dots","dot","cat","push","dotData","sum","children","sliceNumber","centerX","centerY","pow","dotRadius","sortArr","getStatus","xStat","yStat","groupOneDots","groupTwoDots","offset","visualizationRef","transform","borderBottom","GroupCompareChart","anonData","loggedData","newcomerData","experiencedData","Metric","showDesc","val","accent","onMouseEnter","toggle","onMouseLeave","desc","Recommender","onThresChange","thres","diffs","getRec","minDiff","i","onRangeChange","getData","getObject","array","newArray","arrayIdx","elem","accuracy","f1","filter_rate","match_rate","precision","recall","damagingArray","enwiki","models","statistics","thresholds","true","goodfaithArray","damagingData","goodfaithData","recommendations","ranges","param","rec","Aggressive","Cautious","Balanced","j","prop","escape","getRecommendations","borderColor","paddingLeft","paddingBottom","borderLeft","paddingRight","LinearProgress","alignItems","orientation","subtitle","obj","disabled","marginRight","src","process","alt","placeholder","getProp","ExpansionPanel","ExpansionPanelSummary","ExpansionPanelDetails","wordWrap","fontFamily","FeatureInjector","onDamagingChange","onGoodfaithChange","onHighlightChange","adjSeconds","anon","curID","oldData","newData","score","positive","prediction","pie","arc","innerRadius","outerRadius","name","pieChartColor","mainColor","theDefault","replace","chart","arcs","class","md","borderRight","borderTop","marks","renderPieChart","About","getMainContent","colspan","cellSpacing","cellPadding","getPredTableItem","SectionHeader","styled","Section","MainContent","data_performance","path","sectionHeader","DrawerList","selected","clickSection","List","to","ListItem","klass","button","onClick","theme","createMuiTheme","typography","subtitle1","subtitle2","textTransform","h6","body1","body2","fontStyle","h5","responsiveFontSizes","useStyles","makeStyles","appBar","drawer","flexShrink","drawerPaper","paper","list","textDecoration","toolbar","content","flexGrow","palette","background","default","App","classes","basename","ThemeProvider","Drawer","anchor","Paper","elevation","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.b270d5dd.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/data_not-balanced.2c5d8911.csv\";","module.exports = __webpack_public_path__ + \"static/media/data_balanced_1.718935bd.csv\";","module.exports = __webpack_public_path__ + \"static/media/performance.760a321c.csv\";","import React, { Component } from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Slider from \"@material-ui/core/Slider\";\nimport Typography from \"@material-ui/core/Typography\";\n\nclass ThresholdeSlider extends Component {\n  constructor(props) {\n    super(props);\n    this.getText = this.getText.bind(this);\n  }\n\n  getText = (value) => {\n    return `${value}%`;\n  };\n\n  state = {};\n  render() {\n    return (\n      <div style={{ position: \"relative\", marginTop: \"5px\" }}>\n        <div\n          style={{\n            position: \"absolute\",\n            width: \"100%\",\n            top: \"10px\",\n            display: \"flex\",\n            justifyContent: \"space-between\",\n          }}\n        >\n          <Typography\n            style={{\n              textAlign: \"left\",\n              fontWeight: \"bold\",\n            }}\n          >\n            {[<span>&#9664;</span>, \" Identify More\"]}\n          </Typography>\n\n          <Typography\n            variant=\"body2\"\n            style={{ color: \"gray\", textAlign: \"center\" }}\n          >\n            {this.props.middleText != null ? this.props.middleText() : null}\n          </Typography>\n\n          <Typography style={{ textAlign: \"right\", fontWeight: \"bold\" }}>\n            {[\"Identify Less \", <span>&#9654;</span>]}\n          </Typography>\n        </div>\n        <div>\n          {this.props.color === \"orange\" ? (\n            <OrangeSlider\n              value={this.props.value}\n              valueLabelDisplay=\"auto\"\n              valueLabelFormat={this.getText}\n              aria-label=\"pretto slider\"\n              defaultValue={this.props.defaultValue}\n              onChange={this.props.onChangeCommitted}\n              onChangeCommitted={this.props.onChangeCommitted}\n            />\n          ) : (\n            <BlackSlider\n              value={this.props.value}\n              valueLabelDisplay=\"auto\"\n              valueLabelFormat={this.getText}\n              aria-label=\"pretto slider\"\n              defaultValue={this.props.defaultValue}\n              onChange={this.props.onChangeCommitted}\n              onChangeCommitted={this.props.onChangeCommitted}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ThresholdeSlider;\n\nconst OrangeSlider = withStyles({\n  root: {\n    color: \"#C57619\",\n    height: 10,\n    marginTop: \"50px\",\n    padding: \"0px\",\n  },\n  thumb: {\n    height: 18,\n    width: 18,\n    backgroundColor: \"#fff\",\n    border: \"2px solid currentColor\",\n    marginTop: -8,\n    marginLeft: -9,\n    \"&:focus, &:hover, &$active\": {\n      boxShadow: \"inherit\",\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: \"calc(-50%+12px)\",\n    fontWeight: \"bold\",\n  },\n  track: {\n    height: 4,\n    borderRadius: 4,\n    color: \"#909090\",\n  },\n  rail: {\n    height: 4,\n    borderRadius: 4,\n    color: \"#C57619\",\n    opacity: \"100%\",\n  },\n})(Slider);\n\nconst BlackSlider = withStyles({\n  root: {\n    color: \"#000000\",\n    height: 10,\n    marginTop: \"50px\",\n    padding: \"0px\",\n  },\n  thumb: {\n    height: 18,\n    width: 18,\n    backgroundColor: \"#fff\",\n    border: \"2px solid currentColor\",\n    marginTop: -8,\n    marginLeft: -9,\n    \"&:focus, &:hover, &$active\": {\n      boxShadow: \"inherit\",\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: \"calc(-50%+12px)\",\n    fontWeight: \"bold\",\n  },\n  track: {\n    height: 4,\n    borderRadius: 4,\n    color: \"#909090\",\n  },\n  rail: {\n    height: 4,\n    borderRadius: 4,\n    color: \"#000000\",\n    opacity: \"100%\",\n  },\n})(Slider);\n","import React, { Component } from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport InputBase from \"@material-ui/core/Input\";\n\nclass ThresholdInput extends Component {\n  render() {\n    return (\n      <Typography component=\"div\" variant=\"h6\" className=\"text\">\n        <InputBase\n          value={(this.props.value * this.props.multiplier).toFixed(0)}\n          onChange={this.props.onChange}\n          endAdornment={\n            <InputAdornment position=\"end\">\n              <Typography\n                variant=\"h6\"\n                className=\"text\"\n                style={{ fontWeight: 600 }}\n              >\n                %\n              </Typography>\n            </InputAdornment>\n          }\n          inputProps={{ step: 1, min: 0, max: 100, type: \"number\" }}\n          style={{ fontSize: 20, width: 80, fontWeight: 600 }}\n        />\n      </Typography>\n    );\n  }\n}\n\nexport default ThresholdInput;\n","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport Typography from \"@material-ui/core/Typography\";\n\nclass ThresholdPerformance extends Component {\n  constructor(props) {\n    super(props);\n    this.chartPerformanceRef = React.createRef();\n    this.getBoxHeight = this.getBoxHeight.bind(this);\n    this.getWidthHeightRatio = this.getWidthHeightRatio.bind(this);\n    this.getMargin = this.getMargin.bind(this);\n    this.getWidth = this.getWidth.bind(this);\n    this.drawChart = this.drawChart.bind(this);\n    this.redrawChart = this.redrawChart.bind(this);\n    this.state = { threshold: 80, width: 1000, height: 1000 };\n  }\n\n  getWidthHeightRatio() {\n    return 2.4;\n  }\n\n  getWidth() {\n    if (this.chartPerformanceRef.current == null) {\n      return this.state.width;\n    } else {\n      return this.chartPerformanceRef.current.parentElement.offsetWidth;\n    }\n  }\n\n  getMargin() {\n    return {\n      top: 30,\n      right: 5,\n      bottom: 20,\n      left: 30,\n      inBetween: this.state.width * 0.2,\n    };\n  }\n\n  componentDidMount() {\n    let width = this.getWidth();\n    let height = width * this.getWidthHeightRatio();\n\n    this.setState(\n      {\n        width: width,\n        height: height,\n      },\n      () => {\n        this.drawChart();\n      }\n    );\n\n    let resizedFn;\n    window.addEventListener(\"resize\", () => {\n      clearTimeout(resizedFn);\n      resizedFn = setTimeout(() => {\n        this.redrawChart();\n      }, 200);\n    });\n  }\n\n  redrawChart() {\n    let width = this.getWidth();\n    this.setState({ width: width, height: width * this.getWidthHeightRatio() });\n    d3.select(\".performanceChart svg\").remove();\n    this.drawChart = this.drawChart.bind(this);\n    this.drawChart();\n  }\n\n  drawChart() {\n    if (this.props.performance_data != null) {\n      const currentDamaging = this.props.damaging;\n      const dataAccuracy = this.props.performance_data.map((d) => ({\n        threshold: d.threshold,\n        value: Math.round(\n          (currentDamaging ? d.damaging_accuracy : d.faith_accuracy) * 100\n        ),\n      }));\n\n      const dataFPR = this.props.performance_data.map((d) => ({\n        threshold: d.threshold,\n        value: Math.round(\n          (currentDamaging ? d.damaging_fpr : d.faith_fpr) * 100\n        ),\n      }));\n\n      const dataFNR = this.props.performance_data.map((d) => ({\n        threshold: d.threshold,\n        value: Math.round(\n          (currentDamaging ? d.damaging_fnr : d.faith_fnr) * 100\n        ),\n      }));\n\n      const dataCollection = [dataAccuracy, dataFPR, dataFNR];\n\n      const margin = this.getMargin();\n      let width = this.state.width - margin.left - margin.right;\n      let height = this.state.height - margin.top - margin.bottom;\n      let eachHeight = (height - margin.inBetween * 2) / 3;\n\n      const betweenThreshold = (x1, x2, number) => {\n        return (number >= x1 && number <= x2) || (number <= x1 && number >= x2);\n      };\n\n      //   const xAxis = g =>\n      //     g\n      //       .attr ('transform', `translate(0,${height / 2})`)\n      //       .call (d3.axisBottom (x).ticks (width / 80).tickSizeOuter (0));\n\n      const getXAxis = (x, type) => {\n        switch (type) {\n          case 0:\n            return function (g) {\n              g.attr(\"transform\", `translate(0,${eachHeight + margin.top})`)\n                .attr(\"class\", \"axisGreyY\")\n                .call(d3.axisBottom(x).tickSize(0));\n            };\n          case 1:\n            return function (g) {\n              g.attr(\n                \"transform\",\n                `translate(0,${eachHeight * 2 + margin.inBetween + margin.top})`\n              )\n                .attr(\"class\", \"axisGreyY\")\n                .call(d3.axisBottom(x).tickSize(0));\n            };\n          default:\n            return function (g) {\n              g.attr(\"transform\", `translate(0,${height + margin.top})`)\n                .attr(\"class\", \"axisGreyY\")\n                .call(d3.axisBottom(x).tickSize(0));\n            };\n        }\n      };\n\n      //   const y = d3\n      //     .scaleLinear ()\n      //     .domain ([0, d3.max (data, d => d.value)])\n      //     .nice ()\n      //     .range ([height / 2, margin.top]);\n\n      const getY = (type) => {\n        switch (type) {\n          case 0:\n            return d3\n              .scaleLinear()\n              .domain([0, d3.max(dataCollection[0], (d) => d.value)])\n              .nice()\n              .range([eachHeight + margin.top, margin.top]);\n          case 1:\n            return d3\n              .scaleLinear()\n              .domain([0, d3.max(dataCollection[1], (d) => d.value)])\n              .nice()\n              .range([\n                eachHeight * 2 + margin.inBetween + margin.top,\n                eachHeight + margin.inBetween + margin.top,\n              ]);\n          default:\n            return d3\n              .scaleLinear()\n              .domain([0, d3.max(dataCollection[2], (d) => d.value)])\n              .nice()\n              .range([\n                height + margin.top,\n                eachHeight * 2 + margin.inBetween * 2 + margin.top,\n              ]);\n        }\n      };\n\n      let svg = d3\n        .select(\".performanceChart\")\n        .append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom);\n\n      const getPerformanceColor = (type, perform) => {\n        if (type === \"stroke\") {\n          //color for stroke\n          if (perform === 1) {\n            return d3.color(\"#159256\");\n          } else if (perform === 0) {\n            return d3.color(\"#878787\");\n          } else {\n            return d3.color(\"#921515\");\n          }\n        } else {\n          //color for area\n          if (perform === 1) {\n            return d3.color(\"#F0F7F4\");\n          } else if (perform === 0) {\n            return d3.color(\"#E8E8E8\");\n          } else {\n            return d3.color(\"#F7F0F0\");\n          }\n        }\n      };\n\n      const getAreaColor = (type, preValue, currentValue) => {\n        if (type === 0) {\n          //accuracy -> the higher the better\n          if (preValue < currentValue) {\n            //green\n            return getPerformanceColor(\"area\", 1);\n          } else if (preValue > currentValue) {\n            //red\n            return getPerformanceColor(\"area\", -1);\n          } else {\n            return getPerformanceColor(\"area\", 0);\n          }\n        } else {\n          //FPR, FNR -> the lower the better\n          if (preValue < currentValue) {\n            //green\n            return getPerformanceColor(\"area\", -1);\n          } else if (preValue > currentValue) {\n            //red\n            return getPerformanceColor(\"area\", 1);\n          } else {\n            return getPerformanceColor(\"area\", 0);\n          }\n        }\n      };\n\n      const getStrokeColor = (type, preValue, currentValue) => {\n        if (type === 0) {\n          //accuracy -> the higher the better\n          if (preValue < currentValue) {\n            //green\n            return getPerformanceColor(\"stroke\", 1);\n          } else if (preValue > currentValue) {\n            //red\n            return getPerformanceColor(\"stroke\", -1);\n          } else {\n            return getPerformanceColor(\"stroke\", 0);\n          }\n        } else {\n          //FPR, FNR -> the lower the better\n          if (preValue < currentValue) {\n            //green\n            return getPerformanceColor(\"stroke\", -1);\n          } else if (preValue > currentValue) {\n            //red\n            return getPerformanceColor(\"stroke\", 1);\n          } else {\n            return getPerformanceColor(\"stroke\", 0);\n          }\n        }\n      };\n\n      dataCollection.forEach((data, index) => {\n        const defaultValue = data[50].value;\n        const currentValue = data[this.props.threshold].value;\n        const currentThreshold = this.props.threshold;\n        const x = d3\n          .scaleLinear()\n          .domain([0, d3.max(data, (d) => d.threshold)])\n          .nice()\n          .range([margin.left, width - margin.right]);\n\n        const y = getY(index);\n        const xAxis = getXAxis(x, index);\n\n        const yAxis = (g) =>\n          g\n            .attr(\"transform\", `translate(${margin.left},0)`)\n            .attr(\"class\", \"axisGrey\")\n            .call(d3.axisLeft(y).ticks(2));\n\n        const line = d3\n          .line()\n          .defined((d) => !isNaN(d.value))\n          .x((d) => x(d.threshold))\n          .y((d) => y(d.value));\n\n        const area = d3\n          .area()\n          .defined((d) =>\n            betweenThreshold(0.5, currentThreshold * 0.01, d.threshold)\n          )\n          .x((d) => x(d.threshold))\n          .y0(y(0))\n          .y1((d) => y(d.value));\n\n        svg\n          .append(\"path\")\n          .datum(data.filter(area.defined()))\n          .attr(\"fill\", getAreaColor(index, defaultValue, currentValue))\n          .attr(\"d\", area);\n\n        svg\n          .append(\"path\")\n          .datum(data)\n          .attr(\"fill\", \"none\")\n          .attr(\"stroke\", \"grey\")\n          .attr(\"stroke-width\", 1.5)\n          .attr(\"stroke-linejoin\", \"round\")\n          .attr(\"stroke-linecap\", \"round\")\n          .attr(\"d\", line);\n\n        svg\n          .append(\"line\")\n          .attr(\"x1\", x(currentThreshold * 0.01))\n          .attr(\"y1\", y(currentValue))\n          .attr(\"x2\", x(currentThreshold * 0.01))\n          .attr(\n            \"y2\",\n            margin.top + index * margin.inBetween + (index + 1) * eachHeight\n          )\n          .attr(\"stroke-width\", 2)\n          .attr(\"stroke\", getStrokeColor(index, defaultValue, currentValue))\n          .style(\"stroke-dasharray\", \"5,5\");\n\n        svg\n          .append(\"line\")\n          .attr(\"x1\", x(50 * 0.01))\n          .attr(\"y1\", y(defaultValue))\n          .attr(\"x2\", x(50 * 0.01))\n          .attr(\n            \"y2\",\n            margin.top + index * margin.inBetween + (index + 1) * eachHeight\n          )\n          .attr(\"stroke-width\", 2)\n          .attr(\"stroke\", d3.color(\"#D2D2D2\"));\n\n        svg\n          .append(\"text\")\n          .attr(\"x\", x(currentThreshold * 0.01))\n          .attr(\"y\", y(currentValue + 8))\n          .attr(\"text-anchor\", \"middle\")\n          .text(`${currentValue}%`)\n          .attr(\"font-size\", \"20px\")\n          .attr(\"font-weight\", \"600\")\n          .attr(\"fill\", getStrokeColor(index, defaultValue, currentValue));\n\n        svg.append(\"g\").call(xAxis);\n        svg.append(\"g\").call(yAxis);\n      });\n    }\n  }\n\n  getBoxHeight() {\n    const margin = this.getMargin();\n    return (\n      (this.state.height - margin.top - margin.bottom - margin.inBetween * 2) /\n      3\n    );\n  }\n\n  render() {\n    const message = this.props.damaging ? \"damaging\" : \"good faith\";\n    const opposite = this.props.damaging ? \"good\" : \"bad faith\";\n    return (\n      <div style={{ marginTop: \"0px\" }}>\n        <div\n          style={{\n            width: \"50%\",\n            display: \"inline-block\",\n            verticalAlign: \"top\",\n          }}\n        >\n          <div\n            style={{ marginTop: \"20px\" }}\n            className=\"performanceChart\"\n            ref={this.chartPerformanceRef}\n          />\n        </div>\n        <div\n          style={{\n            width: \"50%\",\n            display: \"inline-block\",\n            verticalAlign: \"top\",\n          }}\n        >\n          <div\n            style={{\n              height: `${this.getBoxHeight()}px`,\n              padding: \"0% 5%\",\n              display: \"flex\",\n              flexDirection: \"column\",\n              justifyContent: \"center\",\n              marginTop: `${this.getMargin().top + 20}px`,\n              marginBottom: `${this.getMargin().inBetween}px`,\n            }}\n          >\n            <div>\n              <Typography variant=\"h6\" textAlign=\"center\">\n                Accuracy{\" \"}\n              </Typography>\n              <Typography variant=\"body2\">\n                Correctly predicted edits out of all edits{\" \"}\n              </Typography>\n            </div>\n          </div>\n\n          <div\n            style={{\n              height: `${this.getBoxHeight()}px`,\n              padding: \"0% 5%\",\n              display: \"flex\",\n              flexDirection: \"column\",\n              justifyContent: \"center\",\n              marginBottom: `${this.getMargin().inBetween}px`,\n            }}\n          >\n            <div>\n              <Typography variant=\"h6\" textAlign=\"center\">\n                False Positive Rate\n              </Typography>\n              <Typography variant=\"body2\">\n                Percentage of {opposite} edits that are falsely identified as{\" \"}\n                {message}{\" \"}\n              </Typography>\n            </div>\n          </div>\n\n          <div\n            style={{\n              height: `${this.getBoxHeight()}px`,\n              padding: \"0% 5%\",\n              display: \"flex\",\n              flexDirection: \"column\",\n              justifyContent: \"center\",\n            }}\n          >\n            <div>\n              <Typography variant=\"h6\" textAlign=\"center\">\n                False Negative Rate\n              </Typography>\n              <Typography variant=\"body2\">\n                Percentage of {message} edits that wont be identified{\" \"}\n              </Typography>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ThresholdPerformance;\n","import React, { Component } from \"react\";\nclass Circle extends Component {\n  state = {};\n  render() {\n    const size = this.props.size / 2;\n    return (\n      <svg height={size * 2} width={size * 2}>\n        <circle cx={size} cy={size} r={size} fill={this.props.color} />\n      </svg>\n    );\n  }\n}\n\nexport class Cross extends Component {\n  state = {};\n  render() {\n    const size = this.props.size;\n    return (\n      <svg height={size} width={size}>\n        <line\n          x1=\"0\"\n          y1=\"0\"\n          x2={size}\n          y2={size}\n          stroke={this.props.color}\n          strokeWidth={2}\n        />\n        <line\n          x1=\"0\"\n          y1={size}\n          x2={size}\n          y2=\"0\"\n          stroke={this.props.color}\n          strokeWidth={2}\n        />\n      </svg>\n    );\n  }\n}\n\nexport default Circle;\n","import React, { Component } from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { ToggleButtonGroup, ToggleButton } from \"@material-ui/lab\";\nimport Box from \"@material-ui/core/Box\";\nimport Grid from \"@material-ui/core/Grid\";\n\nclass TypeToggle extends Component {\n  render() {\n    return (\n      <Grid item xs={this.props.gridSize} className=\"modelOptions\">\n        <Typography component=\"div\" variant=\"subtitle2\">\n          <Box>MODEL OPTIONS</Box>\n        </Typography>\n        <ToggleButtonGroup\n          exclusive\n          value={this.props.damaging}\n          onChange={this.props.onChange}\n          className=\"options\"\n        >\n          <Typography\n            component={ToggleButton}\n            value={true}\n            variant=\"h6\"\n            className=\"text\"\n          >\n            Damaging Model\n          </Typography>\n          <Typography\n            value={false}\n            component={ToggleButton}\n            variant=\"h6\"\n            className=\"text\"\n          >\n            GoodFaith Model\n          </Typography>\n        </ToggleButtonGroup>\n      </Grid>\n    );\n  }\n}\n\nexport default TypeToggle;\n","import * as d3 from \"d3\";\nimport axios from \"axios\";\nimport ReactDOMServer from \"react-dom/server\";\nimport React from \"react\";\nimport Circle, { Cross } from \"./shape\";\n\nasync function getDiff(id) {\n  var cors = \"https://cors-anywhere.herokuapp.com/\";\n  var api = \"https://en.wikipedia.org/w/api.php\";\n  var articleInfo = \"\";\n  var diffInfo = \"\";\n\n  function ValidateIPaddress(ipaddress) {\n    return /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(\n      ipaddress\n    );\n  }\n\n  await axios\n    .get(\n      cors + api + \"?format=json&action=query&revids=\" + id + \"&prop=revisions\"\n    )\n    .then(\n      (res) => {\n        const page = res.data.query.pages[Object.keys(res.data.query.pages)[0]];\n        const rev = page.revisions[0];\n        const time = new Date(rev.timestamp);\n\n        articleInfo =\n          \"<strong>Article Title: </strong>\" +\n          page.title +\n          \"<h5>Edited by \" +\n          (ValidateIPaddress(rev.user) ? \"Anonymous\" : rev.user) +\n          \" at \" +\n          time.toLocaleTimeString() +\n          \" on \" +\n          time.toLocaleDateString(undefined, {\n            weekday: \"long\",\n            year: \"numeric\",\n            month: \"long\",\n            day: \"numeric\",\n          }) +\n          \"</h5>\\n\";\n\n        if (rev.comment !== \"\") {\n          articleInfo =\n            articleInfo +\n            \"<strong>Comment from editor: </strong><p>\" +\n            rev.comment +\n            \"</p>\";\n        }\n      },\n      (err) => {}\n    );\n\n  await axios\n    .get(\n      cors +\n        api +\n        \"?&action=compare&torelative=prev&prop=diff&fromrev=\" +\n        id +\n        \"&format=json\"\n    )\n    .then(\n      (res) => {\n        diffInfo =\n          \"<table>\" +\n          \"<tr class='header'><td class='before' colspan='2'>Before</td><td class='after' colspan='2'>After</td></tr>\" +\n          res.data.compare[\"*\"] +\n          \"</table>\";\n      },\n      (err) => {}\n    );\n\n  if (articleInfo !== \"\" || diffInfo !== \"\")\n    return \"<div class='apirow'>\" + articleInfo + diffInfo + \"</div>\";\n\n  return \"\";\n}\n\nexport function loadDiff(\n  d,\n  damaging,\n  x,\n  margin,\n  height,\n  parent,\n  type = 0,\n  group = 0\n) {\n  var div = d3.select(parent).append(\"div\").attr(\"class\", \"tooltip\");\n\n  if (type === 1) {\n    const message = damaging ? \"damaging\" : \"good faith\";\n    const opposite = damaging ? \"good\" : \"bad faith\";\n    const boolean = d.correct ? \"True\" : \"False\";\n    const predType = boolean + (d.predict ? \" Positive\" : \" Negative\");\n    const col = group === 1 ? \"#3777a5\" : \"#C57619\";\n    const grey = \"#909090\";\n\n    let description = \"This was a\";\n    if (predType === \"True Negative\")\n      description =\n        description + \" correctly classified \" + opposite + \" edit.\";\n    if (predType === \"False Negative\")\n      description = description + \"n uncaught \" + message + \" edit\";\n    if (predType === \"True Positive\")\n      description = description + \" correctly classified \" + message + \" edit.\";\n    if (predType === \"False Positive\")\n      description = description + \" mis-classified \" + opposite + \" edit.\";\n\n    var icon = \"\";\n    if (predType === \"True Negative\")\n      icon = ReactDOMServer.renderToString(<Circle size={10} color={grey} />);\n    if (predType === \"False Negative\")\n      icon = ReactDOMServer.renderToString(<Cross size={10} color={grey} />);\n    if (predType === \"True Positive\")\n      icon = ReactDOMServer.renderToString(<Circle size={10} color={col} />);\n    if (predType === \"False Positive\")\n      icon = ReactDOMServer.renderToString(<Cross size={10} color={col} />);\n\n    console.log(icon);\n\n    div\n      .attr(\"class\", \"tooltip small\")\n      .style(\"width\", \"200px\")\n      .html(\n        \"<div class='main'><div style='margin-top:0px; display:inline;'>\" +\n          icon +\n          \"<strong>\" +\n          predType +\n          \"</strong></div><div>\" +\n          description +\n          '</div><em style=\"font-weight:600; margin-bottom:0px;\">Click for more details about the edit.</em></div>'\n      )\n      .on(\"click\", () => loadDiff(d, damaging, x, margin, height, parent, 0));\n  } else {\n    const trueStatement = damaging ? \"damaging\" : \"in good faith\";\n    const falseStatement = damaging ? \"not damaging\" : \"in bad faith\";\n    var tempContent =\n      \"<div class='apirow'><strong>Loading...</strong><progress/></div>\";\n    var head =\n      '<div class=\"main\"><strong>Revision ID: </strong><a href=\"https://en.wikipedia.org/w/index.php?title=&diff=prev&oldid=' +\n      d.rev_id +\n      '\" target=\"_blank\">' +\n      d.rev_id +\n      \"</a><div class='row'>\" +\n      \"\\n<div><strong>Prediction: </strong>\" +\n      (d.predict ? trueStatement : falseStatement) +\n      \"</div>\\n<div><strong>Actual: </strong>\" +\n      (d.predict === d.correct ? trueStatement : falseStatement) +\n      '</div></div><div class=\"row\"><div style=\"width: 100%;\"><strong>User Info: </strong>' +\n      (d.newcomer ? \"Newcomer\" : \"Experienced\") +\n      \" and \" +\n      (d.anonymous ? \"Anonymous\" : \"Logged-In\") +\n      \"</div>\\n</div></div>\\n\";\n\n    getDiff(d.rev_id).then((res) => div.html(head + res));\n    div.html(head + tempContent);\n  }\n\n  div.style(\"position\", \"absolute\").style(\"left\", x(d.x) + \"px\");\n  let topOffset = d.y + margin.top;\n  let tooltipHeight = Number.parseInt(div.style(\"height\"));\n  if (topOffset + tooltipHeight > height + 100)\n    topOffset = topOffset - tooltipHeight;\n  div.style(\"top\", topOffset + \"px\");\n}\n\nexport default loadDiff;\n","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport ThresholdSlider from \"../../partials/slider\";\nimport ThresholdInput from \"../../partials/thresholdInput\";\nimport ThresholdPerformance from \"./threshold_performance\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Circle, { Cross } from \"../../partials/shape\";\nimport TypeToggle from \"../../partials/typeToggle\";\nimport diff from \"../../partials/diff\";\n\nclass ThresholdExplorer extends Component {\n  constructor(props) {\n    super(props);\n    this.chartRef = React.createRef();\n    this.getWidth = this.getWidth.bind(this);\n    this.drawChart = this.drawChart.bind(this);\n    this.redrawChart = this.redrawChart.bind(this);\n    this.state = {\n      threshold: 60,\n      width: 1000,\n      height: 1000,\n      widthHeightRatio: 0.8,\n      graph1Scale: 1,\n      dotWidth: 0,\n      sliderRange: [20, 1000],\n      damaging: true,\n    };\n  }\n\n  getWidth() {\n    if (this.chartRef.current == null) {\n      return this.state.width;\n    } else {\n      return this.chartRef.current.parentElement.offsetWidth;\n    }\n  }\n\n  onSliderChange = (event, threshold) => {\n    this.setState({ threshold: threshold });\n    d3.select(\".rowChart svg\").remove();\n    this.drawChart = this.drawChart.bind(this);\n    this.drawChart();\n  };\n\n  onTextChange = (event) => {\n    if (event.target.value !== \"\") {\n      this.state.threshold = event.target.value;\n      this.setState({ threshold: event.target.value });\n      d3.select(\".rowChart svg\").remove();\n      this.drawChart = this.drawChart.bind(this);\n      this.drawChart();\n    }\n  };\n\n  onTypeChange = (event, type) => {\n    if (type != null) {\n      this.setState({ damaging: type });\n      this.state.damaging = type;\n      d3.select(\".rowChart svg\").remove();\n      this.drawChart = this.drawChart.bind(this);\n      this.drawChart();\n    }\n  };\n\n  componentDidMount() {\n    let width = this.getWidth();\n    let height = width * 0.8;\n    let sliderRight = width - 30;\n\n    this.setState(\n      {\n        width: width,\n        height: height,\n        sliderRange: [10, sliderRight],\n        damaging: true,\n      },\n      () => {\n        this.drawChart();\n      }\n    );\n\n    let resizedFn;\n    window.addEventListener(\"resize\", () => {\n      clearTimeout(resizedFn);\n      resizedFn = setTimeout(() => {\n        this.redrawChart();\n      }, 200);\n    });\n  }\n\n  redrawChart() {\n    let width = this.getWidth();\n    let sliderRight = width - 30;\n    this.setState({\n      width: width,\n      height: width * 0.8,\n      sliderRange: [10, sliderRight],\n      damaging: this.state.damaging,\n    });\n    d3.select(\".rowChart svg\").remove();\n    this.drawChart = this.drawChart.bind(this);\n    this.drawChart();\n  }\n\n  drawChart() {\n    const margin = { top: 0, right: 30, bottom: 30, left: 10 };\n    let width = this.state.width - margin.left - margin.right;\n    let height = this.state.height - margin.top - margin.bottom;\n    // append the svg object to the body of the page\n    let svg = d3\n      .select(\".rowChart\")\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom);\n\n    const threshold = this.state.threshold / 100;\n    const damaging = this.state.damaging;\n    const graph1Scale = 1;\n\n    const diameter = (width * graph1Scale) / 50;\n    const dotWidth = diameter * 0.5;\n    if (this.props.data != null) {\n      const dd = dodge(\n        threshold,\n        this.props.data,\n        diameter,\n        this.state.damaging\n      );\n\n      //   const xAxis = (g) =>\n      //     g\n      //       .attr(\"transform\", `translate(0,${margin.top})`)\n      //       .call(d3.axisTop(x).ticks(0));\n\n      const x = d3\n        .scaleLinear()\n        .domain([0, 1])\n        .nice()\n        .range([margin.left, width + margin.left]);\n\n      // const shape = d3.scaleOrdinal (\n      //   dd.map (d => d.category),\n      //   d3.symbols.map (s =>\n      //     d3.symbol ().size (diameter * diameter * 0.4).type (s) ()\n      //   )\n      // );\n\n      function dodge(threshold, data, diameter, damaging) {\n        const circles = data\n          .map((d) => ({\n            rev_id: d.rev_id,\n            anonymous: d.anonymous,\n            newcomer: d.newcomer,\n            xvalue: parseFloat(\n              damaging ? d.confidence_damage : d.confidence_faith\n            ).toFixed(2),\n            x:\n              0.02 *\n              Math.ceil(\n                parseFloat(\n                  damaging ? d.confidence_damage : d.confidence_faith\n                ).toFixed(2) * 50\n              ),\n            correct:\n              parseFloat(\n                damaging ? d.confidence_damage : d.confidence_faith\n              ).toFixed(2) >=\n                threshold ===\n              damaging\n                ? d.damaging_label\n                : d.faith_label,\n            predict:\n              parseFloat(\n                damaging ? d.confidence_damage : d.confidence_faith\n              ).toFixed(2) >= threshold,\n            label: damaging ? d.damaging_label : d.faith_label,\n          }))\n          .sort(function (a, b) {\n            if (a.x === b.x) {\n              let ca = a.correct ? 1 : 0;\n              let cb = b.correct ? 1 : 0;\n              return cb - ca;\n            } else {\n              return b.x - a.x;\n            }\n          });\n        const epsilon = 1e-4;\n\n        let prev = 100;\n        let cnt = 1;\n\n        for (const b of circles) {\n          //determine the position of the dot\n          if (Math.abs(prev - b.x) < epsilon) {\n            // belongs to the same col\n            cnt += 1;\n            b.y = diameter * cnt;\n          } else {\n            prev = b.x;\n            cnt = 1;\n            b.y = diameter;\n          }\n\n          if (b.correct) {\n            b.category = 1;\n          } else {\n            b.category = 0;\n          }\n\n          if (b.predict) {\n            b.color = d3.color(\"#C57619\");\n          } else {\n            b.color = d3.color(\"#909090\");\n          }\n        }\n\n        return circles;\n      }\n\n      var customCross = {\n        draw: function (context, size) {\n          let s = Math.sqrt(size * 2) / 2;\n          let w = Math.sqrt(size) / 6;\n          context.moveTo(-s, w);\n          context.lineTo(s, w);\n          context.lineTo(s, -w);\n          context.lineTo(-s, -w);\n          context.closePath();\n          context.moveTo(w, s);\n          context.lineTo(w, -s);\n          context.lineTo(-w, -s);\n          context.lineTo(-w, s);\n          context.closePath();\n        },\n      };\n\n      svg\n        .append(\"line\")\n        .attr(\"x1\", width + margin.left - dotWidth * 100 * (1 - threshold))\n        .attr(\"y1\", margin.top)\n        .attr(\"x2\", width + margin.left - dotWidth * 100 * (1 - threshold))\n        .attr(\"y2\", height - 30)\n        .attr(\"stroke-width\", 2)\n        .attr(\"stroke\", \"black\")\n        .style(\"stroke-dasharray\", \"5,5\");\n\n      const thresholdText = threshold * 100 + \"%\";\n      svg\n        .append(\"text\")\n        .attr(\"x\", width + margin.left - dotWidth * 100 * (1 - threshold))\n        .attr(\"y\", height - 15)\n        .attr(\"text-anchor\", \"middle\")\n        .text(thresholdText)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"font-size\", \"15px\");\n\n      svg\n        .append(\"g\")\n        .selectAll(\"path\")\n        .data(dd)\n        .join(\"path\")\n        .attr(\n          \"transform\",\n          (d) => `translate(${x(d.x)},${d.y + margin.top}), rotate(45)`\n        )\n        .attr(\"fill\", (d) => d.color)\n        .style(\"cursor\", \"pointer\")\n        .attr(\n          \"d\",\n          d3\n            .symbol()\n            .type(function (d) {\n              if (d.category === 0) {\n                return customCross;\n              } else {\n                return d3.symbolCircle;\n              }\n            })\n            .size(diameter * diameter * 0.4)\n        )\n        .on(\"click\", (d) => diff(d, damaging, x, margin, height, \".rowChart\"))\n        .on(\"mouseover\", function (d) {\n          d3.select(\".rowChart div\").remove();\n          d3.select(\".rowChart .tooltip.small\").remove();\n          diff(d, damaging, x, margin, height, \".rowChart\", 1, 0);\n        })\n        .on(\"mouseout\", function (d) {\n          d3.select(\".rowChart .tooltip.small\").remove();\n        });\n    }\n  }\n\n  getClickTip() {\n    return (\n      <span>\n        <strong>TIP:</strong> Click on a revision (cross or circle) to view more\n        details.\n      </span>\n    );\n  }\n\n  render() {\n    const message = this.state.damaging ? \"damaging\" : \"good faith\";\n    const opposite = this.state.damaging ? \"good\" : \"bad faith\";\n    return (\n      <React.Fragment>\n        <div\n          style={{\n            width: \"55%\",\n            display: \"inline-block\",\n            verticalAlign: \"top\",\n            position: \"relative\",\n          }}\n        >\n          <div className=\"upperSettings\">\n            <Grid container spacing={0}>\n              <TypeToggle\n                damaging={this.state.damaging}\n                onChange={this.onTypeChange}\n                gridSize={9}\n                key={this.state.damaging}\n              />\n              <Grid item xs={3} className=\"threshold\">\n                <div className=\"innerBox\">\n                  <Typography variant=\"subtitle2\">threshold</Typography>\n\n                  <Grid container spacing={2} className=\"options\">\n                    <Grid item xs={12} style={{ paddingTop: 0 }}>\n                      {/* <Typography component=\"div\" variant=\"h6\" className=\"text\">\n                        {this.state.threshold} %\n                      </Typography> */}\n                      <ThresholdInput\n                        value={this.state.threshold}\n                        multiplier={1}\n                        onChange={this.onTextChange}\n                      />\n                    </Grid>\n                  </Grid>\n                </div>\n              </Grid>\n            </Grid>\n          </div>\n\n          <div\n            style={{\n              marginLeft: `${this.state.sliderRange[0]}px`,\n              width: `${\n                this.state.sliderRange[1] - this.state.sliderRange[0]\n              }px`,\n            }}\n          >\n            <Typography variant=\"subtitle2\">VISUALIZATION</Typography>\n            <ThresholdSlider\n              value={this.state.threshold}\n              middleText={this.getClickTip}\n              onChangeCommitted={this.onSliderChange}\n              color={\"orange\"}\n            />\n          </div>\n          <div\n            className=\"rowChart\"\n            ref={this.chartRef}\n            style={{ position: \"relative\" }}\n          />\n          <div className=\"legendCard\" id=\"explorerLegend\">\n            <Typography component=\"div\" variant=\"subtitle2\">\n              legend\n            </Typography>\n            <Grid container spacing={0} style={{ marginTop: \"10px\" }}>\n              <Grid item xs={12}>\n                <div className=\"legendMark\">\n                  <Circle size={12} color=\"#909090\" />{\" \"}\n                  <Typography component=\"span\" variant=\"body2\">\n                    Correctly classified {opposite} edits{\" \"}\n                    <strong style={{ color: \"#909090\", marginLeft: 20 }}>\n                      True Negative\n                    </strong>\n                  </Typography>\n                </div>\n              </Grid>\n              <Grid item xs={12}>\n                <div className=\"legendMark\">\n                  <Cross size={12} color=\"#909090\" />{\" \"}\n                  <Typography component=\"span\" variant=\"body2\">\n                    Uncaught {message} edits{\" \"}\n                    <strong style={{ color: \"#909090\", marginLeft: 20 }}>\n                      False Negative\n                    </strong>{\" \"}\n                  </Typography>\n                </div>\n              </Grid>\n              <Grid item xs={12}>\n                <div className=\"legendMark\">\n                  <Circle size={12} color=\"#C57619\" />{\" \"}\n                  <Typography component=\"span\" variant=\"body2\">\n                    Correctly classified {message} edits{\" \"}\n                    <strong style={{ color: \"#C57619\", marginLeft: 20 }}>\n                      True Positive\n                    </strong>\n                  </Typography>\n                </div>\n              </Grid>\n              <Grid item xs={12}>\n                <div className=\"legendMark\">\n                  <Cross size={12} color=\"#C57619\" />{\" \"}\n                  <Typography component=\"span\" variant=\"body2\">\n                    Mis-classified {opposite} edits{\" \"}\n                    <strong style={{ color: \"#C57619\", marginLeft: 20 }}>\n                      False Positive\n                    </strong>{\" \"}\n                  </Typography>\n                </div>\n              </Grid>\n            </Grid>\n          </div>\n        </div>\n\n        <div className=\"sidePanel\">\n          <Typography variant=\"subtitle2\">PERFORMANCE</Typography>\n          <div\n            className=\"legendCard\"\n            style={{\n              paddingTop: 10,\n              margin: 10,\n              marginTop: 20,\n              marginBottom: 0,\n              fontSize: 15,\n            }}\n          >\n            The graphs and chart on this page refer to ORES's predictions on a\n            set of sample data. You can learn more about the dataset{\" \"}\n            <a\n              href=\"\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              style={{ fontWeight: 600 }}\n            >\n              here\n            </a>\n            .\n          </div>\n          <ThresholdPerformance\n            performance_data={this.props.performance_data}\n            threshold={this.state.threshold}\n            key={[this.state.damaging, this.state.threshold]}\n            damaging={this.state.damaging}\n          />\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default ThresholdExplorer;\n","import React, { Component } from \"react\";\nimport ThresholdExplorer from \"./threshold_explorer\";\nimport * as d3 from \"d3\";\nimport data_balanced from \"../../data/data_not-balanced.csv\";\n\nclass Chart extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: null,\n      change: 0,\n    };\n  }\n\n  componentDidMount() {\n    d3.csv(data_balanced, (d) => {\n      return {\n        confidence_faith: +d.confidence_faith,\n        faith_label: d.goodfaith === \"True\" ? true : false,\n        confidence_damage: +d.confidence_damage,\n        damaging_label: d.damaging === \"True\" ? true : false,\n        rev_id: +d.rev_id,\n        anonymous: d.anonymous === \"True\" ? true : false,\n        newcomer: d.edit_years <= 8.0 ? true : false,\n      };\n    }).then((data) => {\n      this.setState({ data: data.slice(0, 2000) });\n      this.setState({ change: 2 });\n    });\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return true;\n  }\n\n  render() {\n    return (\n      <div style={{ display: \"flex\" }}>\n        {/* <Test data={this.state.data} key={this.state.change} /> */}\n        <ThresholdExplorer\n          data={this.state.data}\n          performance_data={this.props.performanceData}\n          key={this.state.change}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Chart;\n","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport dotData from \"../../data/new.json\";\nimport ThresholdSlider from \"../../partials/slider\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Circle, { Cross } from \"../../partials/shape\";\nimport TypeToggle from \"../../partials/typeToggle\";\nimport ThresholdInput from \"../../partials/thresholdInput\";\nimport diff from \"../../partials/diff\";\n\n// const getColor = (accuracy, defaultValue, currentValue) => {\n//   let perform = 1;\n//   if (accuracy) {\n//     if (defaultValue > currentValue) {\n//       perform = -1;\n//     } else if (defaultValue === currentValue) {\n//       perform = 0;\n//     } else {\n//       perform = 1;\n//     }\n//   } else {\n//     if (defaultValue > currentValue) {\n//       perform = 1;\n//     } else if (defaultValue === currentValue) {\n//       perform = 0;\n//     } else {\n//       perform = -1;\n//     }\n//   }\n//   //color for stroke\n//   if (perform === 1) {\n//     return d3.color(\"#159256\");\n//   } else if (perform === 0) {\n//     return d3.color(\"#878787\");\n//   } else {\n//     return d3.color(\"#921515\");\n//   }\n// };\n\nconst getPerformance = (data) => {\n  const TP = data[0],\n    TN = data[1],\n    FP = data[2],\n    FN = data[3];\n  //accuracy:\n  const acc = (TP + TN) / (TP + TN + FP + FN);\n  const fpr = FP / (FP + TN);\n  const fnr = FN / (FN + TP);\n  return [acc, fpr, fnr];\n};\n\nclass GroupCompareVisualizer extends Component {\n  constructor(props) {\n    super(props);\n    this.compareChartRef = React.createRef();\n    this.comparePerformanceRef = React.createRef();\n    this.wholePerformanceRef = React.createRef();\n    this.getMargin = this.getMargin.bind(this);\n    this.getWidth = this.getWidth.bind(this);\n    this.drawChart = this.drawChart.bind(this);\n    this.redrawChart = this.redrawChart.bind(this);\n    this.getWholePerformance = this.getWholePerformance.bind(this);\n    this.getPerformanceWidth = this.getPerformanceWidth.bind(this);\n    this.getPerformanceForThreshold = this.getPerformanceForThreshold.bind(\n      this\n    );\n    this.state = {\n      threshold: 60,\n      width: 1000,\n      height: 1000,\n      performanceWidth: 1000,\n      group1Color: \"#C57619\",\n      group2Color: \"#3777A5\",\n      sliderRange: [20, 1000],\n      wholePerformance: [0, 0, 0],\n      defaultPerformance: [0, 0, 0],\n      groupOnePerformance: null,\n      groupTwoPerformance: null,\n      damaging: true,\n    };\n  }\n\n  getMargin() {\n    const performanceHeight = this.state.performanceHeight;\n    const bottom = 50;\n    return {\n      top: 0,\n      right: 40,\n      bottom: bottom,\n      left: 20,\n      blockHeight: (performanceHeight - bottom) / 3,\n      chartHeight: (performanceHeight - bottom) / 12,\n    };\n  }\n\n  getWidth() {\n    if (this.compareChartRef.current === null) {\n      return this.state.width;\n    } else {\n      return this.compareChartRef.current.parentElement.offsetWidth;\n    }\n  }\n\n  getPerformanceWidth() {\n    if (this.comparePerformanceRef.current === null) {\n      return this.state.performanceWidth;\n    } else {\n      return this.comparePerformanceRef.current.parentElement.offsetWidth;\n    }\n  }\n\n  getPerformanceHeight() {\n    if (\n      this.wholePerformanceRef.current === null ||\n      this.compareChartRef.current === null\n    ) {\n      return this.state.performanceHeight;\n    } else {\n      return (\n        (this.compareChartRef.current.parentElement.offsetWidth - 60) * 0.5 +\n        300 -\n        this.wholePerformanceRef.current.offsetHeight\n      );\n    }\n  }\n\n  getPerformanceForThreshold() {\n    const threshold = this.state.threshold * 0.01;\n    const damaging = this.state.damaging;\n    if (this.props.groupOneData != null && this.props.groupTwoData != null) {\n      const groupOneFP = this.props.groupOneData.filter(function (d) {\n        return (\n          (damaging ? d.confidence_damage : d.confidence_faith) >= threshold &&\n          !(damaging ? d.damaging_label : d.faith_label)\n        );\n      }).length;\n\n      const groupOneTP = this.props.groupOneData.filter(function (d) {\n        return (\n          (damaging ? d.confidence_damage : d.confidence_faith) >= threshold &&\n          (damaging ? d.damaging_label : d.faith_label)\n        );\n      }).length;\n\n      const groupOneFN = this.props.groupOneData.filter(function (d) {\n        return (\n          (damaging ? d.confidence_damage : d.confidence_faith) < threshold &&\n          (damaging ? d.damaging_label : d.faith_label)\n        );\n      }).length;\n\n      const groupOneTN = this.props.groupOneData.filter(function (d) {\n        return (\n          (damaging ? d.confidence_damage : d.confidence_faith) < threshold &&\n          !(damaging ? d.damaging_label : d.faith_label)\n        );\n      }).length;\n\n      const groupTwoFP = this.props.groupTwoData.filter(function (d) {\n        return (\n          (damaging ? d.confidence_damage : d.confidence_faith) >= threshold &&\n          !(damaging ? d.damaging_label : d.faith_label)\n        );\n      }).length;\n\n      const groupTwoTP = this.props.groupTwoData.filter(function (d) {\n        return (\n          (damaging ? d.confidence_damage : d.confidence_faith) >= threshold &&\n          (damaging ? d.damaging_label : d.faith_label)\n        );\n      }).length;\n\n      const groupTwoFN = this.props.groupTwoData.filter(function (d) {\n        return (\n          (damaging ? d.confidence_damage : d.confidence_faith) < threshold &&\n          (damaging ? d.damaging_label : d.faith_label)\n        );\n      }).length;\n\n      const groupTwoTN = this.props.groupTwoData.filter(function (d) {\n        return (\n          (damaging ? d.confidence_damage : d.confidence_faith) < threshold &&\n          !(damaging ? d.damaging_label : d.faith_label)\n        );\n      }).length;\n\n      return {\n        groupOne: [groupOneTP, groupOneTN, groupOneFP, groupOneFN],\n        groupTwo: [groupTwoTP, groupTwoTN, groupTwoFP, groupTwoFN],\n        all: [\n          groupOneTP + groupTwoTP,\n          groupOneTN + groupTwoTN,\n          groupOneFP + groupTwoFP,\n          groupOneFN + groupTwoFN,\n        ],\n      };\n    } else {\n      return {\n        groupOne: this.state.groupOnePerformance,\n        groupTwo: this.state.groupTwoPerformance,\n        all: this.state.wholePerformance,\n      };\n    }\n  }\n\n  onTypeChange = (event, type) => {\n    if (type != null) {\n      let acc = 0;\n      let fpr = 0;\n      let fnr = 0;\n\n      if (this.props.performanceData != null) {\n        const data = this.props.performanceData;\n        acc =\n          100 * (type ? data[50].damaging_accuracy : data[50].faith_accuracy);\n        fpr = 100 * (type ? data[50].damaging_fpr : data[50].faith_fpr);\n        fnr = 100 * (type ? data[50].damaging_fnr : data[50].faith_fnr);\n      }\n\n      this.setState({\n        damaging: type,\n        defaultPerformance: [acc.toFixed(1), fpr.toFixed(1), fnr.toFixed(1)],\n      });\n\n      this.state.damaging = type;\n      this.state.defaultPerformance = [\n        acc.toFixed(1),\n        fpr.toFixed(1),\n        fnr.toFixed(1),\n      ];\n\n      this.getWholePerformance();\n      d3.select(\".compareChart svg\").remove();\n      this.drawChart = this.drawChart.bind(this);\n      this.drawChart();\n\n      d3.select(\".comparePerformance svg\").remove();\n      this.drawPerformanceChart = this.drawPerformanceChart.bind(this);\n      this.drawPerformanceChart();\n    }\n  };\n\n  onSliderChange = (event, threshold) => {\n    this.setState({\n      threshold: threshold,\n    });\n\n    this.getWholePerformance();\n\n    d3.select(\".compareChart svg\").remove();\n    this.drawChart = this.drawChart.bind(this);\n    this.drawChart();\n    d3.select(\".comparePerformance svg\").remove();\n    this.drawPerformanceChart = this.drawPerformanceChart.bind(this);\n    this.drawPerformanceChart();\n  };\n\n  onTextChange = (event) => {\n    if (event.target.value !== \"\") {\n      this.onSliderChange(null, event.target.value);\n    }\n  };\n\n  componentDidMount() {\n    console.log(\"component mounted\");\n    let width = this.getWidth();\n    let height = width / 2.4;\n    let performanceWidth = this.getPerformanceWidth();\n    let performanceHeight = this.getPerformanceHeight();\n    let sliderRight = width - 40;\n    // this.getWholePerformance();\n    let acc = 0;\n    let fpr = 0;\n    let fnr = 0;\n    if (this.props.performanceData != null) {\n      const data = this.props.performanceData;\n      acc = data[50].damaging_accuracy * 100;\n      fpr = 100 * data[50].damaging_fpr;\n      fnr = 100 * data[50].damaging_fnr;\n    }\n\n    this.setState(\n      {\n        width: width,\n        height: height,\n        sliderRange: [10, sliderRight],\n        performanceWidth: performanceWidth,\n        performanceHeight: performanceHeight,\n        damaging: true,\n        defaultPerformance: [acc.toFixed(1), fpr.toFixed(1), fnr.toFixed(1)],\n      },\n      () => {\n        this.getWholePerformance();\n        this.drawChart();\n        this.drawPerformanceChart();\n      }\n    );\n\n    let resizedFn;\n    window.addEventListener(\"resize\", () => {\n      clearTimeout(resizedFn);\n      resizedFn = setTimeout(() => {\n        this.redrawChart();\n      }, 200);\n    });\n  }\n\n  redrawChart() {\n    let width = this.getWidth();\n    let performanceWidth = this.getPerformanceWidth();\n    let performanceHeight = this.getPerformanceHeight();\n    let sliderRight = width - 40;\n    this.setState({\n      width: width,\n      height: width / 2,\n      performanceWidth: performanceWidth,\n      performanceHeight: performanceHeight,\n\n      sliderRange: [10, sliderRight],\n    });\n    d3.select(\".compareChart svg\").remove();\n    this.drawChart = this.drawChart.bind(this);\n    this.drawChart();\n    d3.select(\".comparePerformance svg\").remove();\n    this.drawPerformanceChart = this.drawPerformanceChart.bind(this);\n    this.drawPerformanceChart();\n  }\n\n  getWholePerformance() {\n    if (\n      this.props.performanceData != null &&\n      this.props.groupOneData != null &&\n      this.props.groupTwoData != null\n    ) {\n      const performance = this.getPerformanceForThreshold();\n      const groupOnePerf = performance.groupOne;\n      const groupTwoPerf = performance.groupTwo;\n      const allPerf = getPerformance(performance.all);\n\n      this.state.wholePerformance = allPerf;\n      this.state.groupOnePerformance = groupOnePerf;\n      this.state.groupTwoPerformance = groupTwoPerf;\n\n      this.setState({\n        wholePerformance: allPerf,\n        groupOnePerformance: groupOnePerf,\n        groupTwoPerformance: groupTwoPerf,\n      });\n    }\n  }\n\n  drawPerformanceChart() {\n    const margin = this.getMargin();\n    let width = this.state.performanceWidth - margin.left - margin.right;\n    let height = this.state.performanceHeight - margin.top - margin.bottom;\n    let svg = d3\n      .select(\".comparePerformance\")\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom);\n\n    let blockHeight = height / 3;\n    let vizHeight = blockHeight / 4;\n    // TP, TN, FP, FN\n    if (\n      this.state.groupOnePerformance != null &&\n      this.state.groupTwoPerformance != null\n    ) {\n      let groupOnePerformance = getPerformance(this.state.groupOnePerformance);\n      let groupTwoPerformance = getPerformance(this.state.groupTwoPerformance);\n\n      let wholePerformance = this.state.wholePerformance;\n      const x = d3\n        .scaleLinear()\n        .domain([0, 1])\n        .nice()\n        .range([margin.left, margin.left + width]);\n\n      function drawPerformance(\n        height,\n        defaultPerformance,\n        currentPerformance,\n        color,\n        larger,\n        groupNumber,\n        largerPerformance\n      ) {\n        const markHeight = 5;\n        const markWidth = 6;\n        const actualx = x(currentPerformance);\n\n        svg\n          .append(\"line\")\n          .attr(\"x1\", margin.left)\n          .attr(\"y1\", height)\n          .attr(\"x2\", margin.left + width)\n          .attr(\"y2\", height)\n          .attr(\"stroke-width\", 2)\n          .attr(\"stroke\", \"grey\");\n        svg\n          .append(\"line\")\n          .attr(\"x1\", actualx)\n          .attr(\"y1\", height - markHeight)\n          .attr(\"x2\", actualx)\n          .attr(\"y2\", height + markHeight)\n          .attr(\"stroke-width\", markWidth)\n          .attr(\"stroke\", color);\n\n        svg\n          .append(\"line\")\n          .attr(\"x1\", x(defaultPerformance))\n          .attr(\"y1\", height)\n          .attr(\"x2\", actualx)\n          .attr(\"y2\", height)\n          .attr(\"stroke-width\", 3)\n          .attr(\"stroke\", color);\n\n        let tooltipHalfWidth = 40;\n        let tooltipx = actualx - tooltipHalfWidth;\n\n        if (tooltipx < margin.left) {\n          tooltipx = margin.left;\n        } else if (tooltipx > width + margin.left + margin.right) {\n          tooltipx = width + margin.left + margin.right - tooltipHalfWidth;\n        }\n        let tooltipy = height + 10;\n        if (larger) {\n          if (groupNumber === 1) {\n            tooltipy = height - 35;\n          }\n\n          svg\n            .append(\"rect\")\n            .attr(\"x\", tooltipx)\n            .attr(\"y\", tooltipy)\n            .attr(\"width\", tooltipHalfWidth * 2)\n            .attr(\"height\", 24)\n            .attr(\"rx\", 4)\n            .attr(\"ry\", 4)\n            .attr(\"fill\", color);\n\n          svg\n            .append(\"text\")\n            .attr(\"x\", tooltipx + tooltipHalfWidth)\n            .attr(\"y\", tooltipy + 13)\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"alignment-baseline\", \"middle\")\n            .text(largerPerformance + \" more\")\n            .attr(\"font-family\", \"sans-serif\")\n            .attr(\"fill\", \"white\")\n            .attr(\"font-size\", \"14px\");\n        }\n      }\n\n      [\"Accuracy\", \"FPR\", \"FNR\"].forEach((item, index) => {\n        const groupOneHeight = blockHeight * index + vizHeight * 3;\n        const groupTwoHeight = margin.top + blockHeight * index + vizHeight * 4;\n\n        const groupOneCurrentPerformance = groupOnePerformance[index];\n        const groupTwoCurrentPerformance = groupTwoPerformance[index];\n\n        let min = groupOneCurrentPerformance;\n        let max = groupTwoCurrentPerformance;\n        let larger = 2;\n        if (groupOneCurrentPerformance > groupTwoCurrentPerformance) {\n          min = groupTwoCurrentPerformance;\n          max = groupOneCurrentPerformance;\n          larger = 1;\n        } else if (groupOneCurrentPerformance > groupTwoCurrentPerformance) {\n          larger = 0;\n        }\n\n        let largerPercentage = 0;\n        if (min === 0) {\n          largerPercentage = \"\";\n        } else {\n          largerPercentage = Math.round(((max - min) * 100) / max) + \"%\";\n        }\n\n        drawPerformance(\n          groupOneHeight,\n          wholePerformance[index],\n          groupOnePerformance[index],\n          d3.color(this.state.group1Color),\n          larger === 1,\n          1,\n          largerPercentage\n        );\n        drawPerformance(\n          groupTwoHeight,\n          wholePerformance[index],\n          groupTwoPerformance[index],\n          d3.color(this.state.group2Color),\n          larger === 2,\n          2,\n          largerPercentage\n        );\n      });\n    }\n  }\n\n  drawChart() {\n    const margin = { top: 20, right: 40, bottom: 0, left: 0 };\n    let width = this.state.width - margin.left - margin.right;\n    let height = width / 2.5;\n    // append the svg object to the body of the page\n    let svg = d3\n      .select(\".compareChart\")\n      .append(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n\n    var customCross = {\n      draw: function (context, size) {\n        let s = Math.sqrt(size * 2) / 2;\n        let w = Math.sqrt(size) / 6;\n        context.moveTo(-s, w);\n        context.lineTo(s, w);\n        context.lineTo(s, -w);\n        context.lineTo(-s, -w);\n        context.closePath();\n        context.moveTo(w, s);\n        context.lineTo(w, -s);\n        context.lineTo(-w, -s);\n        context.lineTo(-w, s);\n        context.closePath();\n      },\n    };\n\n    const groupSize = width / 2.4;\n\n    const pack = (data) =>\n      d3\n        .pack()\n        .size([groupSize - 2, groupSize - 2])\n        .padding(3)(\n        d3\n          .hierarchy(data)\n          .sum((d) => d.value)\n          .sort((a, b) => b.value - a.value)\n      );\n\n    const threshold = this.state.threshold * 0.01;\n\n    if (\n      this.props.groupOneData != null &&\n      this.props.groupTwoData != null &&\n      this.state.groupOnePerformance != null &&\n      this.state.groupTwoPerformance != null\n    ) {\n      const groupOnePerf = this.state.groupOnePerformance;\n      const groupTwoPerf = this.state.groupTwoPerformance;\n      const groupOneTP = groupOnePerf[0],\n        groupOneTN = groupOnePerf[1],\n        groupOneFP = groupOnePerf[2],\n        groupOneFN = groupOnePerf[3];\n      const groupTwoTP = groupTwoPerf[0],\n        groupTwoTN = groupTwoPerf[1],\n        groupTwoFP = groupTwoPerf[2],\n        groupTwoFN = groupTwoPerf[3];\n\n      const dots = pack(dotData)\n        .children.slice(0, this.props.sliceNumber)\n        .map((d) => ({\n          x: d.x,\n          y: d.y,\n          r: d.r,\n          category: \"cross\",\n        }))\n        .sort(function (a, b) {\n          const centerX = height;\n          const centerY = height / 2 + margin.top;\n          const distA = Math.sqrt(\n            Math.pow(a.x - centerX, 2) + Math.pow(a.y - centerY, 2)\n          );\n          const distB = Math.sqrt(\n            Math.pow(b.x - centerX, 2) + Math.pow(b.y - centerY, 2)\n          );\n          return distA - distB;\n        });\n\n      const dotRadius = dots[0].r;\n\n      const sortArr = (x, y) => {\n        const getStatus = (d) => {\n          const correct =\n            parseFloat(\n              this.state.damaging ? d.confidence_damage : d.confidence_faith\n            ).toFixed(2) >=\n              threshold ===\n            (this.state.damaging ? d.damaging_label : d.faith_label);\n          const predict =\n            parseFloat(\n              this.state.damaging ? d.confidence_damage : d.confidence_faith\n            ).toFixed(2) >= threshold;\n\n          if (predict && !correct) return 1;\n          if (predict && correct) return 2;\n          if (!predict && !correct) return 3;\n          if (!predict && correct) return 4;\n        };\n\n        let xStat = getStatus(x),\n          yStat = getStatus(y);\n        if (xStat < yStat) return -1;\n        if (xStat > yStat) return 1;\n        else return 0;\n      };\n\n      function getSymbolColor(data, color, fp, tp, fn, tn, damaging) {\n        let dd = [];\n\n        dots.forEach(function (dot, index) {\n          const correct =\n            parseFloat(\n              damaging\n                ? data[index].confidence_damage\n                : data[index].confidence_faith\n            ).toFixed(2) >=\n              threshold ===\n            damaging\n              ? data[index].damaging_label\n              : data[index].faith_label;\n          const predict =\n            parseFloat(\n              damaging\n                ? data[index].confidence_damage\n                : data[index].confidence_faith\n            ).toFixed(2) >= threshold;\n\n          let col = predict ? color : d3.color(\"#909090\");\n          let cat = correct ? 1 : 0;\n\n          dd.push({\n            x: dot.x,\n            y: dot.y,\n            category: cat,\n            color: col,\n            rev_id: +data[index].rev_id,\n            newcomer: data[index].newcomer,\n            anonymous: data[index].anonymous,\n            correct:\n              parseFloat(\n                damaging\n                  ? data[index].confidence_damage\n                  : data[index].confidence_faith\n              ).toFixed(2) >=\n                threshold ===\n              damaging\n                ? data[index].damaging_label\n                : data[index].faith_label,\n            predict:\n              parseFloat(\n                damaging\n                  ? data[index].confidence_damage\n                  : data[index].confidence_faith\n              ).toFixed(2) >= threshold,\n          });\n        });\n\n        return dd;\n      }\n\n      this.props.groupOneData.sort(sortArr);\n      let groupOneDots = getSymbolColor(\n        this.props.groupOneData,\n        d3.color(this.state.group1Color),\n        groupOneFP,\n        groupOneTP,\n        groupOneFN,\n        groupOneTN,\n        this.state.damaging\n      );\n      this.props.groupTwoData.sort(sortArr);\n      let groupTwoDots = getSymbolColor(\n        this.props.groupTwoData,\n        d3.color(this.state.group2Color),\n        groupTwoFP,\n        groupTwoTP,\n        groupTwoFN,\n        groupTwoTN,\n        this.state.damaging\n      );\n\n      const x = (x, offset) => {\n        console.log(x + margin.left + 270);\n        return x + margin.left + 270 + width * offset;\n      };\n\n      const damaging = this.state.damaging;\n\n      svg\n        .append(\"g\")\n        .selectAll(\"path\")\n        .data(groupOneDots)\n        .join(\"path\")\n        .attr(\n          \"transform\",\n          (d) =>\n            `translate(${margin.left + width * 0.05 + d.x},${d.y}),rotate(45)`\n        )\n        .attr(\"fill\", (d) => d.color)\n        .attr(\n          \"d\",\n          d3\n            .symbol()\n            .type(function (d) {\n              if (d.category === 0) {\n                return customCross;\n              } else {\n                return d3.symbolCircle;\n              }\n            })\n            .size(dotRadius * dotRadius * 1.5)\n        )\n        .style(\"cursor\", \"pointer\")\n        .on(\"click\", (d) =>\n          diff(\n            d,\n            this.state.damaging,\n            (d) => x(d, 0.075),\n            { top: 500 },\n            height,\n            \".compareChart\"\n          )\n        )\n        .on(\"mouseover\", function (d) {\n          d3.select(\".compareChart div\").remove();\n          d3.select(\".compareChart .tooltip.small\").remove();\n          diff(\n            d,\n            damaging,\n            (d) => x(d, 0.075),\n            { top: 425 },\n            height,\n            \".compareChart\",\n            1,\n            0\n          );\n        })\n        .on(\"mouseout\", function (d) {\n          d3.select(\".compareChart .tooltip.small\").remove();\n        });\n\n      svg\n        .append(\"g\")\n        .selectAll(\"path\")\n        .data(groupTwoDots)\n        .join(\"path\")\n        .attr(\n          \"transform\",\n          (d) =>\n            `translate(${margin.left + width * 0.55 + d.x},${d.y}),rotate(45)`\n        )\n        .attr(\"fill\", (d) => d.color)\n        .attr(\n          \"d\",\n          d3\n            .symbol()\n            .type(function (d) {\n              if (d.category === 0) {\n                return customCross;\n              } else {\n                return d3.symbolCircle;\n              }\n            })\n            .size(dotRadius * dotRadius * 1.5)\n        )\n        .style(\"cursor\", \"pointer\")\n        .on(\"click\", (d) =>\n          diff(\n            d,\n            this.state.damaging,\n            function (d) {\n              return x(d, 0.575);\n            },\n            { top: 480 },\n            height,\n            \".compareChart\"\n          )\n        )\n        .on(\"mouseover\", function (d) {\n          d3.select(\".compareChart div\").remove();\n          d3.select(\".compareChart .tooltip.small\").remove();\n          diff(\n            d,\n            damaging,\n            (d) => x(d, 0.575),\n            { top: 425 },\n            height,\n            \".compareChart\",\n            1,\n            1\n          );\n        })\n        .on(\"mouseout\", function (d) {\n          d3.select(\".compareChart .tooltip.small\").remove();\n        });\n    }\n  }\n\n  getClickTip() {\n    return (\n      <span>\n        <strong>TIP:</strong> Click on a revision (cross or circle) to view more\n        details.\n      </span>\n    );\n  }\n\n  render() {\n    const message = this.state.damaging ? \"damaging\" : \"good faith\";\n    const opposite = this.state.damaging ? \"good\" : \"bad faith\";\n    return (\n      <React.Fragment>\n        <div\n          ref={this.visualizationRef}\n          style={{\n            width: \"55%\",\n            display: \"inline-block\",\n            verticalAlign: \"top\",\n          }}\n        >\n          <div className=\"upperSettings\">\n            <Grid container spacing={0}>\n              <TypeToggle\n                damaging={this.state.damaging}\n                onChange={this.onTypeChange}\n                gridSize={9}\n                key={this.state.damaging}\n              />\n              <Grid item xs={3} className=\"threshold\">\n                <div className=\"innerBox\">\n                  <Typography variant=\"subtitle2\">\n                    <Box>threshold</Box>\n                  </Typography>\n\n                  <Grid container spacing={2} className=\"options\">\n                    <Grid item xs={12} style={{ paddingTop: 0 }}>\n                      {/* <Typography component=\"div\" variant=\"h6\" className=\"text\">\n                        {this.state.threshold} %\n                      </Typography> */}\n                      <ThresholdInput\n                        value={this.state.threshold}\n                        multiplier={1}\n                        onChange={this.onTextChange}\n                      />\n                    </Grid>\n                  </Grid>\n                </div>\n              </Grid>\n            </Grid>\n          </div>\n\n          <div\n            style={{\n              marginLeft: `${this.state.sliderRange[0]}px`,\n              width: `${\n                this.state.sliderRange[1] - this.state.sliderRange[0]\n              }px`,\n            }}\n          >\n            <Typography variant=\"subtitle2\">Fairness in Groups</Typography>\n            <ThresholdSlider\n              value={this.state.threshold}\n              defaultValue={60}\n              middleText={this.getClickTip}\n              onChangeCommitted={this.onSliderChange}\n            />\n          </div>\n          <div className=\"compareChart\" ref={this.compareChartRef} />\n          <div\n            style={{\n              marginLeft: `${this.state.sliderRange[0]}px`,\n              width: `${\n                this.state.sliderRange[1] - this.state.sliderRange[0]\n              }px`,\n              transform: \"translate(0px,-20px)\",\n            }}\n          >\n            <div\n              style={{\n                width: \"50%\",\n                display: \"inline-block\",\n              }}\n            >\n              <Typography\n                variant=\"h6\"\n                component=\"div\"\n                style={{\n                  textAlign: \"center\",\n                  color: `${this.state.group1Color}`,\n                }}\n              >\n                Newcomer Edits\n              </Typography>\n              <Typography\n                variant=\"body2\"\n                component=\"div\"\n                style={{ textAlign: \"center\" }}\n              >\n                <div\n                  style={{\n                    display: \"flex\",\n                    flexDirection: \"row\",\n                    justifyContent: \"center\",\n                  }}\n                >\n                  <Box width=\"80%\">\n                    Model performance on edits made by newcomer editors\n                  </Box>\n                </div>\n              </Typography>\n            </div>\n            <div\n              style={{\n                width: \"50%\",\n                display: \"inline-block\",\n                // transform: 'translate(0,-10px)',\n              }}\n            >\n              <Typography\n                variant=\"h6\"\n                component=\"div\"\n                style={{\n                  textAlign: \"center\",\n                  color: `${this.state.group2Color}`,\n                }}\n              >\n                Experienced Edits\n              </Typography>\n\n              <Typography\n                variant=\"body2\"\n                component=\"div\"\n                style={{ textAlign: \"center\" }}\n              >\n                <div\n                  style={{\n                    display: \"flex\",\n                    flexDirection: \"row\",\n                    justifyContent: \"center\",\n                  }}\n                >\n                  <Box width=\"80%\">\n                    Model performance on edits made by experienced editors\n                  </Box>\n                </div>\n              </Typography>\n            </div>\n            <div className=\"legendCard\">\n              <Typography component=\"div\" variant=\"subtitle2\">\n                legend\n              </Typography>\n              <Grid container spacing={0} style={{ marginTop: \"10px\" }}>\n                <Grid item xs={6}>\n                  <div className=\"legendMark\">\n                    <Circle size={12} color=\"#909090\" />{\" \"}\n                    <Typography component=\"span\" variant=\"body2\">\n                      Correctly classified {opposite} edits\n                    </Typography>\n                  </div>\n                </Grid>\n                <Grid item xs={6}>\n                  <div className=\"legendMark\">\n                    <Circle size={12} color={this.state.group1Color} />\n                    <span style={{ width: \"2px\" }} />\n                    <Circle size={12} color={this.state.group2Color} />{\" \"}\n                    <Typography component=\"span\" variant=\"body2\">\n                      Correctly classified {message} edits\n                    </Typography>\n                  </div>\n                </Grid>\n                <Grid item xs={6}>\n                  <div className=\"legendMark\">\n                    <Cross size={12} color=\"#909090\" />{\" \"}\n                    <Typography component=\"span\" variant=\"body2\">\n                      Uncaught {message} edits{\" \"}\n                    </Typography>\n                  </div>\n                </Grid>\n                <Grid item xs={6}>\n                  <div className=\"legendMark\">\n                    <Cross size={12} color={this.state.group1Color} />\n                    <span style={{ width: \"2px\" }} />\n                    <Cross size={12} color={this.state.group2Color} />{\" \"}\n                    <Typography component=\"span\" variant=\"body2\">\n                      Misclassified {opposite} edits{\" \"}\n                    </Typography>\n                  </div>\n                </Grid>\n              </Grid>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"sidePanel\" id=\"comparePerformanceSidePanel\">\n          <div\n            className=\"overallPerformance\"\n            ref={this.wholePerformanceRef}\n            style={{ borderBottom: \"1px solid lightgrey\" }}\n          >\n            <Typography component=\"div\" variant=\"subtitle2\">\n              PERFORMANCE\n            </Typography>\n            <Grid\n              container\n              className=\"performanceBlock\"\n              spacing={0}\n              style={{ marginTop: \"5px\", textAlign: \"left\", marginLeft: \"0px\" }}\n            >\n              <Grid item xs={4}>\n                <Typography component=\"div\" className=\"title\">\n                  ACC\n                </Typography>\n                <Typography component=\"div\">\n                  <Box className=\"data\">\n                    {(this.state.wholePerformance[0] * 100).toFixed(1)}%\n                  </Box>\n                </Typography>\n              </Grid>\n              <Grid item xs={4}>\n                <Typography component=\"div\" className=\"title\">\n                  FPR\n                </Typography>\n                <Typography component=\"div\">\n                  <Box className=\"data\">\n                    {(this.state.wholePerformance[1] * 100).toFixed(1)}%\n                  </Box>\n                </Typography>\n              </Grid>\n              <Grid item xs={4}>\n                <Typography component=\"div\" className=\"title\">\n                  FNR\n                </Typography>\n                <Typography component=\"div\">\n                  <Box className=\"data\">\n                    {(this.state.wholePerformance[2] * 100).toFixed(1)}%\n                  </Box>\n                </Typography>\n              </Grid>\n            </Grid>\n          </div>\n          <div style={{ display: \"flex\" }}>\n            <div\n              style={{\n                width: \"40%\",\n                display: \"inline-block\",\n              }}\n              className=\"groupPerformance\"\n            >\n              {[\"Accuracy\", \"False Positive Rate\", \"False Negative Rate\"].map(\n                (value, index) => {\n                  return (\n                    <div\n                      style={{\n                        height: `${this.getMargin().blockHeight}px`,\n                        fontSize: \"12px\",\n                        transform: `translate(0px,7px)`,\n                      }}\n                    >\n                      <div\n                        style={{\n                          height: `${this.getMargin().chartHeight}px`,\n                        }}\n                      />\n                      <div\n                        style={{\n                          height: `${this.getMargin().chartHeight}px`,\n                          display: \"flex\",\n                          flexDirection: \"column-reverse\",\n                        }}\n                      >\n                        <Typography variant=\"body2\" className=\"classTitle\">\n                          {value}\n                        </Typography>\n                      </div>\n\n                      <div\n                        style={{\n                          height: `${this.getMargin().chartHeight}px`,\n                          display: \"flex\",\n                          flexDirection: \"column-reverse\",\n                        }}\n                      >\n                        <div>\n                          <div className=\"title\">newcomer edits</div>\n                          <div\n                            className=\"data\"\n                            style={{ color: this.state.group1Color }}\n                          >\n                            {this.state.groupOnePerformance === null\n                              ? \"...\"\n                              : (\n                                  getPerformance(\n                                    this.state.groupOnePerformance\n                                  )[index] * 100\n                                ).toFixed(1) + \"%\"}\n                          </div>\n                        </div>\n                      </div>\n\n                      <div\n                        style={{\n                          height: `${this.getMargin().chartHeight}px`,\n                          display: \"flex\",\n                          flexDirection: \"column-reverse\",\n                        }}\n                      >\n                        <div>\n                          <div className=\"title\">experienced edits</div>\n                          <div\n                            className=\"data\"\n                            style={{ color: this.state.group2Color }}\n                          >\n                            {this.state.groupTwoPerformance === null\n                              ? \"...\"\n                              : (\n                                  getPerformance(\n                                    this.state.groupTwoPerformance\n                                  )[index] * 100\n                                ).toFixed(1) + \"%\"}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                }\n              )}\n            </div>\n            <div style={{ width: \"60%\", display: \"inline-block\" }}>\n              <div\n                className=\"comparePerformance\"\n                ref={this.comparePerformanceRef}\n              />\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default GroupCompareVisualizer;\n","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport data_balanced from \"../../data/data_balanced_1.csv\";\nimport GroupCompareVisualizer from \"./compare_visualizer\";\n\nconst groupSliceNumber = 100;\nclass GroupCompareChart extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anonData: null,\n      loggedData: null,\n      newcomerData: null,\n      experiencedData: null,\n      change: 0,\n    };\n  }\n\n  componentDidMount() {\n    d3.csv(data_balanced, (d) => {\n      return {\n        anonymous: d.anonymous === \"TRUE\" ? true : false,\n        newcomer: d.edit_years <= 8 ? true : false,\n        confidence_faith: +d.confidence_faith,\n        faith_label: d.goodfaith === \"TRUE\" ? true : false,\n        confidence_damage: +d.confidence_damage,\n        damaging_label: d.damaging === \"TRUE\" ? true : false,\n        rev_id: +d.rev_id,\n      };\n    }).then((data) => {\n      const anonData = data\n        .filter((d) => {\n          return d.anonymous;\n        })\n        .slice(0, groupSliceNumber);\n      const loggedData = data\n        .filter((d) => {\n          return !d.anonymous;\n        })\n        .slice(0, groupSliceNumber);\n\n      const newcomerData = data\n        .filter((d) => {\n          return d.newcomer;\n        })\n        .slice(0, groupSliceNumber);\n\n      const experiencedData = data\n        .filter((d) => {\n          return !d.newcomer;\n        })\n        .slice(0, groupSliceNumber);\n      this.setState({\n        anonData: anonData,\n        loggedData: loggedData,\n        newcomerData: newcomerData,\n        experiencedData: experiencedData,\n      });\n\n      this.setState({ change: 2 });\n    });\n  }\n\n  //   shouldComponentUpdate (nextProps, nextState) {\n  //     return true;\n  //   }\n\n  render() {\n    return (\n      <div style={{ display: \"flex\" }}>\n        {/* <Test data={this.state.data} key={this.state.change} /> */}\n        <GroupCompareVisualizer\n          groupOneData={this.state.newcomerData}\n          groupTwoData={this.state.experiencedData}\n          key={this.state.change}\n          performanceData={this.props.performanceData}\n          sliceNumber={groupSliceNumber}\n        />\n      </div>\n    );\n  }\n}\n\nexport default GroupCompareChart;\n","import React, { Component } from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\n\nclass Metric extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showDesc: false,\n    };\n  }\n\n  componentDidMount() {\n    this.setState({ showDesc: false });\n  }\n\n  toggle(val) {\n    this.setState({ showDesc: val });\n  }\n\n  render() {\n    const showDesc = this.state.showDesc;\n    return (\n      <Typography\n        variant=\"body2\"\n        className=\"metric\"\n        style={{ color: !this.state.showDesc ? \"black\" : this.props.accent }}\n        onMouseEnter={() => this.toggle(true)}\n        onMouseLeave={() => this.toggle(false)}\n      >\n        <strong>{this.props.title}</strong>: {this.props.value}{\" \"}\n        {showDesc && (\n          <em style={{ color: this.props.accent }}>{this.props.desc}</em>\n        )}\n      </Typography>\n    );\n  }\n}\n\nexport default Metric;\n","import React, { Component } from \"react\";\nimport Metric from \"../partials/metric\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { ToggleButtonGroup, ToggleButton } from \"@material-ui/lab\";\nimport {\n  ExpansionPanel,\n  ExpansionPanelSummary,\n  ExpansionPanelDetails,\n  LinearProgress,\n} from \"@material-ui/core\";\nimport Box from \"@material-ui/core/Box\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Input from \"@material-ui/core/Input\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport TypeToggle from \"../partials/typeToggle\";\nimport axios from \"axios\";\n\nclass Recommender extends Component {\n  constructor(props) {\n    super(props);\n    this.chartRef = React.createRef();\n    this.state = {\n      damaging: true,\n      threshold: null,\n      damagingData: null,\n      goodfaithData: null,\n      recommendations: null,\n      range: -1,\n    };\n  }\n\n  onTypeChange = (event, type) => {\n    if (type != null) this.setState({ damaging: type });\n  };\n\n  onThresChange = (event, thres) => {\n    if (thres != null) {\n      let diffs = [\n        Math.abs(thres - this.getRec(\"Aggressive\")),\n        Math.abs(thres - this.getRec(\"Balanced\")),\n        Math.abs(thres - this.getRec(\"Cautious\")),\n      ];\n\n      let range = 0;\n      let minDiff = 1;\n      for (var i = 0; i < 3; i++) {\n        if (diffs[i] < minDiff) {\n          minDiff = diffs[i];\n          range = i;\n        }\n      }\n\n      this.setState({ threshold: thres, range: range });\n    }\n  };\n\n  onRangeChange = (event, range) => {\n    const ranges = [\"Aggressive\", \"Balanced\", \"Cautious\"];\n    if (range != null) this.onThresChange(event, this.getRec(ranges[range]));\n  };\n\n  onTextChange = (event) => {\n    this.onThresChange(\n      event,\n      event.target.value ? Number((event.target.value / 100).toFixed(2)) : null\n    );\n  };\n\n  getData = () => {\n    function getObject(array) {\n      var newArray = {};\n      var arrayIdx = 0;\n      var i = 0.01;\n\n      while (i < 1 && arrayIdx < array.length) {\n        if (array[arrayIdx] && i - array[arrayIdx][\"threshold\"] < 0.000001) {\n          var elem = array[arrayIdx];\n          newArray[i.toFixed(2)] = {\n            \"!f1\": elem[\"!f1\"],\n            \"!precision\": elem[\"!precision\"],\n            \"!recall\": elem[\"!recall\"],\n            accuracy: elem[\"accuracy\"],\n            f1: elem[\"f1\"],\n            filter_rate: elem[\"filter_rate\"],\n            fpr: elem[\"fpr\"],\n            match_rate: elem[\"match_rate\"],\n            precision: elem[\"precision\"],\n            recall: elem[\"recall\"],\n            fnr: (1 - elem[\"recall\"]).toFixed(3),\n          };\n          i = Number.parseFloat(Number.parseFloat(i + 0.01).toFixed(2));\n        }\n        arrayIdx = arrayIdx + 1;\n      }\n      return newArray;\n    }\n\n    axios\n      .get(\n        \"https://ores.wikimedia.org/v3/scores/enwiki/?models=damaging|goodfaith&model_info=statistics.thresholds.true\"\n      )\n      .then((res) => {\n        const damagingArray =\n          res.data.enwiki.models.damaging.statistics.thresholds.true;\n        const goodfaithArray =\n          res.data.enwiki.models.goodfaith.statistics.thresholds.true;\n        console.log(\"got data\");\n        this.setState({\n          damagingData: getObject(damagingArray),\n          goodfaithData: getObject(goodfaithArray),\n        });\n      });\n  };\n\n  async getRecommendations() {\n    const models = [\"damaging\", \"goodfaith\"];\n    const ranges = [\n      { type: \"Aggressive\", param: '\"maximum precision @ recall >= 0.9\"' },\n      { type: \"Cautious\", param: '\"maximum recall @ precision >= 0.9\"' },\n      { type: \"Balanced\", param: '\"maximum precision @ recall >= 0.5\"' },\n    ];\n    var rec = {\n      damaging: { Aggressive: null, Cautious: null, Balanced: null },\n      goodfaith: { Aggressive: null, Cautious: null, Balanced: null },\n    };\n\n    for (const i in models) {\n      for (const j in ranges) {\n        await axios\n          .get(\n            \"https://ores.wikimedia.org/v3/scores/enwiki/?models=\" +\n              models[i] +\n              \"&model_info=statistics.thresholds.true.\" +\n              ranges[j].param\n          )\n          .then((res) => {\n            rec[models[i]][ranges[j].type] = Number.parseFloat(\n              Math.max(\n                Math.min(\n                  res.data.enwiki.models[\n                    models[i]\n                  ].statistics.thresholds.true[0].threshold.toFixed(2),\n                  0.98\n                ),\n                0.01\n              )\n            );\n          });\n      }\n      console.log(rec[models[i]][\"Balanced\"]);\n      if (\n        (rec[models[i]][\"Balanced\"] > rec[models[i]][\"Aggressive\"] &&\n          rec[models[i]][\"Balanced\"] > rec[models[i]][\"Cautious\"]) ||\n        (rec[models[i]][\"Balanced\"] < rec[models[i]][\"Aggressive\"] &&\n          rec[models[i]][\"Balanced\"] < rec[models[i]][\"Cautious\"])\n      ) {\n        console.log(rec[models[i]][\"Balanced\"]);\n        rec[models[i]][\"Balanced\"] = Number.parseFloat(\n          (\n            (rec[models[i]][\"Aggressive\"] + rec[models[i]][\"Cautious\"]) /\n            2\n          ).toFixed(2)\n        );\n        console.log(rec[models[i]][\"Balanced\"]);\n      }\n    }\n    console.log(rec);\n    this.setState({ recommendations: rec });\n    this.state.recommendations = rec;\n    return rec;\n  }\n\n  getProp(prop, escape) {\n    if (\n      this.state.damagingData &&\n      this.state.goodfaithData &&\n      this.state.threshold != null &&\n      this.state.threshold > 0 &&\n      this.state.threshold <= 0.98\n    ) {\n      return this.state.damaging\n        ? this.state.damagingData[this.state.threshold.toFixed(2)][prop]\n        : this.state.goodfaithData[this.state.threshold.toFixed(2)][prop];\n    } else return escape;\n  }\n\n  getRec(range) {\n    let rec = this.state.recommendations;\n    if (rec == null)\n      rec = {\n        damaging: { Aggressive: 0.1, Cautious: 0.63, Balanced: 0.94 },\n        goodfaith: { Aggressive: 0.85, Cautious: 0.5, Balanced: 0.05 },\n      };\n    const mod = this.state.damaging ? \"damaging\" : \"goodfaith\";\n    return rec[mod][range];\n  }\n\n  componentDidMount() {\n    this.getData();\n    this.getRecommendations();\n    this.setState({ damaging: true, threshold: null, range: -1 });\n  }\n\n  render() {\n    const borderColor = this.state.threshold ? \"#3777a5\" : \"#ddd\";\n    const message = this.state.damaging ? \"damaging\" : \"good faith\";\n    const opposite = this.state.damaging ? \"good\" : \"bad faith\";\n    return (\n      <React.Fragment>\n        <div\n          style={{\n            width: \"100%\",\n            display: \"inline-block\",\n            verticalAlign: \"top\",\n          }}\n        >\n          <div className=\"upperSettings\">\n            <Grid container spacing={0}>\n              <TypeToggle\n                damaging={this.state.damaging}\n                onChange={this.onTypeChange}\n                gridSize={4}\n                key={this.state.damaging}\n              />\n              <Grid\n                item\n                xs={8}\n                style={{\n                  height: \"auto\",\n                  paddingLeft: 10,\n                  paddingBottom: 10,\n                  borderLeft: \"1px solid #d3d3d3\",\n                }}\n              >\n                <Typography component=\"div\" variant=\"subtitle2\">\n                  <Box>INTERACTION FLOW</Box>\n                </Typography>\n                <Grid\n                  container\n                  style={{ justifyContent: \"space-evenly\", height: \"100%\" }}\n                >\n                  {[\n                    \"1. Choose a Goal\",\n                    \"2. Tune Recommendation\",\n                    \"3. Request Performance\",\n                  ].map((text) => (\n                    <Typography\n                      component=\"span\"\n                      variant=\"h6\"\n                      style={{\n                        fontWeight: 500,\n                        paddingTop: 5,\n                        paddingRight: 50,\n                      }}\n                    >\n                      {text}\n                    </Typography>\n                  ))}\n                </Grid>\n              </Grid>\n            </Grid>\n          </div>\n          {!this.state.goodfaithData && (\n            <LinearProgress className=\"myProgress\" />\n          )}\n          <div\n            style={{\n              display: \"inline-flex\",\n              width: \"80%\",\n              height: \"77vh\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              margin: \"0% 10%\",\n            }}\n          >\n            <ToggleButtonGroup\n              orientation=\"vertical\"\n              exclusive\n              value={this.state.range}\n              onChange={this.onRangeChange}\n              style={{\n                display: \"flex\",\n                width: 400,\n                flexDirection: \"column\",\n                textAlign: \"center\",\n                alignItems: \"center\",\n                justifyContent: \"space-evenly\",\n                height: \"100%\",\n                margin: 0,\n              }}\n            >\n              {[\n                {\n                  type: \"Aggressive\",\n                  subtitle: \"Tools for human reviewers\",\n                  description:\n                    \"Catch more \" +\n                    message +\n                    \" edits at the cost of some \" +\n                    opposite +\n                    \" edits being falsely predicted.\",\n                },\n                {\n                  type: \"Balanced\",\n                  subtitle: \"Tools for human reviewers\",\n                  description:\n                    \"Similar rates of uncaught \" +\n                    message +\n                    \" edits and falsely predicted \" +\n                    opposite +\n                    \" edits.\",\n                },\n                {\n                  type: \"Cautious\",\n                  subtitle: \"Automated bots\",\n                  description:\n                    \"Less falsely predicted \" +\n                    opposite +\n                    \" edits at the cost of more uncaught \" +\n                    message +\n                    \" edits.\",\n                },\n              ].map((obj, index) => (\n                <ToggleButton\n                  value={index}\n                  className=\"recommendOptions\"\n                  disabled={\n                    this.state.damaging\n                      ? !this.state.damagingData\n                      : !this.state.goodfaithData\n                  }\n                >\n                  <Grid\n                    container\n                    spacing={0}\n                    style={{ display: \"flex\", justifyContent: \"space-evenly\" }}\n                  >\n                    <Grid\n                      item\n                      xs={6}\n                      style={{\n                        marginRight: 15,\n                        display: \"flex\",\n                        flexDirection: \"column\",\n                        justifyContent: \"space-between\",\n                      }}\n                    >\n                      <div>\n                        <h4>{obj.type} Model</h4>\n                        <h5>{obj.subtitle}</h5>\n                      </div>\n\n                      <p>{obj.description}</p>\n                    </Grid>\n                    <Grid item xs={5}>\n                      <img\n                        src={\n                          process.env.PUBLIC_URL +\n                          \"/recommender/\" +\n                          obj.type +\n                          \".svg\"\n                        }\n                        alt={obj.type + \" model graphic.\"}\n                        height=\"100%\"\n                        width=\"100%\"\n                      />\n                    </Grid>\n                  </Grid>\n                </ToggleButton>\n              ))}\n            </ToggleButtonGroup>\n            <div\n              style={{\n                display: \"flex\",\n                flexDirection: \"column\",\n                justifyContent: \"space-between\",\n              }}\n            >\n              {[\"Aggressive\", \"Balanced\", \"Cautious\"].map((type, index) => {\n                return (\n                  <div>\n                    <img\n                      src={\n                        process.env.PUBLIC_URL +\n                        \"/recommender/\" +\n                        type +\n                        (this.state.range === index ? \"Active\" : \"Inactive\") +\n                        \".svg\"\n                      }\n                      alt=\"\"\n                    />\n                  </div>\n                );\n              })}\n            </div>\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n                marginLeft: 0,\n              }}\n            >\n              <div className=\"card\" style={{ borderColor: borderColor }}>\n                <Typography\n                  component=\"div\"\n                  variant=\"subtitle2\"\n                  style={{ fontSize: 14, color: \"#000\", margin: 0 }}\n                >\n                  SUGGESTED THRESHOLD\n                </Typography>\n                <Input\n                  value={\n                    this.state.threshold\n                      ? (this.state.threshold * 100).toFixed(0)\n                      : null\n                  }\n                  onChange={this.onTextChange}\n                  inputProps={{\n                    step: 1,\n                    min: 1,\n                    max: 98,\n                    type: \"number\",\n                    placeholder: \"N/A\",\n                  }}\n                  endAdornment={\n                    <InputAdornment position=\"end\">\n                      <Typography\n                        variant=\"h6\"\n                        className=\"text\"\n                        style={{ fontSize: 50, fontWeight: 600 }}\n                      >\n                        {this.state.threshold ? \"%\" : \"\"}\n                      </Typography>\n                    </InputAdornment>\n                  }\n                  style={{\n                    fontSize: 50,\n                    width: 150,\n                    fontWeight: 600,\n                    marginBottom: 10,\n                  }}\n                />\n                <Typography variant=\"body2\">\n                  This threshold will catch around\n                  <strong>\n                    {\" \"}\n                    {this.getProp(\"recall\", \"--\") === \"--\"\n                      ? \"--\"\n                      : (this.getProp(\"recall\", \"--\") * 100).toFixed(0)}\n                    %{\" \"}\n                  </strong>\n                  of the {\" \" + message} edits while having\n                  <strong>\n                    {\" \"}\n                    {this.getProp(\"fpr\", \"--\") === \"--\"\n                      ? \"--\"\n                      : (this.getProp(\"fpr\", \"--\") * 100).toFixed(0)}\n                    %{\" \"}\n                  </strong>\n                  of the {\" \" + opposite} edits misclassified.\n                </Typography>\n                <ExpansionPanel>\n                  <ExpansionPanelSummary>\n                    <Typography\n                      variant=\"h5\"\n                      style={{\n                        color: this.state.threshold ? \"#3777a5\" : \"grey\",\n                      }}\n                    >\n                      See Specific Performance\n                    </Typography>\n                  </ExpansionPanelSummary>\n                  <ExpansionPanelDetails>\n                    <div>\n                      {[\n                        // {\n                        //   prop: \"!precision\",\n                        //   desc:\n                        //     \"% of correctly predicted \" + opposite + \" edits\",\n                        // },\n                        // {\n                        //   prop: \"!recall\",\n                        //   desc:\n                        //     \"% of \" + opposite + \" edits correctly predicted\",\n                        // },\n                        // {\n                        //   prop: \"!f1\",\n                        //   desc: \"harmonic mean of !precision and !recall\",\n                        // },\n                        {\n                          prop: \"accuracy\",\n                          desc: \"ratio of correctly predicted data to all data\",\n                        },\n                        // {\n                        //   prop: \"f1\",\n                        //   desc: \"harmonic mean of precision & recall\",\n                        // },\n                        // {\n                        //   prop: \"filter_rate\",\n                        //   desc: \"% of observations predicted as \" + opposite,\n                        // },\n                        {\n                          prop: \"fpr\",\n                          desc:\n                            \"% of \" +\n                            opposite +\n                            \" edits falsely caught as \" +\n                            message,\n                        },\n                        {\n                          prop: \"fnr\",\n                          desc:\n                            \"% of \" +\n                            message +\n                            \" edits that won't be identified\",\n                        },\n                      ].map((obj) => (\n                        <Metric\n                          title={obj.prop}\n                          value={this.getProp(obj.prop, \"N/A\")}\n                          desc={obj.desc}\n                          key={obj.prop}\n                          accent={this.state.threshold ? \"#C57619\" : \"grey\"}\n                        />\n                      ))}\n                    </div>\n                  </ExpansionPanelDetails>\n                </ExpansionPanel>\n\n                <ExpansionPanel style={{ marginTop: 5 }}>\n                  <ExpansionPanelSummary>\n                    <Typography\n                      variant=\"h5\"\n                      style={{\n                        color: this.state.threshold ? \"#3777a5\" : \"grey\",\n                      }}\n                    >\n                      Copy Code for this Threshold\n                    </Typography>\n                  </ExpansionPanelSummary>\n                  <ExpansionPanelDetails>\n                    <div\n                      style={{\n                        wordWrap: \"break-word\",\n                        fontFamily: \"monospace\",\n                      }}\n                    >\n                      <div style={{ margin: 5, fontWeight: \"bold\" }}>\n                        def compute_metrics(y_true, y_pred_scores,{\" \"}\n                        {this.state.threshold}, model=\"\n                        {this.state.damaging ? \"damaging\" : \"goodfaith\"}\"):\n                      </div>\n                      {[\n                        \"# model = damaging or goodfaith\",\n                        \"# return a dictionary with metrics\",\n                        \"# y_true: a np array of true labels 1/0\",\n                        \"# y_pred_scores: a np array of predictions\",\n                      ].map((text, index) => (\n                        <div style={{ margin: 5 }}>\n                          {\"  \"}\n                          {text}\n                        </div>\n                      ))}\n                    </div>\n                  </ExpansionPanelDetails>\n                </ExpansionPanel>\n              </div>\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Recommender;\n","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { ToggleButtonGroup, ToggleButton } from \"@material-ui/lab\";\nimport Box from \"@material-ui/core/Box\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Slider from \"@material-ui/core/Slider\";\nimport ThresholdInput from \"../partials/thresholdInput\";\n\n/* Object Format (for oldData & newData):\n    {\n        damaging: <DAMAGING TRUE>,\n        goodfaith: <GOODFAITH TRUE>,\n        features: <FEATURES OBJECT>\n    } */\nclass FeatureInjector extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      damaging: 0.5,\n      goodfaith: 0.5,\n      curID: null,\n      oldData: null,\n      newData: null,\n      group: 1,\n      adjSeconds: null,\n      anon: null,\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      damaging: 0.5,\n      goodfaith: 0.5,\n      curID: null,\n      group: 0,\n      adjSeconds: null,\n    });\n  }\n\n  onDamagingChange = (event) => {\n    if (event.target.value != null) {\n      let val = (event.target.value / 100).toFixed(2);\n      console.log(event.target.value, val);\n      this.setState({ damaging: val });\n    }\n  };\n\n  onGoodfaithChange = (event) => {\n    if (event.target.value != null) {\n      let val = (event.target.value / 100).toFixed(2);\n      console.log(event.target.value, val);\n      this.setState({ goodfaith: val });\n    }\n  };\n\n  onHighlightChange = (event, type) => {\n    if (type != null) {\n      this.setState({ group: type });\n    }\n  };\n\n  onSliderChange = (event, value) => {\n    if (value != null) {\n      this.setState({\n        adjSeconds: value,\n        anon: value === 0,\n      });\n    }\n  };\n\n  renderPieChart(title, damaging, score, prev = null) {\n    const positive =\n      score > (damaging ? this.state.damaging : this.state.goodfaith);\n\n    const prediction = damaging\n      ? positive\n        ? \"Damaging\"\n        : \"Not Damaging\"\n      : positive\n      ? \"Good Faith\"\n      : \"Bad Faith\";\n\n    var pie = d3\n      .pie()\n      .sort(null)\n      .value((d) => d.value);\n\n    var arc = d3.arc().innerRadius(0).outerRadius(40);\n\n    var data = [\n      { name: \"main\", value: score != null ? score : 0 },\n      { name: \"other\", value: 1 - score },\n    ];\n\n    function pieChartColor(name) {\n      return name === \"main\" ? mainColor(\"green\") : \"lightgrey\";\n    }\n\n    function mainColor(theDefault) {\n      return score != null ? (prev != null ? theDefault : \"grey\") : \"lightgrey\";\n    }\n\n    d3.select(\n      \".pieChart.\" + title.replace(/\\s/g, \"\") + damaging + \" svg\"\n    ).remove();\n\n    let chart = d3\n      .select(\".pieChart.\" + title.replace(/\\s/g, \"\") + damaging)\n      .append(\"svg\")\n      .attr(\"viewBox\", [-40, -40, 80, 80])\n      .attr(\"z-level\", 3);\n\n    const arcs = pie(data);\n\n    chart\n      .append(\"g\")\n      .selectAll(\"path\")\n      .data(arcs)\n      .join(\"path\")\n      .attr(\"fill\", (d) => pieChartColor(d.data.name))\n      .attr(\"d\", arc);\n\n    return (\n      <div class=\"pieChartElem\">\n        <Typography variant=\"h6\">{title}</Typography>\n        <div class=\"mainContainer\">\n          <div class={\"pieChart \" + title.replace(/\\s/g, \"\") + damaging} />\n          <div class=\"rightSide\">\n            <div class=\"scoreBox\">\n              <h3 style={{ color: mainColor(\"#444\") }}>\n                {score != null ? score.toFixed(2) : \"N/A\"}\n              </h3>\n              {prev != null && score != null && score !== prev ? (\n                <h6 style={{ color: \"blue\" }}>\n                  {score > prev ? \"\\u25b2 \" : \"\\u25bc \"}\n                  {Math.abs(score - prev).toFixed(2)}\n                </h6>\n              ) : null}\n            </div>\n            {score != null ? (\n              <Typography\n                variant=\"body1\"\n                style={{\n                  color: prev != null ? \"black\" : \"grey\",\n                  marginRight: 0,\n                }}\n              >\n                Predicted as{\" \"}\n                <span\n                  style={{\n                    color:\n                      prev != null\n                        ? damaging === positive\n                          ? \"red\"\n                          : \"green\"\n                        : \"grey\",\n                    margin: 0,\n                  }}\n                >\n                  {prediction}\n                </span>\n              </Typography>\n            ) : null}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const marks = [\n      { value: 0, label: \"Anonymous\" },\n      { value: 1.577e8, label: \"5 years\" },\n      { value: 3.154e8, label: \"10 years\" },\n      { value: 4.73e8, label: \"15 years\" },\n    ];\n\n    return (\n      <Grid container>\n        {/* Disparity Highlighter */}\n        <Grid\n          item\n          md={6}\n          style={{\n            padding: 10,\n            paddingTop: 0,\n            borderRight: \"1px solid lightgrey\",\n            borderBottom: \"none\",\n            paddingBottom: 0,\n          }}\n          className=\"upperSettings\"\n        >\n          <Grid item xs={this.props.gridSize} className=\"modelOptions\">\n            <Typography component=\"div\" variant=\"subtitle2\">\n              <Box>Highlight Edits</Box>\n            </Typography>\n            <ToggleButtonGroup\n              exclusive\n              value={this.state.group}\n              onChange={this.onHighlightChange}\n              className=\"options\"\n              style={{ paddingBottom: 0 }}\n              //   style={{ width: \"90%\", justifyContent: \"space-between\" }}\n            >\n              <Typography\n                component={ToggleButton}\n                value={1}\n                variant=\"h6\"\n                className=\"text\"\n                style={{ fontSize: 20 }}\n              >\n                Newcomer / Experienced\n              </Typography>\n              <Typography\n                value={2}\n                component={ToggleButton}\n                variant=\"h6\"\n                className=\"text\"\n                style={{ fontSize: 20 }}\n              >\n                Anonymous / Logged-In\n              </Typography>\n              <Typography\n                value={0}\n                component={ToggleButton}\n                variant=\"h6\"\n                className=\"text\"\n                style={{ fontSize: 20 }}\n              >\n                None\n              </Typography>\n            </ToggleButtonGroup>\n          </Grid>\n        </Grid>\n        {/* Damaging & Goodfaith Inputs */}\n        <Grid item md={6} style={{ padding: 10, paddingTop: 0 }}>\n          <Typography variant=\"subtitle2\">Threshold Settings</Typography>\n          <Grid container>\n            <Grid\n              item\n              md={6}\n              style={{ display: \"inline-flex\", justifyContent: \"center\" }}\n            >\n              <h3 style={{ margin: 10, marginRight: 30, fontWeight: 500 }}>\n                Damaging:{\" \"}\n              </h3>\n              <ThresholdInput\n                value={this.state.damaging}\n                multiplier={100}\n                onChange={this.onDamagingChange}\n              />\n            </Grid>\n            <Grid\n              item\n              md={6}\n              style={{ display: \"inline-flex\", justifyContent: \"center\" }}\n            >\n              <h3 style={{ margin: 10, marginRight: 30, fontWeight: 500 }}>\n                Goodfaith:{\" \"}\n              </h3>\n              <ThresholdInput\n                value={this.state.goodfaith}\n                multiplier={100}\n                onChange={this.onGoodfaithChange}\n              />\n            </Grid>\n          </Grid>\n        </Grid>\n        {/* Graph + Slider */}\n        <Grid\n          item\n          md={6}\n          style={{\n            padding: 10,\n            paddingTop: 0,\n            borderTop: \"1px solid lightgrey\",\n            borderRight: \"1px solid lightgrey\",\n          }}\n        >\n          <Typography variant=\"subtitle2\">Edit Data Point</Typography>\n\n          <Slider\n            style={{ margin: \"0 5%\", marginTop: 30, width: \"90%\" }}\n            max={5e8}\n            marks={marks}\n            onChange={this.onSliderChange}\n            value={this.state.adjSeconds}\n          />\n          <div class=\"injectionGraph\" />\n        </Grid>\n        {/* Pie Charts */}\n        <Grid\n          item\n          md={6}\n          style={{\n            padding: 10,\n            paddingTop: 0,\n            borderTop: \"1px solid lightgrey\",\n          }}\n        >\n          <Typography variant=\"subtitle2\">Performance</Typography>\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              justifyContent: \"space-evenly\",\n              margin: \"0 3%\",\n              marginTop: 10,\n            }}\n          >\n            {this.state.curID == null ? (\n              <div className=\"legendCard\" style={{ padding: 5 }}>\n                <h3 style={{ margin: 10, fontWeight: 500 }}>\n                  No data point is currently selected\n                </h3>\n              </div>\n            ) : null}\n\n            <h3\n              style={{\n                color: this.state.curID == null ? \"grey\" : \"black\",\n                marginTop: 60,\n              }}\n            >\n              Damaging Score\n            </h3>\n            <div style={{ display: \"inline-flex\" }}>\n              {this.renderPieChart(\"New Score\", true, 0.67, 0.79)}\n              {this.renderPieChart(\"Original\", true, 0.79)}\n            </div>\n\n            <h3\n              style={{\n                color: this.state.curID == null ? \"grey\" : \"black\",\n                marginTop: 60,\n              }}\n            >\n              Goodfaith Score\n            </h3>\n            <div style={{ display: \"inline-flex\" }}>\n              {this.renderPieChart(\"New Score\", false, null, 0.31)}\n              {this.renderPieChart(\"Original\", false, 0.31)}\n            </div>\n          </div>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nexport default FeatureInjector;\n","import React, { Component } from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport \"../App.scss\";\nimport Circle, { Cross } from \"../../src/partials/shape\";\n\nclass About extends Component {\n  getMainContent(obj) {\n    return (\n      <div>\n        <Typography variant=\"subtitle1\" style={{ textAlign: \"left\" }}>\n          {obj.title}\n        </Typography>\n        <div\n          style={{\n            marginTop: \"10px\",\n            marginBottom: 25,\n          }}\n        >\n          <Typography variant=\"body2\" style={{ color: \"grey\" }}>\n            {obj.desc}{\" \"}\n          </Typography>\n        </div>\n      </div>\n    );\n  }\n\n  getPredTableItem(title, desc, icon) {\n    return (\n      <td class=\"predTableElem\">\n        {icon}\n        <div>\n          <div class=\"boldText\">{title}</div>\n          <p style={{ color: \"grey\" }}>{desc}</p>\n        </div>\n      </td>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"aboutPage\">\n        <div className=\"aboutSection\" style={{ width: \"50%\" }}>\n          {this.getMainContent({\n            title: \"About ORES\",\n            desc:\n              \"ORES is a web service that provides machine learning services for Wikimedia projects. The system is designed to help human editors perform critical wiki-work and to increase their productivity by automating tasks like detecting vandalism and removing edits made in bad faith.\",\n          })}\n          <a\n            href=\"https://ores.wikimedia.org/ui/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Try ORES API\n          </a>\n        </div>\n        <div className=\"container\">\n          <div style={{ width: \"50%\", borderRight: \"1px solid lightgrey\" }}>\n            <div className=\"aboutSection\">\n              {this.getMainContent({\n                title: \"How ORES Works\",\n                desc:\n                  \"ORES scores individual edits that are made to articles on Wikipedia. On the scale of 0 to 1, ORES scores describe the quality of edits and help humans determine which kinds of edits are damaging to articles and which kinds of edits are made in good faith.\",\n              })}\n              <table className=\"oresTable\" colspan={5}>\n                <tr>\n                  <td className=\"boldText\">Input</td>\n                  <td></td>\n                  <td className=\"boldText\">Model</td>\n                  <td></td>\n                  <td className=\"boldText\">Output</td>\n                </tr>\n                <tr>\n                  <td>\n                    <div className=\"aboutButton\">Edit: #124230</div>\n                  </td>\n                  <td>\n                    <img\n                      className=\"arrow\"\n                      src=\"about/arrow.png\"\n                      alt=\"is evaluated by\"\n                    />\n                  </td>\n                  <td>\n                    <div className=\"oresText\">ORES</div>\n                  </td>\n                  <td>\n                    <img\n                      className=\"arrow\"\n                      src=\"about/arrow.png\"\n                      alt=\"which gives scores: \"\n                    />\n                  </td>\n                  <td className=\"DGgrid\">\n                    <div>\n                      <div style={{ color: \"grey\", width: 75 }}>Damaging:</div>\n                      <div class=\"highlight bad\">0.87142</div>\n                    </div>\n                    <div>\n                      <div style={{ color: \"grey\", width: 75 }}>\n                        Goodfaith:{\" \"}\n                      </div>\n                      <div class=\"highlight good\">0.92245</div>\n                    </div>\n                  </td>\n                </tr>\n              </table>\n            </div>\n            <div\n              className=\"aboutSection\"\n              style={{ borderTop: \"1px solid lightgrey\" }}\n            >\n              {this.getMainContent({\n                title: \"How the Threshold Works\",\n                desc:\n                  \"Setting the threshold can change the way the model predicts. With different thresholds, the same score can have different prediction results\",\n              })}\n              <div class=\"thresList\">\n                <div>\n                  <div class=\"boldText\">Damaging Score:</div>\n                  <div class=\"highlight\">0.87142</div>\n                </div>\n              </div>\n              <div class=\"thresList\">\n                <div>\n                  <div>1. Threshold = 0.5</div>\n                  <div class=\"highlight bad\">Damaging</div>\n                </div>\n                <div>\n                  <div>2. Threshold = 0.9</div>\n                  <div class=\"highlight good\">Non-damaging</div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div\n            className=\"aboutSection\"\n            style={{ width: \"50%\", paddingLeft: 30 }}\n          >\n            {this.getMainContent({\n              title: \"Types of Predictions\",\n              desc:\n                \"Depending on what ORES predicts and whether the prediction is correct, there are four types of possible results: True Positives, False Positives, True Negatives, and False Negatives.\",\n            })}\n            <table\n              cellSpacing={0}\n              cellPadding={0}\n              style={{ margin: \"auto\", width: \"90%\" }}\n            >\n              <tr style={{ spacing: 0 }}>\n                {this.getPredTableItem(\n                  \"True Positive\",\n                  \"Actual damaging edits predicted as damaging\",\n                  <Circle color=\"#C57619\" size={12} />\n                )}\n                {this.getPredTableItem(\n                  \"False Positive\",\n                  \"Actual good edits predicted as damaging\",\n                  <Cross color=\"#C57619\" size={12} />\n                )}\n              </tr>\n              <tr>\n                {this.getPredTableItem(\n                  \"True Negative\",\n                  \"Actual good edits predicted as non-damaging\",\n                  <Circle color=\"#909090\" size={12} />\n                )}\n                {this.getPredTableItem(\n                  \"False Negative\",\n                  \"Actual damaging edits predicted as non-damaging\",\n                  <Cross color=\"#909090\" size={12} />\n                )}\n              </tr>\n            </table>\n            <table class=\"predLegend\" cellSpacing={0} cellPadding={0}>\n              <tr>\n                <td>\n                  <Circle size={12} color=\"#C57619\" />\n                  <Cross size={12} color=\"#C57619\" />\n                  <div class=\"text\">Damaging Prediction</div>\n                </td>\n                <td>\n                  <Circle size={12} color=\"#C57619\" />\n                  <Circle size={12} color=\"#909090\" />\n                  <div class=\"text\">Correct Prediction</div>\n                </td>\n              </tr>\n              <tr>\n                <td>\n                  <Circle size={12} color=\"#909090\" />\n                  <Cross size={12} color=\"#909090\" />\n                  <div class=\"text\">Non-Damaging Prediction</div>\n                </td>\n                <td>\n                  <Cross size={12} color=\"#C57619\" />\n                  <Cross size={12} color=\"#909090\" />\n                  <div class=\"text\">Incorrect Prediction</div>\n                </td>\n              </tr>\n            </table>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default About;\n","import React, { Component } from \"react\";\nimport Chart from \"./threshold_explorer/threshold_explorer_section\";\nimport GroupCompareChart from \"./group_compare/section\";\nimport Recommender from \"./recommender\";\nimport FeatureInjector from \"./injection\";\nimport Typography from \"@material-ui/core/Typography\";\nimport data_performance from \"../data/performance.csv\";\nimport * as d3 from \"d3\";\nimport styled from \"styled-components\";\nimport { Route, Switch } from \"react-router-dom\";\nimport About from \"./about\";\n\nexport const SectionHeader = styled.div`\n  padding-left: 10px;\n  padding-top: 10px;\n  padding-bottom: 30px;\n  border-bottom: 1px solid lightgrey;\n`;\n\nexport const Section = styled.div`\n  display: block;\n  margin-bottom: 0vh;\n`;\n\nclass MainContent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      performance_data: null,\n      change: 0,\n    };\n  }\n\n  componentDidMount() {\n    d3.csv(data_performance, (d) => {\n      return {\n        threshold: +d.threshold,\n        damaging_accuracy: +d.damaging_accuracy,\n        damaging_fpr: +d.damaging_fpr,\n        damaging_fnr: +d.damaging_fnr,\n        faith_accuracy: +d.faith_accuracy,\n        faith_fpr: +d.faith_fpr,\n        faith_fnr: +d.faith_fnr,\n      };\n    }).then((data) => {\n      this.setState({ performance_data: data });\n      this.setState({ change: 1 });\n    });\n  }\n\n  sectionHeader(title, description) {\n    return (\n      <SectionHeader>\n        <Typography variant=\"subtitle1\" style={{ textAlign: \"left\" }}>\n          {title}\n        </Typography>\n        <div\n          style={{\n            width: \"50%\",\n            marginTop: \"10px\",\n          }}\n        >\n          <Typography variant=\"body2\" style={{ color: \"grey\" }}>\n            {description}{\" \"}\n          </Typography>\n        </div>\n      </SectionHeader>\n    );\n  }\n\n  render() {\n    return (\n      <Switch>\n        <Route path=\"/recommender\">\n          <Section>\n            {this.sectionHeader(\n              \"Threshold Recommender\",\n              \"The threshold recommender helps you decide a threshold that aligns with your model preferences.\"\n            )}\n            <Recommender\n              performanceData={this.state.performance_data}\n              key={this.state.change}\n            />\n          </Section>\n        </Route>\n        <Route path=\"/disparity\">\n          <Section>\n            {this.sectionHeader(\n              \"Disparity Visualizer\",\n              \"This visualization provides insights on how the model performs for wikis edited by different user groups; this may help you weigh the pros and cons of picking the threshold.\"\n            )}\n            <GroupCompareChart\n              performanceData={this.state.performance_data}\n              key={this.state.change}\n            />\n          </Section>\n        </Route>\n        <Route path=\"/explorer\">\n          <Section>\n            {this.sectionHeader(\n              \"Threshold Explorer\",\n              \"Threshold Explorer helps you visualize model performance under specific thresholds with an example dataset. To start, select a model below, then pick a threshold.\"\n            )}\n            <Chart\n              performanceData={this.state.performance_data}\n              key={this.state.change}\n            />\n          </Section>\n        </Route>\n        <Route path=\"/injection\">\n          {this.sectionHeader(\n            \"Feature Injection\",\n            \"Besides the edit content, ORES also makes predictions based on the experience of the editor. Feature injection allows you to select and edit and see how the prediction changes if it's made by a different editor.\"\n          )}\n          <FeatureInjector />\n        </Route>\n        <Route component={About} />\n      </Switch>\n    );\n  }\n}\n\nexport default MainContent;\n","import React, { Component } from \"react\";\nimport List from \"@material-ui/core/List\";\nimport Typography from \"@material-ui/core/Typography\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Box from \"@material-ui/core/Box\";\nimport { Link } from \"react-router-dom\";\nimport \"../App.scss\";\n\nclass DrawerList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { selected: -1 };\n    this.clickSection = this.clickSection.bind(this);\n  }\n\n  clickSection(index) {\n    this.setState({ selected: index });\n    console.log(\"ha\");\n    console.log(index);\n  }\n\n  render() {\n    return (\n      <List style={{ marginTop: \"10vh\" }}>\n        {[\n          { text: \"About ORES\", path: \"/about-ores\" },\n          { text: \"Threshold Explorer\", path: \"/explorer/\" },\n          { text: \"Disparity Visualizer\", path: \"/disparity/\" },\n          { text: \"Threshold Recommender\", path: \"/recommender/\" },\n          //   { text: \"Feature Injection\", path: \"/injection\" },\n        ].map((obj, index) => (\n          <Link to={obj.path}>\n            <ListItem\n              className={this.props.klass}\n              button\n              key={obj.text}\n              onClick={() => this.clickSection(index)}\n            >\n              <div style={{ width: \"12.5%\" }} />\n              <div style={{ width: \"87.5%\" }}>\n                <Typography component=\"div\">\n                  <Box\n                    className={\n                      this.state.selected === index\n                        ? \"active-section\"\n                        : \"inactive-section\"\n                    }\n                  >\n                    {obj.text}\n                  </Box>\n                </Typography>\n              </div>\n            </ListItem>\n          </Link>\n        ))}\n      </List>\n    );\n  }\n}\n\nexport default DrawerList;\n","import React from \"react\";\nimport \"./App.scss\";\nimport Box from \"@material-ui/core/Box\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport List from \"@material-ui/core/List\";\nimport Typography from \"@material-ui/core/Typography\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport { createMuiTheme, responsiveFontSizes } from \"@material-ui/core/styles\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport MainContent from \"./components/content\";\nimport DrawerList from \"./partials/drawerList\";\nimport { BrowserRouter, Link } from \"react-router-dom\";\n\nconst drawerWidth = 270;\n\nlet theme = createMuiTheme({\n  typography: {\n    root: {\n      component: \"div\",\n    },\n    fontFamily: \"Noto Sans KR\",\n    subtitle1: {\n      fontFamily: \"Noto Serif\",\n      fontSize: \"24px\",\n    },\n    subtitle2: {\n      fontSize: \"12px\",\n      marginTop: \"10px\",\n      color: \"#B0B0B0\",\n      fontWeight: \"bold\",\n      textTransform: \"uppercase\",\n      textAlign: \"left\",\n    },\n    h6: {\n      fontWeight: \"bold\",\n      fontSize: \"16px\",\n      textAlign: \"left\",\n    },\n    body1: {\n      // textAlign: 'left',\n      fontSize: \"14px\",\n    },\n    body2: {\n      textAlign: \"left\",\n      fontSize: \"14px\",\n    },\n    button: {\n      fontStyle: \"italic\",\n    },\n    h5: {\n      fontSize: \"15px\",\n      color: \"#3777a5\",\n      fontWeight: \"bold\",\n      textTransform: \"none\",\n      textAlign: \"left\",\n    },\n  },\n});\n\ntheme = responsiveFontSizes(theme);\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    // fontFamily: 'Noto Sans, sans-serif',\n  },\n  appBar: {\n    width: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: drawerWidth,\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n    textAlign: \"center\",\n    position: \"relative\",\n  },\n  drawerPaper: {\n    width: drawerWidth,\n    paddingTop: \"35px\",\n    paddingBottom: \"35px\",\n  },\n  paper: {\n    textAlign: \"left\",\n    padding: \"20px 20px\",\n  },\n  list: {\n    fontSize: \"16px\",\n    textDecoration: \"none\",\n  },\n  // necessary for content to be below app bar\n  toolbar: {\n    padding: theme.spacing(2),\n  },\n  content: {\n    width: `calc(100% - ${drawerWidth}px)`,\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.default,\n    padding: \"1.5vh\",\n    height: \"100vh\",\n  },\n}));\n\nfunction App() {\n  const classes = useStyles();\n  return (\n    <BrowserRouter basename={process.env.PUBLIC_URL + \"/\"}>\n      <ThemeProvider theme={theme}>\n        <div className=\"App\">\n          <body>\n            <div className={classes.root}>\n              <Drawer\n                className={classes.drawer}\n                variant=\"permanent\"\n                classes={{ paper: classes.drawerPaper }}\n                anchor=\"left\"\n              >\n                <Link to=\"/\">\n                  <Paper className={classes.paper} elevation=\"0\">\n                    <div style={{ textAlign: \"center\" }}>\n                      <Typography variant=\"subtitle1\">WIKIPEDIA</Typography>\n                      <Typography style={{ textAlign: \"center\" }}>\n                        ORES Explorer\n                      </Typography>\n                    </div>\n                  </Paper>\n                </Link>\n                <DrawerList klass={classes.list} />\n                <List\n                  style={{\n                    position: \"absolute\",\n                    bottom: \"120px\",\n                    width: \"100%\",\n                  }}\n                >\n                  {[\n                    // { text: \"About ORES Explorer\", path: \"/about-us\" },\n                    // { text: \"External Resources\", path: \"/external\" },\n                  ].map((obj, index) => (\n                    <Link to={obj.path}>\n                      <ListItem className={classes.list} button key={obj.text}>\n                        <div style={{ width: \"12.5%\" }} />\n                        <div style={{ width: \"87.5%\" }}>\n                          <Typography component=\"div\">\n                            <Box color=\"#989898\">{obj.text}</Box>\n                          </Typography>\n                        </div>\n                      </ListItem>\n                    </Link>\n                  ))}\n                </List>\n              </Drawer>\n              <main className={classes.content}>\n                <MainContent />\n              </main>\n            </div>\n          </body>\n        </div>\n      </ThemeProvider>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render (\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById ('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister ();\n"],"sourceRoot":""}