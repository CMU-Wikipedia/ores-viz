(this["webpackJsonpores-viz"]=this["webpackJsonpores-viz"]||[]).push([[0],{104:function(e,t,a){e.exports=a.p+"static/media/data_not-balanced.2c5d8911.csv"},105:function(e,t,a){e.exports=a.p+"static/media/data_balanced_1.718935bd.csv"},106:function(e){e.exports=JSON.parse('{"name":"data","children":[{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100}]}')},107:function(e,t,a){e.exports=a.p+"static/media/performance.760a321c.csv"},167:function(e,t,a){e.exports=a(196)},172:function(e,t,a){},196:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(19),l=a.n(i),o=(a(172),a(81),a(230)),s=a(225),c=a(228),d=a(231),h=a(227),m=a(197),u=a(234),g=a(111),p=a(235),f=a(229),v=a(8),y=a(9),E=a(11),b=a(10),x=a(82),w=a(112),C=a(7),k=a(2),T=a(6),O=a(237),P=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).getText=function(e){return"".concat(e,"%")},n.state={},n.getText=n.getText.bind(Object(C.a)(n)),n}return Object(y.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{position:"relative",marginTop:"5px"}},r.a.createElement("div",{style:{position:"absolute",width:"100%",top:"10px",display:"flex",justifyContent:"space-between"}},r.a.createElement(m.a,{style:{textAlign:"left",fontWeight:"bold"}},[r.a.createElement("span",null,"\u25c0")," Identify More"]),r.a.createElement(m.a,{variant:"body2",style:{color:"gray",textAlign:"center"}},null!=this.props.middleText?this.props.middleText():null),r.a.createElement(m.a,{style:{textAlign:"right",fontWeight:"bold"}},["Identify Less ",r.a.createElement("span",null,"\u25b6")])),r.a.createElement("div",null,"orange"===this.props.color?r.a.createElement(_,{value:this.props.value,valueLabelDisplay:"auto",valueLabelFormat:this.getText,"aria-label":"pretto slider",defaultValue:this.props.defaultValue,onChange:this.props.onChangeCommitted,onChangeCommitted:this.props.onChangeCommitted}):r.a.createElement(j,{value:this.props.value,valueLabelDisplay:"auto",valueLabelFormat:this.getText,"aria-label":"pretto slider",defaultValue:this.props.defaultValue,onChange:this.props.onChangeCommitted,onChangeCommitted:this.props.onChangeCommitted})))}}]),a}(n.Component),_=Object(T.a)({root:{color:"#C57619",height:10,marginTop:"50px",padding:"0px"},thumb:{height:18,width:18,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50%+12px)",fontWeight:"bold"},track:{height:4,borderRadius:4,color:"#909090"},rail:{height:4,borderRadius:4,color:"#C57619",opacity:"100%"}})(O.a),j=Object(T.a)({root:{color:"#000000",height:10,marginTop:"50px",padding:"0px"},thumb:{height:18,width:18,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50%+12px)",fontWeight:"bold"},track:{height:4,borderRadius:4,color:"#909090"},rail:{height:4,borderRadius:4,color:"#000000",opacity:"100%"}})(O.a),S=a(221),N=a(232),D=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(){return Object(v.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,{component:"div",variant:"h6",className:"text"},r.a.createElement(N.a,{value:(this.props.value*this.props.multiplier).toFixed(0),onChange:this.props.onChange,endAdornment:r.a.createElement(S.a,{position:"end"},r.a.createElement(m.a,{variant:"h6",className:"text",style:{fontWeight:600}},"%")),inputProps:{step:1,min:0,max:100,type:"number"},style:{fontSize:20,width:80,fontWeight:600}}))}}]),a}(n.Component),R=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).chartPerformanceRef=r.a.createRef(),n.getBoxHeight=n.getBoxHeight.bind(Object(C.a)(n)),n.getWidthHeightRatio=n.getWidthHeightRatio.bind(Object(C.a)(n)),n.getMargin=n.getMargin.bind(Object(C.a)(n)),n.getWidth=n.getWidth.bind(Object(C.a)(n)),n.drawChart=n.drawChart.bind(Object(C.a)(n)),n.redrawChart=n.redrawChart.bind(Object(C.a)(n)),n.state={threshold:80,width:1e3,height:1e3},n}return Object(y.a)(a,[{key:"getWidthHeightRatio",value:function(){return 2.4}},{key:"getWidth",value:function(){return null==this.chartPerformanceRef.current?this.state.width:this.chartPerformanceRef.current.parentElement.offsetWidth}},{key:"getMargin",value:function(){return{top:30,right:5,bottom:20,left:30,inBetween:.2*this.state.width}}},{key:"componentDidMount",value:function(){var e,t=this,a=this.getWidth(),n=a*this.getWidthHeightRatio();this.setState({width:a,height:n},(function(){t.drawChart()})),window.addEventListener("resize",(function(){clearTimeout(e),e=setTimeout((function(){t.redrawChart()}),200)}))}},{key:"redrawChart",value:function(){var e=this.getWidth();this.setState({width:e,height:e*this.getWidthHeightRatio()}),k.m(".performanceChart svg").remove(),this.drawChart=this.drawChart.bind(this),this.drawChart()}},{key:"drawChart",value:function(){var e=this;if(null!=this.props.performance_data){var t=this.props.damaging,a=[this.props.performance_data.map((function(e){return{threshold:e.threshold,value:Math.round(100*(t?e.damaging_accuracy:e.faith_accuracy))}})),this.props.performance_data.map((function(e){return{threshold:e.threshold,value:Math.round(100*(t?e.damaging_fpr:e.faith_fpr))}})),this.props.performance_data.map((function(e){return{threshold:e.threshold,value:Math.round(100*(t?e.damaging_fnr:e.faith_fnr))}}))],n=this.getMargin(),r=this.state.width-n.left-n.right,i=this.state.height-n.top-n.bottom,l=(i-2*n.inBetween)/3,o=k.m(".performanceChart").append("svg").attr("width",r+n.left+n.right).attr("height",i+n.top+n.bottom),s=function(e,t){return"stroke"===e?1===t?k.e("#159256"):0===t?k.e("#878787"):k.e("#921515"):1===t?k.e("#F0F7F4"):0===t?k.e("#E8E8E8"):k.e("#F7F0F0")},c=function(e,t,a){return s("stroke",0===e?t<a?1:t>a?-1:0:t<a?-1:t>a?1:0)};a.forEach((function(t,d){var h=t[50].value,m=t[e.props.threshold].value,u=e.props.threshold,g=k.l().domain([0,k.i(t,(function(e){return e.threshold}))]).nice().range([n.left,r-n.right]),p=function(e){switch(e){case 0:return k.l().domain([0,k.i(a[0],(function(e){return e.value}))]).nice().range([l+n.top,n.top]);case 1:return k.l().domain([0,k.i(a[1],(function(e){return e.value}))]).nice().range([2*l+n.inBetween+n.top,l+n.inBetween+n.top]);default:return k.l().domain([0,k.i(a[2],(function(e){return e.value}))]).nice().range([i+n.top,2*l+2*n.inBetween+n.top])}}(d),f=function(e,t){switch(t){case 0:return function(t){t.attr("transform","translate(0,".concat(l+n.top,")")).attr("class","axisGreyY").call(k.c(e).tickSize(0))};case 1:return function(t){t.attr("transform","translate(0,".concat(2*l+n.inBetween+n.top,")")).attr("class","axisGreyY").call(k.c(e).tickSize(0))};default:return function(t){t.attr("transform","translate(0,".concat(i+n.top,")")).attr("class","axisGreyY").call(k.c(e).tickSize(0))}}}(g,d),v=k.h().defined((function(e){return!isNaN(e.value)})).x((function(e){return g(e.threshold)})).y((function(e){return p(e.value)})),y=k.b().defined((function(e){return t=.5,a=.01*u,(n=e.threshold)>=t&&n<=a||n<=t&&n>=a;var t,a,n})).x((function(e){return g(e.threshold)})).y0(p(0)).y1((function(e){return p(e.value)}));o.append("path").datum(t.filter(y.defined())).attr("fill",function(e,t,a){return s("area",0===e?t<a?1:t>a?-1:0:t<a?-1:t>a?1:0)}(d,h,m)).attr("d",y),o.append("path").datum(t).attr("fill","none").attr("stroke","grey").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("d",v),o.append("line").attr("x1",g(.01*u)).attr("y1",p(m)).attr("x2",g(.01*u)).attr("y2",n.top+d*n.inBetween+(d+1)*l).attr("stroke-width",2).attr("stroke",c(d,h,m)).style("stroke-dasharray","5,5"),o.append("line").attr("x1",g(.5)).attr("y1",p(h)).attr("x2",g(.5)).attr("y2",n.top+d*n.inBetween+(d+1)*l).attr("stroke-width",2).attr("stroke",k.e("#D2D2D2")),o.append("text").attr("x",g(.01*u)).attr("y",p(m+8)).attr("text-anchor","middle").text("".concat(m,"%")).attr("font-size","20px").attr("font-weight","600").attr("fill",c(d,h,m)),o.append("g").call(f),o.append("g").call((function(e){return e.attr("transform","translate(".concat(n.left,",0)")).attr("class","axisGrey").call(k.d(p).ticks(2))}))}))}}},{key:"getBoxHeight",value:function(){var e=this.getMargin();return(this.state.height-e.top-e.bottom-2*e.inBetween)/3}},{key:"render",value:function(){var e=this.props.damaging?"damaging":"good faith",t=this.props.damaging?"good":"bad faith";return r.a.createElement("div",{style:{marginTop:"0px"}},r.a.createElement("div",{style:{width:"50%",display:"inline-block",verticalAlign:"top"}},r.a.createElement("div",{style:{marginTop:"20px"},className:"performanceChart",ref:this.chartPerformanceRef})),r.a.createElement("div",{style:{width:"50%",display:"inline-block",verticalAlign:"top"}},r.a.createElement("div",{style:{height:"".concat(this.getBoxHeight(),"px"),padding:"0% 5%",display:"flex",flexDirection:"column",justifyContent:"center",marginTop:"".concat(this.getMargin().top+20,"px"),marginBottom:"".concat(this.getMargin().inBetween,"px")}},r.a.createElement("div",null,r.a.createElement(m.a,{variant:"h6",textAlign:"center"},"Accuracy"," "),r.a.createElement(m.a,{variant:"body2"},"Correctly predicted edits out of all edits"," "))),r.a.createElement("div",{style:{height:"".concat(this.getBoxHeight(),"px"),padding:"0% 5%",display:"flex",flexDirection:"column",justifyContent:"center",marginBottom:"".concat(this.getMargin().inBetween,"px")}},r.a.createElement("div",null,r.a.createElement(m.a,{variant:"h6",textAlign:"center"},"False Positive Rate"),r.a.createElement(m.a,{variant:"body2"},"Percentage of ",t," edits that are falsely identified as"," ",e," "))),r.a.createElement("div",{style:{height:"".concat(this.getBoxHeight(),"px"),padding:"0% 5%",display:"flex",flexDirection:"column",justifyContent:"center"}},r.a.createElement("div",null,r.a.createElement(m.a,{variant:"h6",textAlign:"center"},"False Negative Rate"),r.a.createElement(m.a,{variant:"body2"},"Percentage of ",e," edits that won\u2019t be identified"," ")))))}}]),a}(n.Component),F=a(222),A=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(v.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(y.a)(a,[{key:"render",value:function(){var e=this.props.size/2;return r.a.createElement("svg",{height:2*e,width:2*e},r.a.createElement("circle",{cx:e,cy:e,r:e,fill:this.props.color}))}}]),a}(n.Component),M=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(v.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(y.a)(a,[{key:"render",value:function(){var e=this.props.size;return r.a.createElement("svg",{height:e,width:e},r.a.createElement("line",{x1:"0",y1:"0",x2:e,y2:e,stroke:this.props.color,strokeWidth:2}),r.a.createElement("line",{x1:"0",y1:e,x2:e,y2:"0",stroke:this.props.color,strokeWidth:2}))}}]),a}(n.Component),z=A,W=a(238),B=a(223),H=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(){return Object(v.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"render",value:function(){return r.a.createElement(F.a,{item:!0,xs:this.props.gridSize,className:"modelOptions"},r.a.createElement(m.a,{component:"div",variant:"subtitle2"},r.a.createElement(o.a,null,"MODEL OPTIONS")),r.a.createElement(W.a,{exclusive:!0,value:this.props.damaging,onChange:this.props.onChange,className:"options"},r.a.createElement(m.a,{component:B.a,value:!0,variant:"h6",className:"text"},"Damaging Model"),r.a.createElement(m.a,{value:!1,component:B.a,variant:"h6",className:"text"},"GoodFaith Model")))}}]),a}(n.Component),I=a(28),L=a.n(I),G=a(70),q=a(47),U=a.n(q),V=a(54),Y=a.n(V);function $(e){return J.apply(this,arguments)}function J(){return(J=Object(G.a)(L.a.mark((function e(t){var a,n,r,i,l;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(e){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)},a="https://cors-anywhere.herokuapp.com/",n="https://en.wikipedia.org/w/api.php",r="",i="",e.next=7,U.a.get(a+n+"?format=json&action=query&revids="+t+"&prop=revisions").then((function(e){var t=e.data.query.pages[Object.keys(e.data.query.pages)[0]],a=t.revisions[0],n=new Date(a.timestamp);r="<strong>Article Title: </strong>"+t.title+"<h5>Edited by "+(l(a.user)?"Anonymous":a.user)+" at "+n.toLocaleTimeString()+" on "+n.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})+"</h5>\n",""!==a.comment&&(r=r+"<strong>Comment from editor: </strong><p>"+a.comment+"</p>")}),(function(e){}));case 7:return e.next=9,U.a.get(a+n+"?&action=compare&torelative=prev&prop=diff&fromrev="+t+"&format=json").then((function(e){i="<table><tr class='header'><td class='before' colspan='2'>Before</td><td class='after' colspan='2'>After</td></tr>"+e.data.compare["*"]+"</table>"}),(function(e){}));case 9:if(""===r&&""===i){e.next=11;break}return e.abrupt("return","<div class='apirow'>"+r+i+"</div>");case 11:return e.abrupt("return","");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=function e(t,a,n,i,l,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,d=k.m(o).append("div").attr("class","tooltip");if(1===s){var h=a?"damaging":"good faith",m=a?"good":"bad faith",u=t.correct?"True":"False",g=u+(t.predict?" Positive":" Negative"),p=1===c?"#3777a5":"#C57619",f="#909090",v="This was a";"True Negative"===g&&(v=v+" correctly classified "+m+" edit."),"False Negative"===g&&(v=v+"n uncaught "+h+" edit"),"True Positive"===g&&(v=v+" correctly classified "+h+" edit."),"False Positive"===g&&(v=v+" mis-classified "+m+" edit.");var y="";"True Negative"===g&&(y=Y.a.renderToString(r.a.createElement(z,{size:10,color:f}))),"False Negative"===g&&(y=Y.a.renderToString(r.a.createElement(M,{size:10,color:f}))),"True Positive"===g&&(y=Y.a.renderToString(r.a.createElement(z,{size:10,color:p}))),"False Positive"===g&&(y=Y.a.renderToString(r.a.createElement(M,{size:10,color:p}))),console.log(y),d.attr("class","tooltip small").style("width","200px").html("<div class='main'><div style='margin-top:0px; display:inline;'>"+y+"<strong>"+g+"</strong></div><div>"+v+'</div><em style="font-weight:600; margin-bottom:0px;">Click for more details about the edit.</em></div>').on("click",(function(){return e(t,a,n,i,l,o,0)}))}else{var E=a?"damaging":"in good faith",b=a?"not damaging":"in bad faith",x="<div class='apirow'><strong>Loading...</strong><progress/></div>",w='<div class="main"><strong>Revision ID: </strong><a href="https://en.wikipedia.org/w/index.php?title=&diff=prev&oldid='+t.rev_id+'" target="_blank">'+t.rev_id+"</a><div class='row'>\n<div><strong>Prediction: </strong>"+(t.predict?E:b)+"</div>\n<div><strong>Actual: </strong>"+(t.predict===t.correct?E:b)+'</div></div><div class="row"><div style="width: 100%;"><strong>User Info: </strong>'+(t.newcomer?"Newcomer":"Experienced")+" and "+(t.anonymous?"Anonymous":"Logged-In")+"</div>\n</div></div>\n";$(t.rev_id).then((function(e){return d.html(w+e)})),d.html(w+x)}d.style("position","absolute").style("left",n(t.x)+"px");var C=t.y+i.top,T=Number.parseInt(d.style("height"));C+T>l+100&&(C-=T),d.style("top",C+"px")},Z=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).onSliderChange=function(e,t){n.setState({threshold:t}),k.m(".rowChart svg").remove(),n.drawChart=n.drawChart.bind(Object(C.a)(n)),n.drawChart()},n.onTextChange=function(e){""!==e.target.value&&(n.state.threshold=e.target.value,n.setState({threshold:e.target.value}),k.m(".rowChart svg").remove(),n.drawChart=n.drawChart.bind(Object(C.a)(n)),n.drawChart())},n.onTypeChange=function(e,t){null!=t&&(n.setState({damaging:t}),n.state.damaging=t,k.m(".rowChart svg").remove(),n.drawChart=n.drawChart.bind(Object(C.a)(n)),n.drawChart())},n.chartRef=r.a.createRef(),n.getWidth=n.getWidth.bind(Object(C.a)(n)),n.drawChart=n.drawChart.bind(Object(C.a)(n)),n.redrawChart=n.redrawChart.bind(Object(C.a)(n)),n.state={threshold:60,width:1e3,height:1e3,widthHeightRatio:.8,graph1Scale:1,dotWidth:0,sliderRange:[20,1e3],damaging:!0},n}return Object(y.a)(a,[{key:"getWidth",value:function(){return null==this.chartRef.current?this.state.width:this.chartRef.current.parentElement.offsetWidth}},{key:"componentDidMount",value:function(){var e,t=this,a=this.getWidth(),n=.8*a,r=a-30;this.setState({width:a,height:n,sliderRange:[10,r],damaging:!0},(function(){t.drawChart()})),window.addEventListener("resize",(function(){clearTimeout(e),e=setTimeout((function(){t.redrawChart()}),200)}))}},{key:"redrawChart",value:function(){var e=this.getWidth(),t=e-30;this.setState({width:e,height:.8*e,sliderRange:[10,t],damaging:this.state.damaging}),k.m(".rowChart svg").remove(),this.drawChart=this.drawChart.bind(this),this.drawChart()}},{key:"drawChart",value:function(){var e={top:0,right:30,bottom:30,left:10},t=this.state.width-e.left-e.right,a=this.state.height-e.top-e.bottom,n=k.m(".rowChart").append("svg").attr("width",t+e.left+e.right).attr("height",a+e.top+e.bottom),r=this.state.threshold/100,i=this.state.damaging,l=1*t/50,o=.5*l;if(null!=this.props.data){var s=function(e,t,a,n){var r,i=t.map((function(t){return{rev_id:t.rev_id,anonymous:t.anonymous,newcomer:t.newcomer,xvalue:parseFloat(n?t.confidence_damage:t.confidence_faith).toFixed(2),x:.02*Math.ceil(50*parseFloat(n?t.confidence_damage:t.confidence_faith).toFixed(2)),correct:parseFloat(n?t.confidence_damage:t.confidence_faith).toFixed(2)>=e===n?t.damaging_label:t.faith_label,predict:parseFloat(n?t.confidence_damage:t.confidence_faith).toFixed(2)>=e,label:n?t.damaging_label:t.faith_label}})).sort((function(e,t){if(e.x===t.x){var a=e.correct?1:0;return(t.correct?1:0)-a}return t.x-e.x})),l=100,o=1,s=Object(w.a)(i);try{for(s.s();!(r=s.n()).done;){var c=r.value;Math.abs(l-c.x)<1e-4?(o+=1,c.y=a*o):(l=c.x,o=1,c.y=a),c.correct?c.category=1:c.category=0,c.predict?c.color=k.e("#C57619"):c.color=k.e("#909090")}}catch(d){s.e(d)}finally{s.f()}return i}(r,this.props.data,l,this.state.damaging),c=k.l().domain([0,1]).nice().range([e.left,t+e.left]),d={draw:function(e,t){var a=Math.sqrt(2*t)/2,n=Math.sqrt(t)/6;e.moveTo(-a,n),e.lineTo(a,n),e.lineTo(a,-n),e.lineTo(-a,-n),e.closePath(),e.moveTo(n,a),e.lineTo(n,-a),e.lineTo(-n,-a),e.lineTo(-n,a),e.closePath()}};n.append("line").attr("x1",t+e.left-100*o*(1-r)).attr("y1",e.top).attr("x2",t+e.left-100*o*(1-r)).attr("y2",a-30).attr("stroke-width",2).attr("stroke","black").style("stroke-dasharray","5,5");var h=100*r+"%";n.append("text").attr("x",t+e.left-100*o*(1-r)).attr("y",a-15).attr("text-anchor","middle").text(h).attr("font-family","sans-serif").attr("font-size","15px"),n.append("g").selectAll("path").data(s).join("path").attr("transform",(function(t){return"translate(".concat(c(t.x),",").concat(t.y+e.top,"), rotate(45)")})).attr("fill",(function(e){return e.color})).style("cursor","pointer").attr("d",k.n().type((function(e){return 0===e.category?d:k.o})).size(l*l*.4)).on("click",(function(t){return K(t,i,c,e,a,".rowChart")})).on("mouseover",(function(t){k.m(".rowChart div").remove(),k.m(".rowChart .tooltip.small").remove(),K(t,i,c,e,a,".rowChart",1,0)})).on("mouseout",(function(e){k.m(".rowChart .tooltip.small").remove()}))}}},{key:"getClickTip",value:function(){return r.a.createElement("span",null,r.a.createElement("strong",null,"TIP:")," Click on a revision (cross or circle) to view more details.")}},{key:"render",value:function(){var e=this.state.damaging?"damaging":"good faith",t=this.state.damaging?"good":"bad faith";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:"55%",display:"inline-block",verticalAlign:"top",position:"relative"}},r.a.createElement("div",{className:"upperSettings"},r.a.createElement(F.a,{container:!0,spacing:0},r.a.createElement(H,{damaging:this.state.damaging,onChange:this.onTypeChange,gridSize:9,key:this.state.damaging}),r.a.createElement(F.a,{item:!0,xs:3,className:"threshold"},r.a.createElement("div",{className:"innerBox"},r.a.createElement(m.a,{variant:"subtitle2"},"threshold"),r.a.createElement(F.a,{container:!0,spacing:2,className:"options"},r.a.createElement(F.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement(D,{value:this.state.threshold,multiplier:1,onChange:this.onTextChange}))))))),r.a.createElement("div",{style:{marginLeft:"".concat(this.state.sliderRange[0],"px"),width:"".concat(this.state.sliderRange[1]-this.state.sliderRange[0],"px")}},r.a.createElement(m.a,{variant:"subtitle2"},"VISUALIZATION"),r.a.createElement(P,{value:this.state.threshold,middleText:this.getClickTip,onChangeCommitted:this.onSliderChange,color:"orange"})),r.a.createElement("div",{className:"rowChart",ref:this.chartRef,style:{position:"relative"}}),r.a.createElement("div",{className:"legendCard",id:"explorerLegend"},r.a.createElement(m.a,{component:"div",variant:"subtitle2"},"legend"),r.a.createElement(F.a,{container:!0,spacing:0,style:{marginTop:"10px"}},r.a.createElement(F.a,{item:!0,xs:12},r.a.createElement("div",{className:"legendMark"},r.a.createElement(z,{size:12,color:"#909090"})," ",r.a.createElement(m.a,{component:"span",variant:"body2"},r.a.createElement("strong",{style:{color:"#909090",marginRight:5}},"True Negative"),"Correctly classified ",t," edits"," "))),r.a.createElement(F.a,{item:!0,xs:12},r.a.createElement("div",{className:"legendMark"},r.a.createElement(M,{size:12,color:"#909090"})," ",r.a.createElement(m.a,{component:"span",variant:"body2"},r.a.createElement("strong",{style:{color:"#909090",marginRight:5}},"False Negative")," ","Uncaught ",e," edits"," "))),r.a.createElement(F.a,{item:!0,xs:12},r.a.createElement("div",{className:"legendMark"},r.a.createElement(z,{size:12,color:"#C57619"})," ",r.a.createElement(m.a,{component:"span",variant:"body2"},r.a.createElement("strong",{style:{color:"#C57619",marginRight:5}},"True Positive"),"Correctly classified ",e," edits"," "))),r.a.createElement(F.a,{item:!0,xs:12},r.a.createElement("div",{className:"legendMark"},r.a.createElement(M,{size:12,color:"#C57619"})," ",r.a.createElement(m.a,{component:"span",variant:"body2"},r.a.createElement("strong",{style:{color:"#C57619",marginRight:5}},"False Positive")," ","Mis-classified ",t," edits"," ")))))),r.a.createElement("div",{className:"sidePanel"},r.a.createElement(m.a,{variant:"subtitle2"},"PERFORMANCE"),r.a.createElement("div",{className:"legendCard",style:{paddingTop:10,margin:10,marginTop:20,marginBottom:0,fontSize:15}},"The graphs and chart on this page refer to ORES's predictions on a set of sample data. You can learn more about the dataset"," ",r.a.createElement("a",{href:"",target:"_blank",rel:"noopener noreferrer",style:{fontWeight:600}},"here"),"."),r.a.createElement(R,{performance_data:this.props.performance_data,threshold:this.state.threshold,key:[this.state.damaging,this.state.threshold],damaging:this.state.damaging})))}}]),a}(n.Component),Q=a(104),X=a.n(Q),ee=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={data:null,change:0},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=this;k.f(X.a,(function(e){return{confidence_faith:+e.confidence_faith,faith_label:"True"===e.goodfaith,confidence_damage:+e.confidence_damage,damaging_label:"True"===e.damaging,rev_id:+e.rev_id,anonymous:"True"===e.anonymous,newcomer:e.edit_years<=8}})).then((function(t){e.setState({data:t.slice(0,2e3)}),e.setState({change:2})}))}},{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"render",value:function(){return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Z,{data:this.state.data,performance_data:this.props.performanceData,key:this.state.change}))}}]),a}(n.Component),te=a(105),ae=a.n(te),ne=a(106),re=function(e){var t=e[0],a=e[1],n=e[2],r=e[3];return[(t+a)/(t+a+n+r),n/(n+a),r/(r+t)]},ie=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).onTypeChange=function(e,t){if(null!=t){var a=0,r=0,i=0;if(null!=n.props.performanceData){var l=n.props.performanceData;a=100*(t?l[50].damaging_accuracy:l[50].faith_accuracy),r=100*(t?l[50].damaging_fpr:l[50].faith_fpr),i=100*(t?l[50].damaging_fnr:l[50].faith_fnr)}n.setState({damaging:t,defaultPerformance:[a.toFixed(1),r.toFixed(1),i.toFixed(1)]}),n.state.damaging=t,n.state.defaultPerformance=[a.toFixed(1),r.toFixed(1),i.toFixed(1)],n.getWholePerformance(),k.m(".compareChart svg").remove(),n.drawChart=n.drawChart.bind(Object(C.a)(n)),n.drawChart(),k.m(".comparePerformance svg").remove(),n.drawPerformanceChart=n.drawPerformanceChart.bind(Object(C.a)(n)),n.drawPerformanceChart()}},n.onSliderChange=function(e,t){n.setState({threshold:t}),n.getWholePerformance(),k.m(".compareChart svg").remove(),n.drawChart=n.drawChart.bind(Object(C.a)(n)),n.drawChart(),k.m(".comparePerformance svg").remove(),n.drawPerformanceChart=n.drawPerformanceChart.bind(Object(C.a)(n)),n.drawPerformanceChart()},n.onTextChange=function(e){""!==e.target.value&&n.onSliderChange(null,e.target.value)},n.compareChartRef=r.a.createRef(),n.comparePerformanceRef=r.a.createRef(),n.wholePerformanceRef=r.a.createRef(),n.getMargin=n.getMargin.bind(Object(C.a)(n)),n.getWidth=n.getWidth.bind(Object(C.a)(n)),n.drawChart=n.drawChart.bind(Object(C.a)(n)),n.redrawChart=n.redrawChart.bind(Object(C.a)(n)),n.getWholePerformance=n.getWholePerformance.bind(Object(C.a)(n)),n.getPerformanceWidth=n.getPerformanceWidth.bind(Object(C.a)(n)),n.getPerformanceForThreshold=n.getPerformanceForThreshold.bind(Object(C.a)(n)),n.state={threshold:60,width:1e3,height:1e3,performanceWidth:1e3,group1Color:"#C57619",group2Color:"#3777A5",sliderRange:[20,1e3],wholePerformance:[0,0,0],defaultPerformance:[0,0,0],groupOnePerformance:null,groupTwoPerformance:null,damaging:!0},n}return Object(y.a)(a,[{key:"getMargin",value:function(){var e=this.state.performanceHeight;return{top:0,right:40,bottom:50,left:20,blockHeight:(e-50)/3,chartHeight:(e-50)/12}}},{key:"getWidth",value:function(){return null===this.compareChartRef.current?this.state.width:this.compareChartRef.current.parentElement.offsetWidth}},{key:"getPerformanceWidth",value:function(){return null===this.comparePerformanceRef.current?this.state.performanceWidth:this.comparePerformanceRef.current.parentElement.offsetWidth}},{key:"getPerformanceHeight",value:function(){return null===this.wholePerformanceRef.current||null===this.compareChartRef.current?this.state.performanceHeight:.5*(this.compareChartRef.current.parentElement.offsetWidth-60)+300-this.wholePerformanceRef.current.offsetHeight}},{key:"getPerformanceForThreshold",value:function(){var e=.01*this.state.threshold,t=this.state.damaging;if(null!=this.props.groupOneData&&null!=this.props.groupTwoData){var a=this.props.groupOneData.filter((function(a){return(t?a.confidence_damage:a.confidence_faith)>=e&&!(t?a.damaging_label:a.faith_label)})).length,n=this.props.groupOneData.filter((function(a){return(t?a.confidence_damage:a.confidence_faith)>=e&&(t?a.damaging_label:a.faith_label)})).length,r=this.props.groupOneData.filter((function(a){return(t?a.confidence_damage:a.confidence_faith)<e&&(t?a.damaging_label:a.faith_label)})).length,i=this.props.groupOneData.filter((function(a){return(t?a.confidence_damage:a.confidence_faith)<e&&!(t?a.damaging_label:a.faith_label)})).length,l=this.props.groupTwoData.filter((function(a){return(t?a.confidence_damage:a.confidence_faith)>=e&&!(t?a.damaging_label:a.faith_label)})).length,o=this.props.groupTwoData.filter((function(a){return(t?a.confidence_damage:a.confidence_faith)>=e&&(t?a.damaging_label:a.faith_label)})).length,s=this.props.groupTwoData.filter((function(a){return(t?a.confidence_damage:a.confidence_faith)<e&&(t?a.damaging_label:a.faith_label)})).length,c=this.props.groupTwoData.filter((function(a){return(t?a.confidence_damage:a.confidence_faith)<e&&!(t?a.damaging_label:a.faith_label)})).length;return{groupOne:[n,i,a,r],groupTwo:[o,c,l,s],all:[n+o,i+c,a+l,r+s]}}return{groupOne:this.state.groupOnePerformance,groupTwo:this.state.groupTwoPerformance,all:this.state.wholePerformance}}},{key:"componentDidMount",value:function(){var e=this;console.log("component mounted");var t,a=this.getWidth(),n=a/2.4,r=this.getPerformanceWidth(),i=this.getPerformanceHeight(),l=a-40,o=0,s=0,c=0;if(null!=this.props.performanceData){var d=this.props.performanceData;o=100*d[50].damaging_accuracy,s=100*d[50].damaging_fpr,c=100*d[50].damaging_fnr}this.setState({width:a,height:n,sliderRange:[10,l],performanceWidth:r,performanceHeight:i,damaging:!0,defaultPerformance:[o.toFixed(1),s.toFixed(1),c.toFixed(1)]},(function(){e.getWholePerformance(),e.drawChart(),e.drawPerformanceChart()})),window.addEventListener("resize",(function(){clearTimeout(t),t=setTimeout((function(){e.redrawChart()}),200)}))}},{key:"redrawChart",value:function(){var e=this.getWidth(),t=this.getPerformanceWidth(),a=this.getPerformanceHeight(),n=e-40;this.setState({width:e,height:e/2,performanceWidth:t,performanceHeight:a,sliderRange:[10,n]}),k.m(".compareChart svg").remove(),this.drawChart=this.drawChart.bind(this),this.drawChart(),k.m(".comparePerformance svg").remove(),this.drawPerformanceChart=this.drawPerformanceChart.bind(this),this.drawPerformanceChart()}},{key:"getWholePerformance",value:function(){if(null!=this.props.performanceData&&null!=this.props.groupOneData&&null!=this.props.groupTwoData){var e=this.getPerformanceForThreshold(),t=e.groupOne,a=e.groupTwo,n=re(e.all);this.state.wholePerformance=n,this.state.groupOnePerformance=t,this.state.groupTwoPerformance=a,this.setState({wholePerformance:n,groupOnePerformance:t,groupTwoPerformance:a})}}},{key:"drawPerformanceChart",value:function(){var e=this,t=this.getMargin(),a=this.state.performanceWidth-t.left-t.right,n=this.state.performanceHeight-t.top-t.bottom,r=k.m(".comparePerformance").append("svg").attr("width",a+t.left+t.right).attr("height",n+t.top+t.bottom),i=n/3,l=i/4;if(null!=this.state.groupOnePerformance&&null!=this.state.groupTwoPerformance){var o=function(e,n,i,l,o,s,c){var d=h(i);r.append("line").attr("x1",t.left).attr("y1",e).attr("x2",t.left+a).attr("y2",e).attr("stroke-width",2).attr("stroke","grey"),r.append("line").attr("x1",d).attr("y1",e-5).attr("x2",d).attr("y2",e+5).attr("stroke-width",6).attr("stroke",l),r.append("line").attr("x1",h(n)).attr("y1",e).attr("x2",d).attr("y2",e).attr("stroke-width",3).attr("stroke",l);var m=d-40;m<t.left?m=t.left:m>a+t.left+t.right&&(m=a+t.left+t.right-40);var u=e+10;o&&(1===s&&(u=e-35),r.append("rect").attr("x",m).attr("y",u).attr("width",80).attr("height",24).attr("rx",4).attr("ry",4).attr("fill",l),r.append("text").attr("x",m+40).attr("y",u+13).attr("text-anchor","middle").attr("alignment-baseline","middle").text(c+" more").attr("font-family","sans-serif").attr("fill","white").attr("font-size","14px"))},s=re(this.state.groupOnePerformance),c=re(this.state.groupTwoPerformance),d=this.state.wholePerformance,h=k.l().domain([0,1]).nice().range([t.left,t.left+a]);["Accuracy","FPR","FNR"].forEach((function(a,n){var r=i*n+3*l,h=t.top+i*n+4*l,m=s[n],u=c[n],g=m,p=u,f=2;m>u?(g=u,p=m,f=1):m>u&&(f=0);var v=0;v=0===g?"\u221e":Math.round(100*(p-g)/p)+"%",o(r,d[n],s[n],k.e(e.state.group1Color),1===f,1,v),o(h,d[n],c[n],k.e(e.state.group2Color),2===f,2,v)}))}}},{key:"drawChart",value:function(){var e,t=this,a=20,n=40,r=0,i=this.state.width-r-n,l=i/2.5,o=k.m(".compareChart").append("svg").attr("width",i).attr("height",l),s={draw:function(e,t){var a=Math.sqrt(2*t)/2,n=Math.sqrt(t)/6;e.moveTo(-a,n),e.lineTo(a,n),e.lineTo(a,-n),e.lineTo(-a,-n),e.closePath(),e.moveTo(n,a),e.lineTo(n,-a),e.lineTo(-n,-a),e.lineTo(-n,a),e.closePath()}},c=i/2.4,d=.01*this.state.threshold;if(null!=this.props.groupOneData&&null!=this.props.groupTwoData&&null!=this.state.groupOnePerformance&&null!=this.state.groupTwoPerformance){var h=function(e,t,a,n,r,i,l){var o=[];return g.forEach((function(a,n){var r=parseFloat(l?e[n].confidence_damage:e[n].confidence_faith).toFixed(2)>=d===l?e[n].damaging_label:e[n].faith_label,i=parseFloat(l?e[n].confidence_damage:e[n].confidence_faith).toFixed(2)>=d?t:k.e("#909090"),s=r?1:0;o.push({x:a.x,y:a.y,category:s,color:i,rev_id:+e[n].rev_id,newcomer:e[n].newcomer,anonymous:e[n].anonymous,correct:parseFloat(l?e[n].confidence_damage:e[n].confidence_faith).toFixed(2)>=d===l?e[n].damaging_label:e[n].faith_label,predict:parseFloat(l?e[n].confidence_damage:e[n].confidence_faith).toFixed(2)>=d})})),o},m=this.state.groupOnePerformance,u=this.state.groupTwoPerformance,g=(m[0],m[1],m[2],m[3],u[0],u[1],u[2],u[3],(e=ne,k.j().size([c-2,c-2]).padding(3)(k.g(e).sum((function(e){return e.value})).sort((function(e,t){return t.value-e.value})))).children.slice(0,this.props.sliceNumber).map((function(e){return{x:e.x,y:e.y,r:e.r,category:"cross"}})).sort((function(e,t){var n=l,r=l/2+a;return Math.sqrt(Math.pow(e.x-n,2)+Math.pow(e.y-r,2))-Math.sqrt(Math.pow(t.x-n,2)+Math.pow(t.y-r,2))}))),p=g[0].r,f=function(e,a){var n=function(e){var a=parseFloat(t.state.damaging?e.confidence_damage:e.confidence_faith).toFixed(2)>=d===(t.state.damaging?e.damaging_label:e.faith_label),n=parseFloat(t.state.damaging?e.confidence_damage:e.confidence_faith).toFixed(2)>=d;return n&&!a?1:n&&a?2:n||a?!n&&a?4:void 0:3},r=n(e),i=n(a);return r<i?-1:r>i?1:0};this.props.groupOneData.sort(f);var v=h(this.props.groupOneData,k.e(this.state.group1Color),0,0,0,0,this.state.damaging);this.props.groupTwoData.sort(f);var y=h(this.props.groupTwoData,k.e(this.state.group2Color),0,0,0,0,this.state.damaging),E=function(e,t){return console.log(e+r+270),e+r+270+i*t},b=this.state.damaging;o.append("g").selectAll("path").data(v).join("path").attr("transform",(function(e){return"translate(".concat(r+.05*i+e.x,",").concat(e.y,"),rotate(45)")})).attr("fill",(function(e){return e.color})).attr("d",k.n().type((function(e){return 0===e.category?s:k.o})).size(p*p*1.5)).style("cursor","pointer").on("click",(function(e){return K(e,t.state.damaging,(function(e){return E(e,.075)}),{top:500},l,".compareChart")})).on("mouseover",(function(e){k.m(".compareChart div").remove(),k.m(".compareChart .tooltip.small").remove(),K(e,b,(function(e){return E(e,.075)}),{top:425},l,".compareChart",1,0)})).on("mouseout",(function(e){k.m(".compareChart .tooltip.small").remove()})),o.append("g").selectAll("path").data(y).join("path").attr("transform",(function(e){return"translate(".concat(r+.55*i+e.x,",").concat(e.y,"),rotate(45)")})).attr("fill",(function(e){return e.color})).attr("d",k.n().type((function(e){return 0===e.category?s:k.o})).size(p*p*1.5)).style("cursor","pointer").on("click",(function(e){return K(e,t.state.damaging,(function(e){return E(e,.575)}),{top:480},l,".compareChart")})).on("mouseover",(function(e){k.m(".compareChart div").remove(),k.m(".compareChart .tooltip.small").remove(),K(e,b,(function(e){return E(e,.575)}),{top:425},l,".compareChart",1,1)})).on("mouseout",(function(e){k.m(".compareChart .tooltip.small").remove()}))}}},{key:"getClickTip",value:function(){return r.a.createElement("span",null,r.a.createElement("strong",null,"TIP:")," Click on a revision (cross or circle) to view more details.")}},{key:"render",value:function(){var e=this,t=this.state.damaging?"damaging":"good faith",a=this.state.damaging?"good":"bad faith";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:this.visualizationRef,style:{width:"55%",display:"inline-block",verticalAlign:"top"}},r.a.createElement("div",{className:"upperSettings"},r.a.createElement(F.a,{container:!0,spacing:0},r.a.createElement(H,{damaging:this.state.damaging,onChange:this.onTypeChange,gridSize:9,key:this.state.damaging}),r.a.createElement(F.a,{item:!0,xs:3,className:"threshold"},r.a.createElement("div",{className:"innerBox"},r.a.createElement(m.a,{variant:"subtitle2"},r.a.createElement(o.a,null,"threshold")),r.a.createElement(F.a,{container:!0,spacing:2,className:"options"},r.a.createElement(F.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement(D,{value:this.state.threshold,multiplier:1,onChange:this.onTextChange}))))))),r.a.createElement("div",{style:{marginLeft:"".concat(this.state.sliderRange[0],"px"),width:"".concat(this.state.sliderRange[1]-this.state.sliderRange[0],"px")}},r.a.createElement(m.a,{variant:"subtitle2"},"Fairness in Groups"),r.a.createElement(P,{value:this.state.threshold,defaultValue:60,middleText:this.getClickTip,onChangeCommitted:this.onSliderChange})),r.a.createElement("div",{className:"compareChart",ref:this.compareChartRef}),r.a.createElement("div",{style:{marginLeft:"".concat(this.state.sliderRange[0],"px"),width:"".concat(this.state.sliderRange[1]-this.state.sliderRange[0],"px"),transform:"translate(0px,-20px)"}},r.a.createElement("div",{style:{width:"50%",display:"inline-block"}},r.a.createElement(m.a,{variant:"h6",component:"div",style:{textAlign:"center",color:"".concat(this.state.group1Color)}},"Newcomer Edits"),r.a.createElement(m.a,{variant:"body2",component:"div",style:{textAlign:"center"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"}},r.a.createElement(o.a,{width:"80%"},"Model performance on edits made by newcomer editors")))),r.a.createElement("div",{style:{width:"50%",display:"inline-block"}},r.a.createElement(m.a,{variant:"h6",component:"div",style:{textAlign:"center",color:"".concat(this.state.group2Color)}},"Experienced Edits"),r.a.createElement(m.a,{variant:"body2",component:"div",style:{textAlign:"center"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"}},r.a.createElement(o.a,{width:"80%"},"Model performance on edits made by experienced editors")))),r.a.createElement("div",{className:"legendCard"},r.a.createElement(m.a,{component:"div",variant:"subtitle2"},"legend"),r.a.createElement(F.a,{container:!0,spacing:0,style:{marginTop:"10px"}},r.a.createElement(F.a,{item:!0,xs:6},r.a.createElement("div",{className:"legendMark"},r.a.createElement(z,{size:12,color:"#909090"})," ",r.a.createElement(m.a,{component:"span",variant:"body2"},"Correctly classified ",a," edits"))),r.a.createElement(F.a,{item:!0,xs:6},r.a.createElement("div",{className:"legendMark"},r.a.createElement(z,{size:12,color:this.state.group1Color}),r.a.createElement("span",{style:{width:"2px"}}),r.a.createElement(z,{size:12,color:this.state.group2Color})," ",r.a.createElement(m.a,{component:"span",variant:"body2"},"Correctly classified ",t," edits"))),r.a.createElement(F.a,{item:!0,xs:6},r.a.createElement("div",{className:"legendMark"},r.a.createElement(M,{size:12,color:"#909090"})," ",r.a.createElement(m.a,{component:"span",variant:"body2"},"Uncaught ",t," edits"," "))),r.a.createElement(F.a,{item:!0,xs:6},r.a.createElement("div",{className:"legendMark"},r.a.createElement(M,{size:12,color:this.state.group1Color}),r.a.createElement("span",{style:{width:"2px"}}),r.a.createElement(M,{size:12,color:this.state.group2Color})," ",r.a.createElement(m.a,{component:"span",variant:"body2"},"Misclassified ",a," edits"," "))))))),r.a.createElement("div",{className:"sidePanel",id:"comparePerformanceSidePanel"},r.a.createElement("div",{className:"overallPerformance",ref:this.wholePerformanceRef,style:{borderBottom:"1px solid lightgrey"}},r.a.createElement(m.a,{component:"div",variant:"subtitle2"},"PERFORMANCE"),r.a.createElement(F.a,{container:!0,className:"performanceBlock",spacing:0,style:{marginTop:"5px",textAlign:"left",marginLeft:"0px"}},r.a.createElement(F.a,{item:!0,xs:4},r.a.createElement(m.a,{component:"div",className:"title"},"ACC"),r.a.createElement(m.a,{component:"div"},r.a.createElement(o.a,{className:"data"},(100*this.state.wholePerformance[0]).toFixed(1),"%"))),r.a.createElement(F.a,{item:!0,xs:4},r.a.createElement(m.a,{component:"div",className:"title"},"FPR"),r.a.createElement(m.a,{component:"div"},r.a.createElement(o.a,{className:"data"},(100*this.state.wholePerformance[1]).toFixed(1),"%"))),r.a.createElement(F.a,{item:!0,xs:4},r.a.createElement(m.a,{component:"div",className:"title"},"FNR"),r.a.createElement(m.a,{component:"div"},r.a.createElement(o.a,{className:"data"},(100*this.state.wholePerformance[2]).toFixed(1),"%"))))),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{width:"40%",display:"inline-block"},className:"groupPerformance"},["Accuracy","False Positive Rate","False Negative Rate"].map((function(t,a){return r.a.createElement("div",{style:{height:"".concat(e.getMargin().blockHeight,"px"),fontSize:"12px",transform:"translate(0px,7px)"}},r.a.createElement("div",{style:{height:"".concat(e.getMargin().chartHeight,"px")}}),r.a.createElement("div",{style:{height:"".concat(e.getMargin().chartHeight,"px"),display:"flex",flexDirection:"column-reverse"}},r.a.createElement(m.a,{variant:"body2",className:"classTitle"},t)),r.a.createElement("div",{style:{height:"".concat(e.getMargin().chartHeight,"px"),display:"flex",flexDirection:"column-reverse"}},r.a.createElement("div",null,r.a.createElement("div",{className:"title"},"newcomer edits"),r.a.createElement("div",{className:"data",style:{color:e.state.group1Color}},null===e.state.groupOnePerformance?"...":(100*re(e.state.groupOnePerformance)[a]).toFixed(1)+"%"))),r.a.createElement("div",{style:{height:"".concat(e.getMargin().chartHeight,"px"),display:"flex",flexDirection:"column-reverse"}},r.a.createElement("div",null,r.a.createElement("div",{className:"title"},"experienced edits"),r.a.createElement("div",{className:"data",style:{color:e.state.group2Color}},null===e.state.groupTwoPerformance?"...":(100*re(e.state.groupTwoPerformance)[a]).toFixed(1)+"%"))))}))),r.a.createElement("div",{style:{width:"60%",display:"inline-block"}},r.a.createElement("div",{className:"comparePerformance",ref:this.comparePerformanceRef})))))}}]),a}(n.Component),le=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={anonData:null,loggedData:null,newcomerData:null,experiencedData:null,change:0},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=this;k.f(ae.a,(function(e){return{anonymous:"TRUE"===e.anonymous,newcomer:e.edit_years<=8,confidence_faith:+e.confidence_faith,faith_label:"TRUE"===e.goodfaith,confidence_damage:+e.confidence_damage,damaging_label:"TRUE"===e.damaging,rev_id:+e.rev_id}})).then((function(t){var a=t.filter((function(e){return e.anonymous})).slice(0,100),n=t.filter((function(e){return!e.anonymous})).slice(0,100),r=t.filter((function(e){return e.newcomer})).slice(0,100),i=t.filter((function(e){return!e.newcomer})).slice(0,100);e.setState({anonData:a,loggedData:n,newcomerData:r,experiencedData:i}),e.setState({change:2})}))}},{key:"render",value:function(){return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(ie,{groupOneData:this.state.newcomerData,groupTwoData:this.state.experiencedData,key:this.state.change,performanceData:this.props.performanceData,sliceNumber:100}))}}]),a}(n.Component),oe=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={showDesc:!1},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.setState({showDesc:!1})}},{key:"toggle",value:function(e){this.setState({showDesc:e})}},{key:"render",value:function(){var e=this,t=this.state.showDesc;return r.a.createElement(m.a,{variant:"body2",className:"metric",style:{color:this.state.showDesc?this.props.accent:"black"},onMouseEnter:function(){return e.toggle(!0)},onMouseLeave:function(){return e.toggle(!1)}},r.a.createElement("strong",null,this.props.title),": ",this.props.value," ",t&&r.a.createElement("em",{style:{color:this.props.accent}},this.props.desc))}}]),a}(n.Component),se=a(224),ce=a(233),de=a(239),he=a(226),me=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).onTypeChange=function(e,t){null!=t&&n.setState({damaging:t})},n.onThresChange=function(e,t){if(null!=t){for(var a=[Math.abs(t-n.getRec("Aggressive")),Math.abs(t-n.getRec("Balanced")),Math.abs(t-n.getRec("Cautious"))],r=0,i=1,l=0;l<3;l++)a[l]<i&&(i=a[l],r=l);n.setState({threshold:t,range:r})}},n.onRangeChange=function(e,t){null!=t&&n.onThresChange(e,n.getRec(["Aggressive","Balanced","Cautious"][t]))},n.onTextChange=function(e){n.onThresChange(e,e.target.value?Number((e.target.value/100).toFixed(2)):null)},n.getData=function(){function e(e){for(var t={},a=0,n=.01;n<1&&a<e.length;){if(e[a]&&n-e[a].threshold<1e-6){var r=e[a];t[n.toFixed(2)]={"!f1":r["!f1"],"!precision":r["!precision"],"!recall":r["!recall"],accuracy:r.accuracy,f1:r.f1,filter_rate:r.filter_rate,fpr:r.fpr,match_rate:r.match_rate,precision:r.precision,recall:r.recall,fnr:(1-r.recall).toFixed(3)},n=Number.parseFloat(Number.parseFloat(n+.01).toFixed(2))}a+=1}return t}U.a.get("https://ores.wikimedia.org/v3/scores/enwiki/?models=damaging|goodfaith&model_info=statistics.thresholds.true").then((function(t){var a=t.data.enwiki.models.damaging.statistics.thresholds.true,r=t.data.enwiki.models.goodfaith.statistics.thresholds.true;console.log("got data"),n.setState({damagingData:e(a),goodfaithData:e(r)})}))},n.chartRef=r.a.createRef(),n.state={damaging:!0,threshold:null,damagingData:null,goodfaithData:null,recommendations:null,range:-1},n}return Object(y.a)(a,[{key:"getRecommendations",value:function(){var e=Object(G.a)(L.a.mark((function e(){var t,a,n,r,i;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=["damaging","goodfaith"],a=[{type:"Aggressive",param:'"maximum precision @ recall >= 0.9"'},{type:"Cautious",param:'"maximum recall @ precision >= 0.9"'},{type:"Balanced",param:'"maximum precision @ recall >= 0.5"'}],n={damaging:{Aggressive:null,Cautious:null,Balanced:null},goodfaith:{Aggressive:null,Cautious:null,Balanced:null}},r=L.a.mark((function e(r){var i,l;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=L.a.mark((function e(i){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("https://ores.wikimedia.org/v3/scores/enwiki/?models="+t[r]+"&model_info=statistics.thresholds.true."+a[i].param).then((function(e){n[t[r]][a[i].type]=Number.parseFloat(Math.max(Math.min(e.data.enwiki.models[t[r]].statistics.thresholds.true[0].threshold.toFixed(2),.98),.01))}));case 2:case"end":return e.stop()}}),e)})),e.t0=L.a.keys(a);case 2:if((e.t1=e.t0()).done){e.next=7;break}return l=e.t1.value,e.delegateYield(i(l),"t2",5);case 5:e.next=2;break;case 7:console.log(n[t[r]].Balanced),(n[t[r]].Balanced>n[t[r]].Aggressive&&n[t[r]].Balanced>n[t[r]].Cautious||n[t[r]].Balanced<n[t[r]].Aggressive&&n[t[r]].Balanced<n[t[r]].Cautious)&&(console.log(n[t[r]].Balanced),n[t[r]].Balanced=Number.parseFloat(((n[t[r]].Aggressive+n[t[r]].Cautious)/2).toFixed(2)),console.log(n[t[r]].Balanced));case 9:case"end":return e.stop()}}),e)})),e.t0=L.a.keys(t);case 5:if((e.t1=e.t0()).done){e.next=10;break}return i=e.t1.value,e.delegateYield(r(i),"t2",8);case 8:e.next=5;break;case 10:return console.log(n),this.setState({recommendations:n}),this.state.recommendations=n,e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProp",value:function(e,t){return this.state.damagingData&&this.state.goodfaithData&&null!=this.state.threshold&&this.state.threshold>0&&this.state.threshold<=.98?this.state.damaging?this.state.damagingData[this.state.threshold.toFixed(2)][e]:this.state.goodfaithData[this.state.threshold.toFixed(2)][e]:t}},{key:"getRec",value:function(e){var t=this.state.recommendations;return null==t&&(t={damaging:{Aggressive:.1,Cautious:.63,Balanced:.94},goodfaith:{Aggressive:.85,Cautious:.5,Balanced:.05}}),t[this.state.damaging?"damaging":"goodfaith"][e]}},{key:"componentDidMount",value:function(){this.getData(),this.getRecommendations(),this.setState({damaging:!0,threshold:null,range:-1})}},{key:"render",value:function(){var e=this,t=this.state.threshold?"#3777a5":"#ddd",a=this.state.damaging?"damaging":"good faith",n=this.state.damaging?"good":"bad faith";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:"100%",display:"inline-block",verticalAlign:"top"}},r.a.createElement(F.a,{container:!0,spacing:0,className:"upperSettings"},r.a.createElement(H,{damaging:this.state.damaging,onChange:this.onTypeChange,gridSize:4,key:this.state.damaging}),r.a.createElement(F.a,{item:!0,xs:8,style:{height:"auto",padding:0,paddingLeft:10,paddingBottom:10,borderLeft:"1px solid #d3d3d3",display:"flex",flexDirection:"column",alignItems:"left"}},r.a.createElement(m.a,{component:"div",variant:"subtitle2"},r.a.createElement(o.a,null,"Additional Information")),r.a.createElement("div",{className:"customLink",style:{width:410,marginTop:7}},r.a.createElement("a",{href:"https://www.mediawiki.org/wiki/ORES/Thresholds",target:"_blank",style:{textTransform:"none"}},"Click here to Learn More about ORES and Thresholds"),r.a.createElement("div",null,"\u279e")))),!this.state.goodfaithData&&r.a.createElement(se.a,{className:"myProgress"}),r.a.createElement("div",{style:{display:"inline-flex",width:"80%",height:"77vh",alignItems:"center",justifyContent:"center",margin:"0% 10%"}},r.a.createElement("div",{style:{height:"80%",display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement("p",{style:{margin:10,width:"100%"}},r.a.createElement("strong",null,"Step 1: "),"Choose a model"),r.a.createElement(W.a,{orientation:"vertical",exclusive:!0,value:this.state.range,onChange:this.onRangeChange,style:{display:"flex",width:400,flexDirection:"column",textAlign:"center",alignItems:"center",justifyContent:"space-between",height:"100%",margin:0}},[{type:"Aggressive",subtitle:"Tools for human reviewers",description:"Catch more "+a+" edits at the cost of some "+n+" edits being falsely predicted."},{type:"Balanced",subtitle:"Tools for human reviewers",description:"Similar rates of uncaught "+a+" edits and falsely predicted "+n+" edits."},{type:"Cautious",subtitle:"Automated bots",description:"Less falsely predicted "+n+" edits at the cost of more uncaught "+a+" edits."}].map((function(t,a){return r.a.createElement(B.a,{value:a,className:"recommendOptions",disabled:e.state.damaging?!e.state.damagingData:!e.state.goodfaithData},r.a.createElement(F.a,{container:!0,spacing:0,style:{display:"flex",justifyContent:"space-evenly"}},r.a.createElement(F.a,{item:!0,xs:6,style:{marginRight:15,display:"flex",flexDirection:"column",justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement("h4",null,t.type," Model"),r.a.createElement("h5",null,t.subtitle)),r.a.createElement("p",null,t.description)),r.a.createElement(F.a,{item:!0,xs:5},r.a.createElement("img",{src:"/ores-viz/recommender/"+t.type+".svg",alt:t.type+" model graphic.",height:"100%",width:"100%"}))))})))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",marginTop:50}},["Aggressive","Balanced","Cautious"].map((function(t,a){return r.a.createElement("div",null,r.a.createElement("img",{src:"/ores-viz/recommender/"+t+(e.state.range===a?"Active":"Inactive")+".svg",alt:""}))}))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginLeft:0}},r.a.createElement("p",{style:{margin:10,width:"100%"}},r.a.createElement("strong",null,"Step 2: "),"Adjust the threshold"),r.a.createElement("div",{className:"card",style:{borderColor:t}},r.a.createElement(m.a,{component:"div",variant:"subtitle2",style:{fontSize:14,color:"#000",margin:0}},"SUGGESTED THRESHOLD"),r.a.createElement(N.a,{value:this.state.threshold?(100*this.state.threshold).toFixed(0):null,onChange:this.onTextChange,inputProps:{step:1,min:1,max:98,type:"number",placeholder:"N/A"},endAdornment:r.a.createElement(S.a,{position:"end"},r.a.createElement(m.a,{variant:"h6",className:"text",style:{fontSize:50,fontWeight:600}},this.state.threshold?"%":"")),style:{fontSize:50,width:150,fontWeight:600,marginBottom:10}}),r.a.createElement(m.a,{variant:"body2"},"This threshold will catch around",r.a.createElement("strong",null," ","--"===this.getProp("recall","--")?"--":(100*this.getProp("recall","--")).toFixed(0),"%"," "),"of the "," "+a," edits while having",r.a.createElement("strong",null," ","--"===this.getProp("fpr","--")?"--":(100*this.getProp("fpr","--")).toFixed(0),"%"," "),"of the "," "+n," edits misclassified."),r.a.createElement(ce.a,null,r.a.createElement(de.a,null,r.a.createElement(m.a,{variant:"h5",style:{color:this.state.threshold?"#3777a5":"grey"}},"See Specific Performance")),r.a.createElement(he.a,null,r.a.createElement("div",null,[{prop:"accuracy",desc:"ratio of correctly predicted data to all data"},{prop:"fpr",desc:"% of "+n+" edits falsely caught as "+a},{prop:"fnr",desc:"% of "+a+" edits that won't be identified"}].map((function(t){return r.a.createElement(oe,{title:t.prop,value:e.getProp(t.prop,"N/A"),desc:t.desc,key:t.prop,accent:e.state.threshold?"#C57619":"grey"})}))))),r.a.createElement(ce.a,{style:{marginTop:5}},r.a.createElement(de.a,null,r.a.createElement(m.a,{variant:"h5",style:{color:this.state.threshold?"#3777a5":"grey"}},"Copy Code for this Threshold")),r.a.createElement(he.a,null,r.a.createElement("div",{style:{wordWrap:"break-word",fontFamily:"monospace"}},r.a.createElement("div",{style:{margin:5,fontWeight:"bold"}},"def compute_metrics(y_true, y_pred_scores,"," ",this.state.threshold,', model="',this.state.damaging?"damaging":"goodfaith",'"):'),["# model = damaging or goodfaith","# return a dictionary with metrics","# y_true: a np array of true labels 1/0","# y_pred_scores: a np array of predictions"].map((function(e,t){return r.a.createElement("div",{style:{margin:5}},"  ",e)}))))))))))}}]),a}(n.Component),ue=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).onDamagingChange=function(e){if(null!=e.target.value){var t=(e.target.value/100).toFixed(2);console.log(e.target.value,t),n.setState({damaging:t})}},n.onGoodfaithChange=function(e){if(null!=e.target.value){var t=(e.target.value/100).toFixed(2);console.log(e.target.value,t),n.setState({goodfaith:t})}},n.onHighlightChange=function(e,t){null!=t&&n.setState({group:t})},n.onSliderChange=function(e,t){null!=t&&n.setState({adjSeconds:t,anon:0===t})},n.state={damaging:.5,goodfaith:.5,curID:null,oldData:null,newData:null,group:1,adjSeconds:null,anon:null},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.setState({damaging:.5,goodfaith:.5,curID:null,group:0,adjSeconds:null})}},{key:"renderPieChart",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=a>(t?this.state.damaging:this.state.goodfaith),l=t?i?"Damaging":"Not Damaging":i?"Good Faith":"Bad Faith",o=k.k().sort(null).value((function(e){return e.value})),s=k.a().innerRadius(0).outerRadius(40),c=[{name:"main",value:null!=a?a:0},{name:"other",value:1-a}];function d(e){return"main"===e?h("green"):"lightgrey"}function h(e){return null!=a?null!=n?e:"grey":"lightgrey"}k.m(".pieChart."+e.replace(/\s/g,"")+t+" svg").remove();var u=k.m(".pieChart."+e.replace(/\s/g,"")+t).append("svg").attr("viewBox",[-40,-40,80,80]).attr("z-level",3),g=o(c);return u.append("g").selectAll("path").data(g).join("path").attr("fill",(function(e){return d(e.data.name)})).attr("d",s),r.a.createElement("div",{class:"pieChartElem"},r.a.createElement(m.a,{variant:"h6"},e),r.a.createElement("div",{class:"mainContainer"},r.a.createElement("div",{class:"pieChart "+e.replace(/\s/g,"")+t}),r.a.createElement("div",{class:"rightSide"},r.a.createElement("div",{class:"scoreBox"},r.a.createElement("h3",{style:{color:h("#444")}},null!=a?a.toFixed(2):"N/A"),null!=n&&null!=a&&a!==n?r.a.createElement("h6",{style:{color:"blue"}},a>n?"\u25b2 ":"\u25bc ",Math.abs(a-n).toFixed(2)):null),null!=a?r.a.createElement(m.a,{variant:"body1",style:{color:null!=n?"black":"grey",marginRight:0}},"Predicted as"," ",r.a.createElement("span",{style:{color:null!=n?t===i?"red":"green":"grey",margin:0}},l)):null)))}},{key:"render",value:function(){return r.a.createElement(F.a,{container:!0},r.a.createElement(F.a,{item:!0,md:6,style:{padding:10,paddingTop:0,borderRight:"1px solid lightgrey",borderBottom:"none",paddingBottom:0},className:"upperSettings"},r.a.createElement(F.a,{item:!0,xs:this.props.gridSize,className:"modelOptions"},r.a.createElement(m.a,{component:"div",variant:"subtitle2"},r.a.createElement(o.a,null,"Highlight Edits")),r.a.createElement(W.a,{exclusive:!0,value:this.state.group,onChange:this.onHighlightChange,className:"options",style:{paddingBottom:0}},r.a.createElement(m.a,{component:B.a,value:1,variant:"h6",className:"text",style:{fontSize:20}},"Newcomer / Experienced"),r.a.createElement(m.a,{value:2,component:B.a,variant:"h6",className:"text",style:{fontSize:20}},"Anonymous / Logged-In"),r.a.createElement(m.a,{value:0,component:B.a,variant:"h6",className:"text",style:{fontSize:20}},"None")))),r.a.createElement(F.a,{item:!0,md:6,style:{padding:10,paddingTop:0}},r.a.createElement(m.a,{variant:"subtitle2"},"Threshold Settings"),r.a.createElement(F.a,{container:!0},r.a.createElement(F.a,{item:!0,md:6,style:{display:"inline-flex",justifyContent:"center"}},r.a.createElement("h3",{style:{margin:10,marginRight:30,fontWeight:500}},"Damaging:"," "),r.a.createElement(D,{value:this.state.damaging,multiplier:100,onChange:this.onDamagingChange})),r.a.createElement(F.a,{item:!0,md:6,style:{display:"inline-flex",justifyContent:"center"}},r.a.createElement("h3",{style:{margin:10,marginRight:30,fontWeight:500}},"Goodfaith:"," "),r.a.createElement(D,{value:this.state.goodfaith,multiplier:100,onChange:this.onGoodfaithChange})))),r.a.createElement(F.a,{item:!0,md:6,style:{padding:10,paddingTop:0,borderTop:"1px solid lightgrey",borderRight:"1px solid lightgrey"}},r.a.createElement(m.a,{variant:"subtitle2"},"Edit Data Point"),r.a.createElement(O.a,{style:{margin:"0 5%",marginTop:30,width:"90%"},max:5e8,marks:[{value:0,label:"Anonymous"},{value:1577e5,label:"5 years"},{value:3154e5,label:"10 years"},{value:473e6,label:"15 years"}],onChange:this.onSliderChange,value:this.state.adjSeconds}),r.a.createElement("div",{class:"injectionGraph"})),r.a.createElement(F.a,{item:!0,md:6,style:{padding:10,paddingTop:0,borderTop:"1px solid lightgrey"}},r.a.createElement(m.a,{variant:"subtitle2"},"Performance"),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",margin:"0 3%",marginTop:10}},null==this.state.curID?r.a.createElement("div",{className:"legendCard",style:{padding:5}},r.a.createElement("h3",{style:{margin:10,fontWeight:500}},"No data point is currently selected")):null,r.a.createElement("h3",{style:{color:null==this.state.curID?"grey":"black",marginTop:60}},"Damaging Score"),r.a.createElement("div",{style:{display:"inline-flex"}},this.renderPieChart("New Score",!0,.67,.79),this.renderPieChart("Original",!0,.79)),r.a.createElement("h3",{style:{color:null==this.state.curID?"grey":"black",marginTop:60}},"Goodfaith Score"),r.a.createElement("div",{style:{display:"inline-flex"}},this.renderPieChart("New Score",!1,null,.31),this.renderPieChart("Original",!1,.31)))))}}]),a}(n.Component),ge=a(107),pe=a.n(ge),fe=a(83),ve=a(15),ye=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(){return Object(v.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"getMainContent",value:function(e){return r.a.createElement("div",null,r.a.createElement(m.a,{variant:"subtitle1",style:{textAlign:"left"}},e.title),r.a.createElement("div",{style:{marginTop:"10px",marginBottom:25}},r.a.createElement(m.a,{variant:"body2",style:{color:"grey"}},e.desc," ")))}},{key:"getPredTableItem",value:function(e,t,a){return r.a.createElement("td",{class:"predTableElem"},a,r.a.createElement("div",null,r.a.createElement("div",{class:"boldText"},e),r.a.createElement("p",{style:{color:"grey"}},t)))}},{key:"render",value:function(){return r.a.createElement("div",{className:"aboutPage"},r.a.createElement("div",{className:"aboutSection",style:{width:"50%"}},this.getMainContent({title:"About ORES",desc:"ORES is an API that provides machine learning services for Wikimedia projects. The system is designed to help human editors perform critical wiki-work and to increase their productivity by automating tasks like detecting vandalism and removing edits made in bad faith."}),r.a.createElement("div",{class:"customLink",style:{width:140}},r.a.createElement("a",{href:"https://ores.wikimedia.org/ui/",target:"_blank",rel:"noopener noreferrer"},"Try ORES API"),r.a.createElement("div",null,"\u279e"))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{style:{width:"50%",borderRight:"1px solid lightgrey"}},r.a.createElement("div",{className:"aboutSection"},this.getMainContent({title:"How ORES Works",desc:"ORES scores individual edits that are made to articles on Wikipedia. On the scale of 0 to 1, ORES scores describe the quality of edits and help humans determine which kinds of edits are damaging to articles and which kinds of edits are made in good faith."}),r.a.createElement("table",{className:"oresTable",colspan:5},r.a.createElement("tr",null,r.a.createElement("td",{className:"boldText"},"Input"),r.a.createElement("td",null),r.a.createElement("td",{className:"boldText"},"Model"),r.a.createElement("td",null),r.a.createElement("td",{className:"boldText"},"Output")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",{className:"aboutButton"},"Edit: #124230")),r.a.createElement("td",null,r.a.createElement("div",{class:"arrow"},"\u279e")),r.a.createElement("td",null,r.a.createElement("div",{className:"oresText"},"ORES")),r.a.createElement("td",null,r.a.createElement("div",{class:"arrow"},"\u279e")),r.a.createElement("td",{className:"DGgrid"},r.a.createElement("div",null,r.a.createElement("div",{style:{color:"grey",width:75}},"Damaging:"),r.a.createElement("div",{class:"highlight bad"},"0.87142")),r.a.createElement("div",null,r.a.createElement("div",{style:{color:"grey",width:75}},"Goodfaith:"),r.a.createElement("div",{class:"highlight good"},"0.92245")))))),r.a.createElement("div",{className:"aboutSection",style:{borderTop:"1px solid lightgrey"}},this.getMainContent({title:"How the Threshold Works",desc:"Setting the threshold can change the way the model predicts. With different thresholds, the same score can have different prediction results."}),r.a.createElement("div",{class:"thresList"},r.a.createElement("div",null,r.a.createElement("div",{class:"boldText"},"Damaging Score:"),r.a.createElement("div",{class:"highlight"},"0.87142"))),r.a.createElement("div",{class:"thresList"},r.a.createElement("div",null,r.a.createElement("div",null,"1. Threshold = 0.5"),r.a.createElement("div",{class:"highlight bad"},"Damaging")),r.a.createElement("div",null,r.a.createElement("div",null,"2. Threshold = 0.9"),r.a.createElement("div",{class:"highlight good"},"Non-damaging"))))),r.a.createElement("div",{className:"aboutSection",style:{width:"50%",paddingLeft:30}},this.getMainContent({title:"Types of Predictions",desc:"Depending on what ORES predicts and whether the prediction is correct, there are four types of possible results: True Positives, False Positives, True Negatives, and False Negatives."}),r.a.createElement("table",{cellSpacing:0,cellPadding:0,style:{margin:"auto",width:"90%"}},r.a.createElement("tr",{style:{spacing:0}},this.getPredTableItem("True Positive","Actual damaging edits predicted as damaging",r.a.createElement(z,{color:"#C57619",size:12})),this.getPredTableItem("False Positive","Actual good edits predicted as damaging",r.a.createElement(M,{color:"#C57619",size:12}))),r.a.createElement("tr",null,this.getPredTableItem("True Negative","Actual good edits predicted as non-damaging",r.a.createElement(z,{color:"#909090",size:12})),this.getPredTableItem("False Negative","Actual damaging edits predicted as non-damaging",r.a.createElement(M,{color:"#909090",size:12})))),r.a.createElement("table",{class:"predLegend",cellSpacing:0,cellPadding:0},r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(z,{size:12,color:"#C57619"}),r.a.createElement(M,{size:12,color:"#C57619"}),r.a.createElement("div",{class:"text"},"Damaging Prediction")),r.a.createElement("td",null,r.a.createElement(z,{size:12,color:"#C57619"}),r.a.createElement(z,{size:12,color:"#909090"}),r.a.createElement("div",{class:"text"},"Correct Prediction"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(z,{size:12,color:"#909090"}),r.a.createElement(M,{size:12,color:"#909090"}),r.a.createElement("div",{class:"text"},"Non-Damaging Prediction")),r.a.createElement("td",null,r.a.createElement(M,{size:12,color:"#C57619"}),r.a.createElement(M,{size:12,color:"#909090"}),r.a.createElement("div",{class:"text"},"Incorrect Prediction")))))))}}]),a}(n.Component);function Ee(){var e=Object(x.a)(["\n  display: block;\n  margin-bottom: 0vh;\n"]);return Ee=function(){return e},e}function be(){var e=Object(x.a)(["\n  padding-left: 10px;\n  padding-top: 10px;\n  padding-bottom: 30px;\n  border-bottom: 1px solid lightgrey;\n"]);return be=function(){return e},e}var xe=fe.a.div(be()),we=fe.a.div(Ee()),Ce=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={performance_data:null,change:0},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=this;k.f(pe.a,(function(e){return{threshold:+e.threshold,damaging_accuracy:+e.damaging_accuracy,damaging_fpr:+e.damaging_fpr,damaging_fnr:+e.damaging_fnr,faith_accuracy:+e.faith_accuracy,faith_fpr:+e.faith_fpr,faith_fnr:+e.faith_fnr}})).then((function(t){e.setState({performance_data:t}),e.setState({change:1})}))}},{key:"sectionHeader",value:function(e,t){return r.a.createElement(xe,null,r.a.createElement(m.a,{variant:"subtitle1",style:{textAlign:"left"}},e),r.a.createElement("div",{style:{width:"50%",marginTop:"10px"}},r.a.createElement(m.a,{variant:"body2",style:{color:"grey"}},t," ")))}},{key:"render",value:function(){return r.a.createElement(ve.c,null,r.a.createElement(ve.a,{path:"/recommender"},r.a.createElement(we,null,this.sectionHeader("Threshold Recommender","The threshold recommender helps you decide a threshold that aligns with your model preferences."),r.a.createElement(me,{performanceData:this.state.performance_data,key:this.state.change}))),r.a.createElement(ve.a,{path:"/disparity"},r.a.createElement(we,null,this.sectionHeader("Disparity Visualizer","This visualization provides insights on how the model performs for articles edited by different user groups; this may help you weigh the pros and cons of picking the threshold."),r.a.createElement(le,{performanceData:this.state.performance_data,key:this.state.change}))),r.a.createElement(ve.a,{path:"/explorer"},r.a.createElement(we,null,this.sectionHeader("Threshold Explorer","Threshold Explorer helps you visualize model performance under specific thresholds with an example dataset. To start, select a model below, then pick a threshold."),r.a.createElement(ee,{performanceData:this.state.performance_data,key:this.state.change}))),r.a.createElement(ve.a,{path:"/injection"},this.sectionHeader("Feature Injection","Besides the edit content, ORES also makes predictions based on the experience of the editor. Feature injection allows you to select and edit and see how the prediction changes if it's made by a different editor."),r.a.createElement(ue,null)),r.a.createElement(ve.a,{component:ye}))}}]),a}(n.Component),ke=a(38),Te=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={selected:-1},n.clickSection=n.clickSection.bind(Object(C.a)(n)),n}return Object(y.a)(a,[{key:"clickSection",value:function(e){this.setState({selected:e}),console.log("ha"),console.log(e)}},{key:"render",value:function(){var e=this;return r.a.createElement(h.a,{style:{marginTop:"10vh"}},[{text:"About ORES",path:"/"},{text:"Threshold Explorer",path:"/explorer/"},{text:"Disparity Visualizer",path:"/disparity/"},{text:"Threshold Recommender",path:"/recommender/"}].map((function(t,a){return r.a.createElement(ke.b,{to:t.path},r.a.createElement(u.a,{className:e.props.klass,button:!0,key:t.text,onClick:function(){return e.clickSection(a)}},r.a.createElement("div",{style:{width:"12.5%"}}),r.a.createElement("div",{style:{width:"87.5%"}},r.a.createElement(m.a,{component:"div"},r.a.createElement(o.a,{className:e.state.selected===a?"active-section":"inactive-section"},t.text)))))})))}}]),a}(n.Component),Oe=Object(g.a)({typography:{root:{component:"div"},fontFamily:"Noto Sans KR",subtitle1:{fontFamily:"Noto Serif",fontSize:"24px"},subtitle2:{fontSize:"12px",marginTop:"10px",color:"#B0B0B0",fontWeight:"bold",textTransform:"uppercase",textAlign:"left"},h6:{fontWeight:"bold",fontSize:"16px",textAlign:"left"},body1:{fontSize:"14px"},body2:{textAlign:"left",fontSize:"14px"},button:{fontStyle:"italic"},h5:{fontSize:"15px",color:"#3777a5",fontWeight:"bold",textTransform:"none",textAlign:"left"}}});Oe=Object(p.a)(Oe);var Pe=Object(c.a)((function(e){return{root:{display:"flex"},appBar:{width:"calc(100% - ".concat(270,"px)"),marginLeft:270},drawer:{width:270,flexShrink:0,textAlign:"center",position:"relative"},drawerPaper:{width:270,paddingTop:"35px",paddingBottom:"35px"},paper:{textAlign:"left",padding:"20px 20px"},list:{fontSize:"16px",textDecoration:"none"},toolbar:{padding:e.spacing(2)},content:{width:"calc(100% - ".concat(270,"px)"),flexGrow:1,backgroundColor:e.palette.background.default,padding:"1.5vh",height:"100vh"}}}));var _e=function(){var e=Pe();return r.a.createElement(ke.a,{basename:"/ores-viz/"},r.a.createElement(f.a,{theme:Oe},r.a.createElement("div",{className:"App"},r.a.createElement("body",null,r.a.createElement("div",{className:e.root},r.a.createElement(d.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper},anchor:"left"},r.a.createElement(ke.b,{to:"/"},r.a.createElement(s.a,{className:e.paper,elevation:"0"},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(m.a,{variant:"subtitle1"},"WIKIPEDIA"),r.a.createElement(m.a,{style:{textAlign:"center"}},"ORES Explorer")))),r.a.createElement(Te,{klass:e.list}),r.a.createElement(h.a,{style:{position:"absolute",bottom:"120px",width:"100%"}},[].map((function(t,a){return r.a.createElement(ke.b,{to:t.path},r.a.createElement(u.a,{className:e.list,button:!0,key:t.text},r.a.createElement("div",{style:{width:"12.5%"}}),r.a.createElement("div",{style:{width:"87.5%"}},r.a.createElement(m.a,{component:"div"},r.a.createElement(o.a,{color:"#989898"},t.text)))))})))),r.a.createElement("main",{className:e.content},r.a.createElement(Ce,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,a){}},[[167,1,2]]]);
//# sourceMappingURL=main.2a85e591.chunk.js.map