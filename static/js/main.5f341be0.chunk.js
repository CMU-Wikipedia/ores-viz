(this["webpackJsonpores-tutorial"]=this["webpackJsonpores-tutorial"]||[]).push([[0],{103:function(e,t,a){e.exports=a.p+"static/media/data_not-balanced.2c5d8911.csv"},104:function(e,t,a){e.exports=a.p+"static/media/data_balanced_1.718935bd.csv"},105:function(e){e.exports=JSON.parse('{"name":"data","children":[{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100},{"value":100}]}')},164:function(e,t,a){e.exports=a(194)},169:function(e,t,a){},170:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},191:function(e){e.exports=JSON.parse("{}")},194:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(18),o=a.n(i),l=(a(169),a(42)),c=(a(170),a(93),a(2)),s=a(235),d=a(9),h=a(10),u=a(12),m=a(11),p=a(110),g=a(54),f=a.n(g),v=a(81),y=a(7),x=a(228),E=a(6),b=a(242),w=a(226),C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).getText=function(e){return"".concat(e,"%")},r.state={},r.getText=r.getText.bind(Object(y.a)(r)),r}return Object(h.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{style:{position:"relative",marginTop:"5px"}},n.a.createElement("div",{style:{position:"absolute",width:"100%",top:"10px",display:"flex",justifyContent:"space-between"}},n.a.createElement(w.a,{style:{textAlign:"left",fontWeight:"bold"}},[n.a.createElement("span",null,"\u25c0")," Identify More"]),n.a.createElement(w.a,{variant:"body2",style:{color:"gray",textAlign:"center"}},null!=this.props.middleText?this.props.middleText():null),n.a.createElement(w.a,{style:{textAlign:"right",fontWeight:"bold"}},["Identify Less ",n.a.createElement("span",null,"\u25b6")])),n.a.createElement("div",null,"orange"===this.props.color?n.a.createElement(k,{valueLabelDisplay:"auto",valueLabelFormat:this.getText,"aria-label":"pretto slider",defaultValue:this.props.defaultValue,onChangeCommitted:this.props.onChangeCommitted}):n.a.createElement(O,{valueLabelDisplay:"auto",valueLabelFormat:this.getText,"aria-label":"pretto slider",defaultValue:this.props.defaultValue,onChangeCommitted:this.props.onChangeCommitted})))}}]),a}(r.Component),k=(Object(x.a)((function(e){return{root:{width:300+2*e.spacing(3)},margin:{height:e.spacing(3)}}})),Object(E.a)({root:{color:"#C57619",height:10,paddingTop:"50px",paddingBottom:"0px"},thumb:{height:18,width:18,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50%+12px)",fontWeight:"bold"},track:{height:4,borderRadius:4,color:"#909090"},rail:{height:4,borderRadius:4,color:"#C57619",opacity:"100%"}})(b.a)),O=Object(E.a)({root:{color:"#000000",height:10,paddingTop:"50px",paddingBottom:"0px"},thumb:{height:18,width:18,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50%+12px)",fontWeight:"bold"},track:{height:4,borderRadius:4,color:"#909090"},rail:{height:4,borderRadius:4,color:"#000000",opacity:"100%"}})(b.a),T=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).chartPerformanceRef=n.a.createRef(),r.getBoxHeight=r.getBoxHeight.bind(Object(y.a)(r)),r.getWidthHeightRatio=r.getWidthHeightRatio.bind(Object(y.a)(r)),r.getMargin=r.getMargin.bind(Object(y.a)(r)),r.getWidth=r.getWidth.bind(Object(y.a)(r)),r.drawChart=r.drawChart.bind(Object(y.a)(r)),r.redrawChart=r.redrawChart.bind(Object(y.a)(r)),r.state={threshold:80,width:1e3,height:1e3},r}return Object(h.a)(a,[{key:"getWidthHeightRatio",value:function(){return 2.4}},{key:"getWidth",value:function(){return null==this.chartPerformanceRef.current?this.state.width:this.chartPerformanceRef.current.parentElement.offsetWidth}},{key:"getMargin",value:function(){return{top:30,right:5,bottom:20,left:30,inBetween:.2*this.state.width}}},{key:"componentDidMount",value:function(){var e,t=this,a=this.getWidth(),r=a*this.getWidthHeightRatio();this.setState({width:a,height:r},(function(){t.drawChart()})),window.addEventListener("resize",(function(){clearTimeout(e),e=setTimeout((function(){t.redrawChart()}),200)}))}},{key:"redrawChart",value:function(){var e=this.getWidth();this.setState({width:e,height:e*this.getWidthHeightRatio()}),c.l(".performanceChart svg").remove(),this.drawChart=this.drawChart.bind(this),this.drawChart()}},{key:"drawChart",value:function(){var e=this;if(null!=this.props.performance_data){var t=this.props.damaging,a=[this.props.performance_data.map((function(e){return{threshold:e.threshold,value:Math.round(100*(t?e.damaging_accuracy:e.faith_accuracy))}})),this.props.performance_data.map((function(e){return{threshold:e.threshold,value:Math.round(100*(t?e.damaging_fpr:e.faith_fpr))}})),this.props.performance_data.map((function(e){return{threshold:e.threshold,value:Math.round(100*(t?e.damaging_fnr:e.faith_fnr))}}))],r=this.getMargin(),n=this.state.width-r.left-r.right,i=this.state.height-r.top-r.bottom,o=(i-2*r.inBetween)/3,l=c.l(".performanceChart").append("svg").attr("width",n+r.left+r.right).attr("height",i+r.top+r.bottom),s=function(e,t){return"stroke"==e?1==t?c.e("#159256"):0==t?c.e("#878787"):c.e("#921515"):1==t?c.e("#F0F7F4"):0==t?c.e("#E8E8E8"):c.e("#F7F0F0")},d=function(e,t,a){return s("stroke",0==e?t<a?1:t>a?-1:0:t<a?-1:t>a?1:0)};a.forEach((function(t,h){var u=t[50].value,m=t[e.props.threshold].value,p=e.props.threshold,g=c.k().domain([0,c.i(t,(function(e){return e.threshold}))]).nice().range([r.left,n-r.right]),f=function(e){switch(e){case 0:return c.k().domain([0,c.i(a[0],(function(e){return e.value}))]).nice().range([o+r.top,r.top]);case 1:return c.k().domain([0,c.i(a[1],(function(e){return e.value}))]).nice().range([2*o+r.inBetween+r.top,o+r.inBetween+r.top]);default:return c.k().domain([0,c.i(a[2],(function(e){return e.value}))]).nice().range([i+r.top,2*o+2*r.inBetween+r.top])}}(h),v=function(e,t){switch(t){case 0:return function(t){t.attr("transform","translate(0,".concat(o+r.top,")")).attr("class","axisGreyY").call(c.b(e).tickSize(0))};case 1:return function(t){t.attr("transform","translate(0,".concat(2*o+r.inBetween+r.top,")")).attr("class","axisGreyY").call(c.b(e).tickSize(0))};default:return function(t){t.attr("transform","translate(0,".concat(i+r.top,")")).attr("class","axisGreyY").call(c.b(e).tickSize(0))}}}(g,h),y=c.h().defined((function(e){return!isNaN(e.value)})).x((function(e){return g(e.threshold)})).y((function(e){return f(e.value)})),x=c.a().defined((function(e){return t=.5,a=.01*p,(r=e.threshold)>=t&&r<=a||r<=t&&r>=a;var t,a,r})).x((function(e){return g(e.threshold)})).y0(f(0)).y1((function(e){return f(e.value)}));l.append("path").datum(t.filter(x.defined())).attr("fill",function(e,t,a){return s("area",0==e?t<a?1:t>a?-1:0:t<a?-1:t>a?1:0)}(h,u,m)).attr("d",x),l.append("path").datum(t).attr("fill","none").attr("stroke","grey").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("d",y),l.append("line").attr("x1",g(.01*p)).attr("y1",f(m)).attr("x2",g(.01*p)).attr("y2",r.top+h*r.inBetween+(h+1)*o).attr("stroke-width",2).attr("stroke",d(h,u,m)).style("stroke-dasharray","5,5"),l.append("line").attr("x1",g(.5)).attr("y1",f(u)).attr("x2",g(.5)).attr("y2",r.top+h*r.inBetween+(h+1)*o).attr("stroke-width",2).attr("stroke",c.e("#D2D2D2")),l.append("text").attr("x",g(.01*p)).attr("y",f(m+8)).attr("text-anchor","middle").text("".concat(m,"%")).attr("font-family","sans-serif").attr("font-size","20px").attr("fill",d(h,u,m)),l.append("g").call(v),l.append("g").call((function(e){return e.attr("transform","translate(".concat(r.left,",0)")).attr("class","axisGrey").call(c.c(f).ticks(2))}))}))}}},{key:"getBoxHeight",value:function(){var e=this.getMargin();return(this.state.height-e.top-e.bottom-2*e.inBetween)/3}},{key:"render",value:function(){var e=this.props.damaging?"damaging":"good faith",t=this.props.damaging?"good":"bad faith";return n.a.createElement("div",{style:{marginTop:"20px"}},n.a.createElement("div",{style:{width:"50%",display:"inline-block",verticalAlign:"top"}},n.a.createElement("div",{style:{marginTop:"20px"},className:"performanceChart",ref:this.chartPerformanceRef})),n.a.createElement("div",{style:{width:"50%",display:"inline-block",verticalAlign:"top"}},n.a.createElement("div",{style:{height:"".concat(this.getBoxHeight(),"px"),padding:"0% 5%",display:"flex",flexDirection:"column",justifyContent:"center",marginTop:"".concat(this.getMargin().top+20,"px"),marginBottom:"".concat(this.getMargin().inBetween,"px")}},n.a.createElement("div",null,n.a.createElement(w.a,{variant:"h6",textAlign:"center"},"Accuracy"," "),n.a.createElement(w.a,{variant:"body2"},"Correctly predicted edits out of all edits"," "))),n.a.createElement("div",{style:{height:"".concat(this.getBoxHeight(),"px"),padding:"0% 5%",display:"flex",flexDirection:"column",justifyContent:"center",marginBottom:"".concat(this.getMargin().inBetween,"px")}},n.a.createElement("div",null,n.a.createElement(w.a,{variant:"h6",textAlign:"center"},"False Positive Rate"),n.a.createElement(w.a,{variant:"body2"},"Percentage of ",t," edits that are falsely identified as"," ",e," "))),n.a.createElement("div",{style:{height:"".concat(this.getBoxHeight(),"px"),padding:"0% 5%",display:"flex",flexDirection:"column",justifyContent:"center"}},n.a.createElement("div",null,n.a.createElement(w.a,{variant:"h6",textAlign:"center"},"False Negative Rate"),n.a.createElement(w.a,{variant:"body2"},"Percentage of ",e," edits that won\u2019t be identified"," ")))))}}]),a}(r.Component),_=a(229),P=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={},r}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.size/2;return n.a.createElement("svg",{height:2*e,width:2*e},n.a.createElement("circle",{cx:e,cy:e,r:e,fill:this.props.color}))}}]),a}(r.Component),j=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={},r}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.size;return n.a.createElement("svg",{height:e,width:e},n.a.createElement("line",{x1:"0",y1:"0",x2:e,y2:e,stroke:this.props.color,strokeWidth:2}),n.a.createElement("line",{x1:"0",y1:e,x2:e,y2:"0",stroke:this.props.color,strokeWidth:2}))}}]),a}(r.Component),R=P,N=a(243),D=a(230),S=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return n.a.createElement(_.a,{item:!0,xs:this.props.gridSize,className:"modelOptions"},n.a.createElement(w.a,{component:"div",variant:"subtitle2"},n.a.createElement(s.a,null,"MODEL OPTIONS")),n.a.createElement(N.a,{exclusive:!0,value:this.props.damaging,onChange:this.props.onChange,className:"options"},n.a.createElement(w.a,{component:D.a,value:!0,variant:"h6",className:"text"},"Damaging Model"),n.a.createElement(w.a,{value:!1,component:D.a,variant:"h6",className:"text"},"GoodFaith Model")))}}]),a}(r.Component),F=a(46),M=a.n(F),A=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).onSliderChange=function(e,t){r.setState({threshold:t}),c.l(".rowChart svg").remove(),r.drawChart=r.drawChart.bind(Object(y.a)(r)),r.drawChart()},r.onTypeChange=function(e,t){null!=t&&(r.setState({damaging:t}),r.state.damaging=t,c.l(".rowChart svg").remove(),r.drawChart=r.drawChart.bind(Object(y.a)(r)),r.drawChart())},r.chartRef=n.a.createRef(),r.getWidth=r.getWidth.bind(Object(y.a)(r)),r.drawChart=r.drawChart.bind(Object(y.a)(r)),r.redrawChart=r.redrawChart.bind(Object(y.a)(r)),r.state={threshold:60,width:1e3,height:1e3,widthHeightRatio:.8,graph1Scale:1,dotWidth:0,sliderRange:[20,1e3],damaging:!0},r}return Object(h.a)(a,[{key:"getWidth",value:function(){return null==this.chartRef.current?this.state.width:this.chartRef.current.parentElement.offsetWidth}},{key:"componentDidMount",value:function(){var e,t=this,a=this.getWidth(),r=.8*a,n=a-30;this.setState({width:a,height:r,sliderRange:[10,n],damaging:!0},(function(){t.drawChart()})),window.addEventListener("resize",(function(){clearTimeout(e),e=setTimeout((function(){t.redrawChart()}),200)}))}},{key:"redrawChart",value:function(){var e=this.getWidth(),t=e-30;this.setState({width:e,height:.8*e,sliderRange:[10,t],damaging:this.state.damaging}),c.l(".rowChart svg").remove(),this.drawChart=this.drawChart.bind(this),this.drawChart()}},{key:"drawChart",value:function(e){var t=0,a=30,r=30,n=10,i=this.state.width-n-a,o=this.state.height-t-r,l=c.l(".rowChart").append("svg").attr("width",i+n+a).attr("height",o+t+r),s=this.state.threshold/100,d=1*i/50,h=.5*d;if(null!=this.props.data){var u=function(){var e=Object(v.a)(f.a.mark((function e(t){var a,r,n,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(e){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)},a='<h3>Rev. Id = <span><a href="https://en.wikipedia.org/w/index.php?title=&diff=prev&oldid='+t+'" target="_blank">'+t+"</a></span></h3>\n",r="https://cors-anywhere.herokuapp.com/",n="https://en.wikipedia.org/w/api.php",e.next=6,M.a.get(r+n+"?format=json&action=query&revids="+t+"&prop=revisions").then((function(e){var t=e.data.query.pages[Object.keys(e.data.query.pages)[0]],r=t.revisions[0];console.log(r),a=a+"<h4 class='articleTitle'>ARTICLE TITLE: "+t.title+"</h4><h5>Edited by "+(i(r.user)?"Anonymous":r.user)+" on "+r.timestamp+"</h5>\n",""!=r.comment&&(a=a+"<h4>Comment from editor: </h4><p>"+r.comment+"</p>")}),(function(e){}));case 6:return e.next=8,M.a.get(r+n+"?&action=compare&torelative=prev&prop=diff&fromrev="+t+"&format=json").then((function(e){a=a+"<table><tr class='header'><td class='before' colspan='2'>Before</td><td class='after' colspan='2'>After</td></tr>"+e.data.compare["*"]+"</table>"}),(function(e){}));case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e,t,a,r){var n,i=t.map((function(t){return{rev_id:t.rev_id,xvalue:parseFloat(r?t.confidence_damage:t.confidence_faith).toFixed(2),x:.02*Math.ceil(50*parseFloat(r?t.confidence_damage:t.confidence_faith).toFixed(2)),correct:parseFloat(r?t.confidence_damage:t.confidence_faith).toFixed(2)>=e==r?t.damaging_label:t.faith_label,predict:parseFloat(r?t.confidence_damage:t.confidence_faith).toFixed(2)>=e,label:r?t.damaging_label:t.faith_label}})).sort((function(e,t){if(e.x==t.x){var a=e.correct?1:0;return(t.correct?1:0)-a}return t.x-e.x})),o=100,l=1,s=Object(p.a)(i);try{for(s.s();!(n=s.n()).done;){var d=n.value;Math.abs(o-d.x)<1e-4?(l+=1,d.y=a*l):(o=d.x,l=1,d.y=a),d.correct?d.category=1:d.category=0,d.predict?d.color=c.e("#C57619"):d.color=c.e("#909090")}}catch(h){s.e(h)}finally{s.f()}return i}(s,this.props.data,d,this.state.damaging),g=c.k().domain([0,1]).nice().range([n,i+n]),y={draw:function(e,t){var a=Math.sqrt(2*t)/2,r=Math.sqrt(t)/6;e.moveTo(-a,r),e.lineTo(a,r),e.lineTo(a,-r),e.lineTo(-a,-r),e.closePath(),e.moveTo(r,a),e.lineTo(r,-a),e.lineTo(-r,-a),e.lineTo(-r,a),e.closePath()}};l.append("line").attr("x1",i+n-100*h*(1-s)).attr("y1",t).attr("x2",i+n-100*h*(1-s)).attr("y2",o-30).attr("stroke-width",2).attr("stroke","black").style("stroke-dasharray","5,5");var x=100*s+"%";l.append("text").attr("x",i+n-100*h*(1-s)).attr("y",o-15).attr("text-anchor","middle").text(x).attr("font-family","sans-serif").attr("font-size","15px"),l.append("g").selectAll("path").data(m).join("path").attr("transform",(function(e){return"translate(".concat(g(e.x),",").concat(e.y+t,"), rotate(45)")})).attr("fill",(function(e){return e.color})).attr("d",c.m().type((function(e){return 0===e.category?y:c.n})).size(d*d*.4)).on("click",function(){var e=Object(v.a)(f.a.mark((function e(a){var r,n,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=c.l(".rowChart").append("div").attr("class","tooltip").style("opacity",0)).transition().duration(200).style("opacity",1),e.t0=r,e.next=5,u(a.rev_id);case 5:e.t1=e.sent,e.t0.html.call(e.t0,e.t1).style("position","absolute").style("left",g(a.x)+"px"),n=a.y+t,i=Number.parseInt(r.style("height")),n+i>o+100&&(n-=i),r.style("top",n+"px");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("mouseover",(function(e){c.l(".rowChart div").remove()}))}}},{key:"getClickTip",value:function(){return n.a.createElement("span",null,n.a.createElement("strong",null,"TIP:")," Click on a revision (cross or circle) to view more details.")}},{key:"render",value:function(){var e=this.state.damaging?"damaging":"good faith",t=this.state.damaging?"good":"bad faith";return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{width:"55%",display:"inline-block",verticalAlign:"top",position:"relative"}},n.a.createElement("div",{className:"upperSettings"},n.a.createElement(_.a,{container:!0,spacing:0},n.a.createElement(S,{damaging:this.state.damaging,onChange:this.onTypeChange,gridSize:9,key:this.state.damaging}),n.a.createElement(_.a,{item:!0,xs:3,className:"threshold"},n.a.createElement("div",{className:"innerBox"},n.a.createElement(w.a,{variant:"subtitle2"},n.a.createElement(s.a,null,"threshold")),n.a.createElement(_.a,{container:!0,spacing:2,className:"options"},n.a.createElement(_.a,{item:!0,xs:12},n.a.createElement(w.a,{component:"div",variant:"h6",className:"text"},this.state.threshold," %"))))))),n.a.createElement("div",{style:{marginLeft:"".concat(this.state.sliderRange[0],"px"),width:"".concat(this.state.sliderRange[1]-this.state.sliderRange[0],"px")}},n.a.createElement(w.a,{variant:"subtitle2"},"VISUALIZATION"),n.a.createElement(C,{defaultValue:60,clickTip:!0,middleText:this.getClickTip,onChangeCommitted:this.onSliderChange,color:"orange"})),n.a.createElement("div",{className:"rowChart",ref:this.chartRef,style:{position:"relative"}}),n.a.createElement("div",{className:"legendCard",id:"explorerLegend"},n.a.createElement(w.a,{component:"div",variant:"subtitle2"},"legend"),n.a.createElement(_.a,{container:!0,spacing:0,style:{marginTop:"10px"}},n.a.createElement(_.a,{item:!0,xs:12},n.a.createElement("div",{className:"legendMark"},n.a.createElement(R,{size:12,color:"#909090"})," ",n.a.createElement(w.a,{component:"span",variant:"body2"},"Correctly classified ",t," edits (TN)"))),n.a.createElement(_.a,{item:!0,xs:12},n.a.createElement("div",{className:"legendMark"},n.a.createElement(j,{size:12,color:"#909090"})," ",n.a.createElement(w.a,{component:"span",variant:"body2"},"Uncaught ",e," edits (FN)"," "))),n.a.createElement(_.a,{item:!0,xs:12},n.a.createElement("div",{className:"legendMark"},n.a.createElement(R,{size:12,color:"#C57619"})," ",n.a.createElement(w.a,{component:"span",variant:"body2"},"Correctly classified ",e," edits (TP)"))),n.a.createElement(_.a,{item:!0,xs:12},n.a.createElement("div",{className:"legendMark"},n.a.createElement(j,{size:12,color:"#C57619"})," ",n.a.createElement(w.a,{component:"span",variant:"body2"},"Mis-classified ",t," edits (FP)"," ")))))),n.a.createElement("div",{className:"sidePanel"},n.a.createElement(w.a,{variant:"subtitle2"},"PERFORMANCE"),n.a.createElement(T,{performance_data:this.props.performance_data,threshold:this.state.threshold,key:[this.state.damaging,this.state.threshold],damaging:this.state.damaging})))}}]),a}(r.Component),W=a(103),z=a.n(W),B=a(80),H=a.n(B),L=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={data:null,change:0},r}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;c.f(z.a,(function(e){return{confidence_faith:+e.confidence_faith,faith_label:"True"==e.goodfaith,confidence_damage:+e.confidence_damage,damaging_label:"True"==e.damaging,rev_id:+e.rev_id}})).then((function(t){e.setState({data:t.slice(0,2e3)}),e.setState({change:2})}))}},{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"render",value:function(){return n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(A,{data:this.state.data,performance_data:this.props.performanceData,key:this.state.change}))}}]),a}(r.Component),I=a(231),G=a(236),q=a(233),V=a(239),U=a(109),J=a(240),$=a(234),Y=a(37),K=a(104),Z=a.n(K),Q=a(105),X=function(e){var t=e[0],a=e[1],r=e[2],n=e[3];return[(t+a)/(t+a+r+n),r/(r+a),n/(n+t)]},ee=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).onTypeChange=function(e,t){if(null!=t){var a=0,n=0,i=0;if(null!=r.props.performanceData){var o=r.props.performanceData;a=100*(t?o[50].damaging_accuracy:o[50].faith_accuracy),n=100*(t?o[50].damaging_fpr:o[50].faith_fpr),i=100*(t?o[50].damaging_fnr:o[50].faith_fnr)}r.setState({damaging:t}),r.state.damaging=t,r.getWholePerformance(),c.l(".compareChart svg").remove(),r.drawChart=r.drawChart.bind(Object(y.a)(r)),r.drawChart(),r.setState({defaultPerformance:[a.toFixed(1),n.toFixed(1),i.toFixed(1)]}),c.l(".comparePerformance svg").remove(),r.drawPerformanceChart=r.drawPerformanceChart.bind(Object(y.a)(r)),r.drawPerformanceChart(),r.setState({defaultPerformance:[a.toFixed(1),n.toFixed(1),i.toFixed(1)]})}},r.onSliderChange=function(e,t){r.setState({threshold:t}),r.getWholePerformance(),c.l(".compareChart svg").remove(),r.drawChart=r.drawChart.bind(Object(y.a)(r)),r.drawChart(),c.l(".comparePerformance svg").remove(),r.drawPerformanceChart=r.drawPerformanceChart.bind(Object(y.a)(r)),r.drawPerformanceChart()},r.compareChartRef=n.a.createRef(),r.comparePerformanceRef=n.a.createRef(),r.wholePerformanceRef=n.a.createRef(),r.getMargin=r.getMargin.bind(Object(y.a)(r)),r.getWidth=r.getWidth.bind(Object(y.a)(r)),r.drawChart=r.drawChart.bind(Object(y.a)(r)),r.redrawChart=r.redrawChart.bind(Object(y.a)(r)),r.getWholePerformance=r.getWholePerformance.bind(Object(y.a)(r)),r.getPerformanceWidth=r.getPerformanceWidth.bind(Object(y.a)(r)),r.getPerformanceForThreshold=r.getPerformanceForThreshold.bind(Object(y.a)(r)),r.state={threshold:60,width:1e3,height:1e3,performanceWidth:1e3,group1Color:"#C57619",group2Color:"#3777A5",sliderRange:[20,1e3],wholePerformance:[0,0,0],defaultPerformance:[0,0,0],groupOnePerformance:null,groupTwoPerformance:null,damaging:!0},r}return Object(h.a)(a,[{key:"getMargin",value:function(){var e=this.state.performanceHeight;return{top:0,right:40,bottom:50,left:20,blockHeight:(e-50)/3,chartHeight:(e-50)/12}}},{key:"getWidth",value:function(){return null===this.compareChartRef.current?this.state.width:this.compareChartRef.current.parentElement.offsetWidth}},{key:"getPerformanceWidth",value:function(){return null===this.comparePerformanceRef.current?this.state.performanceWidth:this.comparePerformanceRef.current.parentElement.offsetWidth}},{key:"getPerformanceHeight",value:function(){return null===this.wholePerformanceRef.current||null===this.compareChartRef.current?this.state.performanceHeight:.5*(this.compareChartRef.current.parentElement.offsetWidth-60)+300-this.wholePerformanceRef.current.offsetHeight}},{key:"getPerformanceForThreshold",value:function(){var e=.01*this.state.threshold,t=this.state.damaging;if(console.log(this.state.damaging,t),null!=this.props.groupOneData&&null!=this.props.groupTwoData){var a=this.props.groupOneData.filter((function(a){return(t?a.confidence_damage:a.confidence_faith)>=e&&!(t?a.damaging_label:a.faith_label)})).length,r=this.props.groupOneData.filter((function(a){return(t?a.confidence_damage:a.confidence_faith)>=e&&(t?a.damaging_label:a.faith_label)})).length,n=this.props.groupOneData.filter((function(a){return(t?a.confidence_damage:a.confidence_faith)<e&&(t?a.damaging_label:a.faith_label)})).length,i=this.props.groupOneData.filter((function(a){return(t?a.confidence_damage:a.confidence_faith)<e&&!(t?a.damaging_label:a.faith_label)})).length,o=this.props.groupTwoData.filter((function(a){return(t?a.confidence_damage:a.confidence_faith)>=e&&!(t?a.damaging_label:a.faith_label)})).length,l=this.props.groupTwoData.filter((function(a){return(t?a.confidence_damage:a.confidence_faith)>=e&&(t?a.damaging_label:a.faith_label)})).length,c=this.props.groupTwoData.filter((function(a){return(t?a.confidence_damage:a.confidence_faith)<e&&(t?a.damaging_label:a.faith_label)})).length,s=this.props.groupTwoData.filter((function(a){return(t?a.confidence_damage:a.confidence_faith)<e&&!(t?a.damaging_label:a.faith_label)})).length;return{groupOne:[r,i,a,n],groupTwo:[l,s,o,c],all:[r+l,i+s,a+o,n+c]}}return{groupOne:this.state.groupOnePerformance,groupTwo:this.state.groupTwoPerformance,all:this.state.wholePerformance}}},{key:"componentDidMount",value:function(){var e=this,t=this.getWidth(),a=t/2.4,r=this.getPerformanceWidth(),n=this.getPerformanceHeight(),i=t-40;this.getWholePerformance();var o,l=0,c=0,s=0;if(null!=this.props.performanceData){var d=this.props.performanceData;l=100*d[50].damaging_accuracy,c=100*d[50].damaging_fpr,s=100*d[50].damaging_fnr}this.setState({width:t,height:a,sliderRange:[10,i],performanceWidth:r,performanceHeight:n,damaging:!0,defaultPerformance:[l.toFixed(1),c.toFixed(1),s.toFixed(1)]},(function(){e.drawChart(),e.drawPerformanceChart()})),window.addEventListener("resize",(function(){clearTimeout(o),o=setTimeout((function(){e.redrawChart()}),200)}))}},{key:"redrawChart",value:function(){var e=this.getWidth(),t=this.getPerformanceWidth(),a=this.getPerformanceHeight(),r=e-40;this.setState({width:e,height:e/2,performanceWidth:t,performanceHeight:a,sliderRange:[10,r]}),c.l(".compareChart svg").remove(),this.drawChart=this.drawChart.bind(this),this.drawChart(),c.l(".comparePerformance svg").remove(),this.drawPerformanceChart=this.drawPerformanceChart.bind(this),this.drawPerformanceChart()}},{key:"getWholePerformance",value:function(){if(null!=this.props.performanceData&&null!=this.props.groupOneData&&null!=this.props.groupTwoData){var e=this.getPerformanceForThreshold(),t=e.groupOne,a=e.groupTwo,r=X(e.all);this.setState({wholePerformance:r,groupOnePerformance:t,groupTwoPerformance:a})}}},{key:"drawPerformanceChart",value:function(){var e=this,t=this.getMargin(),a=this.state.performanceWidth-t.left-t.right,r=this.state.performanceHeight-t.top-t.bottom,n=c.l(".comparePerformance").append("svg").attr("width",a+t.left+t.right).attr("height",r+t.top+t.bottom),i=r/3,o=i/4;if(null!=this.state.groupOnePerformance&&null!=this.state.groupTwoPerformance){var l=function(e,r,i,o,l,c,s){var d=u(i);n.append("line").attr("x1",t.left).attr("y1",e).attr("x2",t.left+a).attr("y2",e).attr("stroke-width",2).attr("stroke","grey"),n.append("line").attr("x1",d).attr("y1",e-5).attr("x2",d).attr("y2",e+5).attr("stroke-width",6).attr("stroke",o),n.append("line").attr("x1",u(r)).attr("y1",e).attr("x2",d).attr("y2",e).attr("stroke-width",3).attr("stroke",o);var h=d-40;h<t.left?h=t.left:h>a+t.left+t.right&&(h=a+t.left+t.right-40);var m=e+10;l&&(1==c&&(m=e-35),n.append("rect").attr("x",h).attr("y",m).attr("width",80).attr("height",24).attr("rx",4).attr("ry",4).attr("fill",o),n.append("text").attr("x",h+40).attr("y",m+13).attr("text-anchor","middle").attr("alignment-baseline","middle").text(s+" more").attr("font-family","sans-serif").attr("fill","white").attr("font-size","14px"))},s=X(this.state.groupOnePerformance),d=X(this.state.groupTwoPerformance),h=this.state.wholePerformance,u=c.k().domain([0,1]).nice().range([t.left,t.left+a]);["Accuracy","FPR","FNR"].forEach((function(a,r){var n=i*r+3*o,u=t.top+i*r+4*o,m=s[r],p=d[r],g=m,f=p,v=2;m>p?(g=p,f=m,v=1):m>p&&(v=0);var y=0;y=0===g?"\u221e":Math.round(100*(f-g)/f)+"%",l(n,h[r],s[r],c.e(e.state.group1Color),1===v,1,y),l(u,h[r],d[r],c.e(e.state.group2Color),2===v,2,y)}))}}},{key:"drawChart",value:function(){var e,t=20,a=40,r=0,n=this.state.width-r-a,i=n/2.5,o=c.l(".compareChart").append("svg").attr("width",n+r+a).attr("height",i),l={draw:function(e,t){var a=Math.sqrt(2*t)/2,r=Math.sqrt(t)/6;e.moveTo(-a,r),e.lineTo(a,r),e.lineTo(a,-r),e.lineTo(-a,-r),e.closePath(),e.moveTo(r,a),e.lineTo(r,-a),e.lineTo(-r,-a),e.lineTo(-r,a),e.closePath()}},s=n/2.4;this.state.threshold;if(null!=this.props.groupOneData&&null!=this.props.groupTwoData&&null!=this.state.groupOnePerformance&&null!=this.state.groupTwoPerformance){var d=function(e,t,a,r,n){var i=[],o=[t,t+a,t+a+r];return x.forEach((function(t,a){a<o[0]?i.push({x:t.x,y:t.y,category:0,color:e}):a>=o[0]&&a<o[1]?i.push({x:t.x,y:t.y,category:1,color:e}):a>=o[1]&&a<o[2]?i.push({x:t.x,y:t.y,category:0,color:c.e("#909090")}):i.push({x:t.x,y:t.y,category:1,color:c.e("#909090")})})),i},h=this.state.groupOnePerformance,u=this.state.groupTwoPerformance,m=h[0],p=(h[1],h[2]),g=h[3],f=u[0],v=(u[1],u[2]),y=u[3],x=(e=Q,c.j().size([s-2,s-2]).padding(3)(c.g(e).sum((function(e){return e.value})).sort((function(e,t){return t.value-e.value})))).children.slice(0,this.props.sliceNumber).map((function(e){return{x:e.x,y:e.y,r:e.r,category:"cross"}})).sort((function(e,a){var n=r+i,o=i/2+t;return Math.sqrt(Math.pow(e.x-n,2)+Math.pow(e.y-o,2))-Math.sqrt(Math.pow(a.x-n,2)+Math.pow(a.y-o,2))})),E=x[0].r,b=d(c.e(this.state.group1Color),p,m,g),w=d(c.e(this.state.group2Color),v,f,y);o.append("g").selectAll("path").data(b).join("path").attr("transform",(function(e){return"translate(".concat(r+.05*n+e.x,",").concat(e.y,"),rotate(45)")})).attr("fill",(function(e){return e.color})).attr("d",c.m().type((function(e){return 0===e.category?l:c.n})).size(E*E*1.5)),o.append("g").selectAll("path").data(w).join("path").attr("transform",(function(e){return"translate(".concat(r+.55*n+e.x,",").concat(e.y,"),rotate(45)")})).attr("fill",(function(e){return e.color})).attr("d",c.m().type((function(e){return 0===e.category?l:c.n})).size(E*E*1.5))}}},{key:"getDisclaimer",value:function(){return n.a.createElement("span",null,n.a.createElement("strong",null,"NOTE:")," GoodFaith Model has some bugs and so is disabled.")}},{key:"render",value:function(){var e=this,t=this.state.damaging?"damaging":"good faith",a=this.state.damaging?"good":"bad faith";return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{ref:this.visualizationRef,style:{width:"55%",display:"inline-block",verticalAlign:"top"}},n.a.createElement("div",{className:"upperSettings"},n.a.createElement(_.a,{container:!0,spacing:0},n.a.createElement(S,{damaging:this.state.damaging,gridSize:9,key:this.state.damaging}),n.a.createElement(_.a,{item:!0,xs:3,className:"threshold"},n.a.createElement("div",{className:"innerBox"},n.a.createElement(w.a,{variant:"subtitle2"},n.a.createElement(s.a,null,"threshold")),n.a.createElement(_.a,{container:!0,spacing:2,className:"options"},n.a.createElement(_.a,{item:!0,xs:12},n.a.createElement(w.a,{component:"div",variant:"h6",className:"text"},this.state.threshold," %"))))))),n.a.createElement("div",{style:{marginLeft:"".concat(this.state.sliderRange[0],"px"),width:"".concat(this.state.sliderRange[1]-this.state.sliderRange[0],"px")}},n.a.createElement(w.a,{variant:"subtitle2"},"Fairness in Groups"),n.a.createElement(C,{defaultValue:60,middleText:this.getDisclaimer,onChangeCommitted:this.onSliderChange})),n.a.createElement("div",{className:"compareChart",ref:this.compareChartRef}),n.a.createElement("div",{style:{marginLeft:"".concat(this.state.sliderRange[0],"px"),width:"".concat(this.state.sliderRange[1]-this.state.sliderRange[0],"px"),transform:"translate(0px,-20px)"}},n.a.createElement("div",{style:{width:"50%",display:"inline-block"}},n.a.createElement(w.a,{variant:"h6",component:"div",style:{textAlign:"center",color:"".concat(this.state.group1Color)}},"Newcomer Edits"),n.a.createElement(w.a,{variant:"body2",component:"div",style:{textAlign:"center"}},n.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"}},n.a.createElement(s.a,{width:"80%"},"Model performance on edits made by newcomer editors")))),n.a.createElement("div",{style:{width:"50%",display:"inline-block"}},n.a.createElement(w.a,{variant:"h6",component:"div",style:{textAlign:"center",color:"".concat(this.state.group2Color)}},"Experienced Edits"),n.a.createElement(w.a,{variant:"body2",component:"div",style:{textAlign:"center"}},n.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"}},n.a.createElement(s.a,{width:"80%"},"Model performance on edits made by experienced editors")))),n.a.createElement("div",{className:"legendCard"},n.a.createElement(w.a,{component:"div",variant:"subtitle2"},"legend"),n.a.createElement(_.a,{container:!0,spacing:0,style:{marginTop:"10px"}},n.a.createElement(_.a,{item:!0,xs:6},n.a.createElement("div",{className:"legendMark"},n.a.createElement(R,{size:12,color:"#909090"})," ",n.a.createElement(w.a,{component:"span",variant:"body2"},"Correctly classified ",a," edits"))),n.a.createElement(_.a,{item:!0,xs:6},n.a.createElement("div",{className:"legendMark"},n.a.createElement(R,{size:12,color:this.state.group1Color}),n.a.createElement("span",{style:{width:"2px"}}),n.a.createElement(R,{size:12,color:this.state.group2Color})," ",n.a.createElement(w.a,{component:"span",variant:"body2"},"Correctly classified ",t," edits"))),n.a.createElement(_.a,{item:!0,xs:6},n.a.createElement("div",{className:"legendMark"},n.a.createElement(j,{size:12,color:"#909090"})," ",n.a.createElement(w.a,{component:"span",variant:"body2"},"Uncaught ",t," edits"," "))),n.a.createElement(_.a,{item:!0,xs:6},n.a.createElement("div",{className:"legendMark"},n.a.createElement(j,{size:12,color:this.state.group1Color}),n.a.createElement("span",{style:{width:"2px"}}),n.a.createElement(j,{size:12,color:this.state.group2Color})," ",n.a.createElement(w.a,{component:"span",variant:"body2"},"Misclassified ",a," edits"," "))))))),n.a.createElement("div",{className:"sidePanel",id:"comparePerformanceSidePanel"},n.a.createElement("div",{className:"overallPerformance",ref:this.wholePerformanceRef,style:{borderBottom:"1px solid lightgrey"}},n.a.createElement(w.a,{component:"div",variant:"subtitle2"},"PERFORMANCE"),n.a.createElement(_.a,{container:!0,className:"performanceBlock",spacing:0,style:{marginTop:"5px",textAlign:"left",marginLeft:"0px"}},n.a.createElement(_.a,{item:!0,xs:4},n.a.createElement(w.a,{component:"div",className:"title"},"ACC"),n.a.createElement(w.a,{component:"div"},n.a.createElement(s.a,{className:"data"},(100*this.state.wholePerformance[0]).toFixed(1),"%"))),n.a.createElement(_.a,{item:!0,xs:4},n.a.createElement(w.a,{component:"div",className:"title"},"FPR"),n.a.createElement(w.a,{component:"div"},n.a.createElement(s.a,{className:"data"},(100*this.state.wholePerformance[1]).toFixed(1),"%"))),n.a.createElement(_.a,{item:!0,xs:4},n.a.createElement(w.a,{component:"div",className:"title"},"FNR"),n.a.createElement(w.a,{component:"div"},n.a.createElement(s.a,{className:"data"},(100*this.state.wholePerformance[2]).toFixed(1),"%"))))),n.a.createElement("div",{style:{display:"flex"}},n.a.createElement("div",{style:{width:"40%",display:"inline-block"},className:"groupPerformance"},["Accuracy","FPR","FNR"].map((function(t,a){return n.a.createElement("div",{style:{height:"".concat(e.getMargin().blockHeight,"px"),fontSize:"12px",transform:"translate(0px,7px)"}},n.a.createElement("div",{style:{height:"".concat(e.getMargin().chartHeight,"px")}}),n.a.createElement("div",{style:{height:"".concat(e.getMargin().chartHeight,"px"),display:"flex",flexDirection:"column-reverse"}},n.a.createElement(w.a,{variant:"body2",className:"classTitle"},t)),n.a.createElement("div",{style:{height:"".concat(e.getMargin().chartHeight,"px"),display:"flex",flexDirection:"column-reverse"}},n.a.createElement("div",null,n.a.createElement("div",{className:"title"},"newcomer edits"),n.a.createElement("div",{className:"data",style:{color:e.state.group1Color}},null===e.state.groupOnePerformance?"...":(100*X(e.state.groupOnePerformance)[a]).toFixed(1)+"%"))),n.a.createElement("div",{style:{height:"".concat(e.getMargin().chartHeight,"px"),display:"flex",flexDirection:"column-reverse"}},n.a.createElement("div",null,n.a.createElement("div",{className:"title"},"experienced edits"),n.a.createElement("div",{className:"data",style:{color:e.state.group2Color}},null===e.state.groupTwoPerformance?"...":(100*X(e.state.groupTwoPerformance)[a]).toFixed(1)+"%"))))}))),n.a.createElement("div",{style:{width:"60%",display:"inline-block"}},n.a.createElement("div",{className:"comparePerformance",ref:this.comparePerformanceRef})))))}}]),a}(r.Component),te=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={anonData:null,loggedData:null,newcomerData:null,experiencedData:null,change:0},r}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;c.f(Z.a,(function(e){return{anonymous:"TRUE"==e.anonymous,newcomer:e.edit_years<=8,confidence_faith:+e.confidence_faith,faith_label:"TRUE"==e.goodfaith,confidence_damage:+e.confidence_damage,damaging_label:"TRUE"==e.damaging}})).then((function(t){var a=t.filter((function(e){return e.anonymous})).slice(0,100),r=t.filter((function(e){return!e.anonymous})).slice(0,100),n=t.filter((function(e){return e.newcomer})).slice(0,100),i=t.filter((function(e){return!e.newcomer})).slice(0,100);e.setState({anonData:a,loggedData:r,newcomerData:n,experiencedData:i}),console.log(n),console.log(i),e.setState({change:2})}))}},{key:"render",value:function(){return console.log("hi"),console.log(this.props),n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(ee,{groupOneData:this.state.newcomerData,groupTwoData:this.state.experiencedData,key:this.state.change,performanceData:this.props.performanceData,sliceNumber:100}))}}]),a}(r.Component),ae=a(238),re=a(244),ne=a(232),ie=a(237),oe=(a(191),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).onTypeChange=function(e,t){null!=t&&r.setState({damaging:t})},r.onThresChange=function(e,t){null!=t&&r.setState({threshold:t})},r.onTextChange=function(e){r.onThresChange(e,e.target.value?Number(e.target.value):null)},r.getData=function(){function e(e){for(var t={},a=0,r=.01;r<1&&a<e.length;){if(e[a]&&r-e[a].threshold<1e-6){var n=e[a];t[r.toFixed(2)]={"!f1":n["!f1"],"!precision":n["!precision"],"!recall":n["!recall"],accuracy:n.accuracy,f1:n.f1,filter_rate:n.filter_rate,fpr:n.fpr,match_rate:n.match_rate,precision:n.precision,recall:n.recall},r=Number.parseFloat(Number.parseFloat(r+.01).toFixed(2))}a+=1}return t}M.a.get("https://ores.wikimedia.org/v3/scores/enwiki/?models=damaging|goodfaith&model_info=statistics.thresholds.true").then((function(t){var a=t.data.enwiki.models.damaging.statistics.thresholds.true,n=t.data.enwiki.models.goodfaith.statistics.thresholds.true;console.log("got data"),r.setState({damagingData:e(a),goodfaithData:e(n)})}))},r.chartRef=n.a.createRef(),r.state={damaging:!0,threshold:null,damagingData:null,goodfaithData:null,recommendations:null},r}return Object(h.a)(a,[{key:"getRecommendations",value:function(){var e=["damaging","goodfaith"],t=[{type:"Aggressive",param:'"maximum precision @ recall >= 0.9"'},{type:"Cautious",param:'"maximum recall @ precision >= 0.9"'}],a={damaging:{Aggressive:null,Cautious:null,Balanced:null},goodfaith:{Aggressive:null,Cautious:null,Balanced:null}},r=function(r){var n=function(n){M.a.get("https://ores.wikimedia.org/v3/scores/enwiki/?models="+e[r]+"&model_info=statistics.thresholds.true."+t[n].param).then((function(i){a[e[r]][t[n].type]=Number.parseFloat(i.data.enwiki.models[e[r]].statistics.thresholds.true[0].threshold.toFixed(2))}))};for(var i in t)n(i);a[e[r]].Balanced="damaging"==e[r]?.63:.5};for(var n in e)r(n);return console.log(a),this.setState({recommendations:a}),this.state.recommendations=a,a}},{key:"getProp",value:function(e,t){return null!=this.state.threshold&&this.state.threshold>0&&this.state.threshold<=.98?this.state.damaging?this.state.damagingData[this.state.threshold.toFixed(2)][e]:this.state.goodfaithData[this.state.threshold.toFixed(2)][e]:t}},{key:"getRec",value:function(e){var t=this.state.recommendations;return null==t&&(t={damaging:{Aggressive:.1,Cautious:.63,Balanced:.94},goodfaith:{Aggressive:.85,Cautious:.5,Balanced:.05}}),t[this.state.damaging?"damaging":"goodfaith"][e]}},{key:"componentDidMount",value:function(){this.getData(),this.getRecommendations(),this.setState({damaging:!0,threshold:null})}},{key:"render",value:function(){var e=this,t=this.state.threshold?"#00f":"#ddd",a=this.state.damaging?"damaging":"good faith",r=this.state.damaging?"good":"bad faith";return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{width:"100%",display:"inline-block",verticalAlign:"top"}},n.a.createElement("div",{className:"upperSettings",style:{height:"8vh"}},n.a.createElement(_.a,{container:!0,spacing:0,style:{height:"100%"}},n.a.createElement(S,{damaging:this.state.damaging,onChange:this.onTypeChange,gridSize:4,key:this.state.damaging}),n.a.createElement(_.a,{item:!0,xs:8,style:{height:"auto",paddingLeft:10,paddingBottom:10,borderLeft:"1px solid #d3d3d3"}},n.a.createElement(w.a,{component:"div",variant:"subtitle2"},n.a.createElement(s.a,null,"INTERACTION FLOW")),n.a.createElement(_.a,{container:!0,style:{justifyContent:"space-evenly",height:"100%"}},["1. Choose a Goal","2. Tune Recommendation","3. Request Performance"].map((function(e){return n.a.createElement(w.a,{component:"span",variant:"h6",style:{fontWeight:400,paddingTop:5,paddingRight:50}},e)})))))),n.a.createElement(_.a,{container:!0,spacing:0,style:{height:800}},n.a.createElement(_.a,{item:!0,xs:5},n.a.createElement(N.a,{orientation:"vertical",exclusive:!0,value:this.state.threshold,onChange:this.onThresChange,style:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",justifyContent:"space-evenly",height:"100%",margin:"0px 15%"}},[{type:"Aggressive",subtitle:"Tools for human reviewers",description:"Catch more "+a+" edits at the cost of some "+r+" edits being falsely predicted."},{type:"Balanced",subtitle:"Tools for human reviewers",description:"Similar number of uncaught "+a+" edits and falsely predicted "+r+" edits."},{type:"Cautious",subtitle:"Automated bots",description:"Less falsely predicted "+r+" edits at the cost of more uncaught "+a+" edits."}].map((function(t){return n.a.createElement(D.a,{value:e.getRec(t.type),className:"recommendOptions"},n.a.createElement(_.a,{container:!0,spacing:0},n.a.createElement(_.a,{item:!0,xs:6},n.a.createElement("h4",null,t.type," Model"),n.a.createElement("h5",null,t.subtitle),n.a.createElement("p",null,t.description)),n.a.createElement(_.a,{item:!0,xs:5},n.a.createElement("img",{src:t.type+".svg",height:"100%",width:"100%"}))))})))),n.a.createElement(_.a,{item:!0,xs:7,style:{display:"flex",justifyContent:"center",alignItems:"center"}},n.a.createElement("div",{className:"card",style:{borderColor:t}},n.a.createElement(w.a,{component:"div",variant:"subtitle2",style:{fontSize:13,color:"#000"}},n.a.createElement(s.a,null,"SUGGESTED THRESHOLD")),n.a.createElement(ie.a,{value:this.state.threshold?this.state.threshold.toFixed(2):"N/A",onChange:this.onTextChange,helperText:"N/A",inputProps:{step:.01,min:.01,max:.98,type:"number"},style:{fontSize:50,alignSelf:"left"}}),n.a.createElement(w.a,{variant:"body2"},"This threshold will catch around",n.a.createElement("strong",null," ","--"==this.getProp("recall","--")?"--":(100*this.getProp("recall","--")).toFixed(0),"%"," "),"of the "," "+a," edits while having",n.a.createElement("strong",null," ","--"==this.getProp("fpr","--")?"--":(100*this.getProp("fpr","--")).toFixed(0),"%"," "),"of the "," "+r," edits misclassified."),n.a.createElement(ae.a,null,n.a.createElement(re.a,null,n.a.createElement(w.a,{variant:"h5"},"See specific performance")),n.a.createElement(ne.a,null,n.a.createElement("div",null,["!f1","!precision","!recall","accuracy","f1","filter_rate","fpr"].map((function(t){return n.a.createElement(w.a,{variant:"body2",style:{margin:5}},n.a.createElement("strong",null,t),": ",e.getProp(t,"N/A"))}))))),n.a.createElement(ae.a,null,n.a.createElement(re.a,null,n.a.createElement(w.a,{variant:"h5"},"Copy code for this threshold")),n.a.createElement(ne.a,null,n.a.createElement("pre",{style:{textAlign:"left"}},n.a.createElement("p",{style:{margin:5,fontWeight:"bold"}},"def compute_metrics(y_true, y_pred_scores,"," ",this.state.threshold,', model="',this.state.damaging?"damaging":"goodfaith",'"):'),["# model = damaging or goodfaith","# return a dictionary with metrics","# y_true: a np array of true labels 1/0","# y_pred_scores: a np array of predictions"].map((function(e,t){return n.a.createElement("p",{style:{margin:5}},"  ",e)}))))))))))}}]),a}(r.Component)),le=a(13);function ce(){var e=Object(l.a)(["\n  display: block;\n  margin-bottom: 0vh;\n"]);return ce=function(){return e},e}function se(){var e=Object(l.a)(["\n  padding-left: 10px;\n  padding-top: 5px;\n  padding-bottom: 30px;\n  border-bottom: 1px solid lightgrey;\n"]);return se=function(){return e},e}var de=Y.a.div(se()),he=Y.a.div(ce()),ue=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={},r.state={performance_data:null,change:0},r}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;c.f(H.a,(function(e){return{threshold:+e.threshold,damaging_accuracy:+e.damaging_accuracy,damaging_fpr:+e.damaging_fpr,damaging_fnr:+e.damaging_fnr,faith_accuracy:+e.faith_accuracy,faith_fpr:+e.faith_fpr,faith_fnr:+e.faith_fnr}})).then((function(t){e.setState({performance_data:t}),e.setState({change:1})}))}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null," ",n.a.createElement(le.c,null,n.a.createElement(le.a,{path:"/recommender"},n.a.createElement(he,{style:{height:"97vh",marginBottom:0}},n.a.createElement(de,{style:{height:"7vh"}},n.a.createElement(w.a,{variant:"subtitle1",style:{textAlign:"left"}},"Threshold Recommender"),n.a.createElement("div",{style:{width:"50%",marginTop:"10px"}},n.a.createElement(w.a,{variant:"body2",style:{color:"grey"}},"The threshold recommender helps you decide a threshold that aligns with your model preferences."," "))),n.a.createElement(oe,{style:{height:"77vh"},performanceData:this.state.performance_data,key:this.state.change}))),n.a.createElement(le.a,{path:"/disparity"},n.a.createElement(he,null,n.a.createElement(de,null,n.a.createElement(w.a,{variant:"subtitle1",style:{textAlign:"left"}},"Disparity Visualizer"),n.a.createElement("div",{style:{width:"50%",marginTop:"10px"}},n.a.createElement(w.a,{variant:"body2",style:{color:"grey"}},"This visualization provides insights on how the model performs for wiki\u2019s edited by different user groups; this may help you weigh the pros and cons of picking the threshold."," "))),n.a.createElement(te,{performanceData:this.state.performance_data,key:this.state.change}))),n.a.createElement(le.a,{path:"/"},n.a.createElement(he,null,n.a.createElement(de,null,n.a.createElement(w.a,{variant:"subtitle1",style:{textAlign:"left"}},"Threshold Explorer"),n.a.createElement("div",{style:{width:"50%",marginTop:"10px"}},n.a.createElement(w.a,{variant:"body2",style:{color:"grey"}},"Threshold Explorer helps you visualize model performance under specific thresholds with an example dataset. To start, select a model below, then pick a threshold."," "))),n.a.createElement(L,{performanceData:this.state.performance_data,key:this.state.change})))))}}]),a}(r.Component),me=a(38),pe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={selected:-1},r.clickSection=r.clickSection.bind(Object(y.a)(r)),r}return Object(h.a)(a,[{key:"clickSection",value:function(e){this.setState({selected:e}),console.log("ha"),console.log(e)}},{key:"render",value:function(){var e=this;return n.a.createElement(q.a,{style:{marginTop:"10vh"}},[{text:"About ORES",path:"/about-ores"},{text:"Threshold Explorer",path:"/explorer"},{text:"Threshold Recommender",path:"/recommender"},{text:"Disparity Visualizer",path:"/disparity"},{text:"Feature Injection",path:"/injection"}].map((function(t,a){return n.a.createElement(me.b,{to:t.path},n.a.createElement(V.a,{className:e.props.klass,button:!0,key:t.text,onClick:function(){return e.clickSection(a)}},n.a.createElement("div",{style:{width:"12.5%"}}),n.a.createElement("div",{style:{width:"87.5%"}},n.a.createElement(w.a,{component:"div"},n.a.createElement(s.a,{className:e.state.selected===a?"active-section":"inactive-section"},t.text)))))})))}}]),a}(r.Component);function ge(){var e=Object(l.a)(["\n  display: block;\n  margin-bottom: 15vh;\n"]);return ge=function(){return e},e}function fe(){var e=Object(l.a)(["\n  padding-left: 10px;\n  padding-top: 5px;\n  padding-bottom: 30px;\n  border-bottom: 1px solid lightgrey;\n"]);return fe=function(){return e},e}Y.a.div(fe()),Y.a.div(ge());var ve=Object(U.a)({typography:{root:{component:"div"},fontFamily:"Noto Sans KR",subtitle1:{fontFamily:"Noto Serif",fontSize:"24px"},subtitle2:{fontSize:"12px",marginTop:"10px",color:"#B0B0B0",fontWeight:"bold",textTransform:"uppercase",textAlign:"left"},h6:{fontWeight:"bold",fontSize:"16px",textAlign:"left"},body1:{fontSize:"14px"},body2:{textAlign:"left",fontSize:"14px"},button:{fontStyle:"italic"},h5:{fontSize:"15px",color:"blue",fontWeight:"bold",textTransform:"none",textAlign:"left"}}});ve=Object(J.a)(ve);var ye=Object(x.a)((function(e){return{root:{display:"flex"},appBar:{width:"calc(100% - ".concat(270,"px)"),marginLeft:270},drawer:{width:270,flexShrink:0,textAlign:"center",position:"relative"},drawerPaper:{width:270,paddingTop:"35px",paddingBottom:"35px"},paper:{textAlign:"left",padding:"20px 20px"},list:{fontSize:"16px",textDecoration:"none"},toolbar:{padding:e.spacing(2)},content:{width:"calc(100% - ".concat(270,"px)"),flexGrow:1,backgroundColor:e.palette.background.default,padding:"1.5vh",height:"100vh"}}}));var xe=function(){var e=ye();return n.a.createElement(me.a,{basename:"/ores-viz/"},n.a.createElement($.a,{theme:ve},n.a.createElement("div",{className:"App"},n.a.createElement("body",null,n.a.createElement("div",{className:e.root},n.a.createElement(G.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper},anchor:"left"},n.a.createElement(me.b,{to:"/"},n.a.createElement(I.a,{className:e.paper,elevation:"0"},n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement(w.a,{variant:"subtitle1"},"WIKIPEDIA"),n.a.createElement(w.a,{style:{textAlign:"center"}},"ORES Explorer")))),n.a.createElement(pe,{klass:e.list}),n.a.createElement(q.a,{style:{position:"absolute",bottom:"120px",width:"100%"}},[{text:"About ORES Explorer",path:"/about-us"},{text:"External Resources",path:"/external"}].map((function(t,a){return n.a.createElement(me.b,{to:t.path},n.a.createElement(V.a,{className:e.list,button:!0,key:t.text},n.a.createElement("div",{style:{width:"12.5%"}}),n.a.createElement("div",{style:{width:"87.5%"}},n.a.createElement(w.a,{component:"div"},n.a.createElement(s.a,{color:"#989898"},t.text)))))})))),n.a.createElement("main",{className:e.content},n.a.createElement(ue,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e,t,a){e.exports=a.p+"static/media/performance.760a321c.csv"},93:function(e,t,a){}},[[164,1,2]]]);
//# sourceMappingURL=main.5f341be0.chunk.js.map